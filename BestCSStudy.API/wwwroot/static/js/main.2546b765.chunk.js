(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){},166:function(e,t,a){e.exports={background:"HomeComponent_background__AkaY1",center:"HomeComponent_center__6v_s_"}},169:function(e,t,a){e.exports={imageGallery:"MemberDetailsComponent_imageGallery__AZ8KE",cardBody:"MemberDetailsComponent_cardBody__2Bmom",cardFooter:"MemberDetailsComponent_cardFooter__tO1jf"}},170:function(e,t,a){e.exports={cardBody:"MemberEditComponent_cardBody__3OLFD",cardFooter:"MemberEditComponent_cardFooter__2I64y"}},171:function(e,t,a){e.exports={imgAuthor:"PostDetailsComponent_imgAuthor__18KAm",btnLike:"PostDetailsComponent_btnLike__3ZaW8",active:"PostDetailsComponent_active__j2a_W",btnDislike:"PostDetailsComponent_btnDislike__2lnHy",pDescription:"PostDetailsComponent_pDescription__2J1co"}},230:function(e,t,a){e.exports={footer:"FooterComponent_footer__3CaNI"}},233:function(e,t,a){e.exports={imgThumbnail:"PhotoEditorComponent_imgThumbnail__3Hr55"}},240:function(e,t,a){e.exports=a(453)},345:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},346:function(e,t,a){},37:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAHCCAMAAABLxjl3AAAAkFBMVEXi4uKsrKzh4eGurq7f39+vr6/a2trFxcWxsbHV1dW7u7uzs7POzs7Z2dm5ubnHx8fCwsKwsLDExMTQ0NDT09O+vr64uLjKysq0tLTAwMDDw8O2trbW1ta9vb3Ly8vY2Ni1tbXBwcHc3NzR0dG8vLzU1NTe3t7Nzc2rq6utra3g4ODPz8/IyMi6urrb29vJyck1q1GOAAAJkUlEQVR4XuzOuRGEQAwAsKvE3uX/r//uCIkIyGBGqkC/RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYMteIetlizGw+MGfoo3Zlnm6Uvf7b46V3TvbuRSlxJQwCcE8SroqIIKirXARjJwK+/9udqq2trdo96opymU76e4VUZf7b/PM4vNs0+BnFePHcRFRsO71uczdpd91BFKxcXrb5NenqPMdpWXbeDfyWH+tHnIqVL93APRhPcpyAzS5T7ktYjXBcVk7n3K9BP8fRWN5KuX/htoejsOai4IF0n3Bw1rwNPKBxBwdl29vAA7vo4GCsvAo8gtUWh2HDNo+jWCfYP2tueDxnT9gzK1uBR/WQY59s2eaxFa8J9sWyFU/hpof9sM6Ap1FMsQ/WDzyZVYnvsnzDUzqb4XvsqcHTChN8gyX9wJNbZfgqyy4Yg3YPX2OPN4xD2sFXWLPNWBRD7M7uU8YjTLErGxWMSh+7sefAyCwS7MDWjM8qwadZizHalPgk6zNO3QSfYhP+JPsvtWfG6xr/ZsvAiF3hX+y+YNSm+Jg1G4xbWOIjlp0xdsUM77Nkw/i1c7zLWlRwkeAdtqSGO7zNmilFDPEWS+ZUkW7xBruijnGC/7GnQCF9/M2yAZWEDv5i19RyluAPNuJbdAreVrapJvxRaLNL6pkn+M1mgYKm+M3GVJRm+MXOqWmBnwzlgD/JRjS2pqoLGABkKWU9wQC0qGsMA/KCwkYw3FHZHJYXlLaET0Jqc1BaNihuhpqbUt0D6i05o7qwdadXmnu/K+prJKixPFAfhy5wq9ugxs6ozQHNPath7fKoLBdK26yIJmqqw6pYe3hU3Y3/o/K2qKUtq2PqJoUktyu6rI40QQ2VBSuk45RCXd8lbnVdH4WCfBimrJQeaqdJcc4MX1gtC+96Ujd2NKOucI1bjSvdGatm6bEZdWsHpOouXV4T42nSBcV5+GJDcc4qblg5OeqlQXEudAdq8xqhktUz9ACiumfUyoziXJ7p+BOqW7J6Wv6EUrz5YsjqufM2biWenvEn1Df0WSjO4Yy+kZMKAU7t1bjA9gp5LnPLc7OpXgq3fNUNKM5bvOasnMwXm8Sl3r8mxhstXynOOy+WvhYTG5dnJqiZMrBiRl6Or+7R78SIa6B2+hTndwyHDkjj4nbTOepn4CK3ugdHM+omrJIVamjm2oy6JPVFe3XXPgrj4XsV1zgpZ4bOCr0+KGSop5a3OqvrOaWIhP+kIUdd9d1oUtfzMyPy5o5H1U2d16vLCl9pUndLfWeotXvfsZf3g+qKHPX24tE1dUmb2kITdTfx0Iy6MqW0e1ifyjYwlA0Km8GAV/WT0MoBVYUeDACm6gVuS+bUVDxCm7eTrqHNg92DBL8YtoX6/K+tve7JEc2pYxmbBfWxNWtRyxjanBwWW/zNeoX6OnybUMcDtHnZczvDWyxvU0PoQJsziyneY89UcIv32YLxm5d4nyUXjN3gER+x7IZxK3r4mD02GLOwxL/YfaEejNqoYLT6+AxbBvUXl20Y1O+h2XlghBb4PHsJjM4ddmHLQv0ctKdCfezX7huMR3jG7mx7w1j8x7697igKREEAPg22DSreVx0mNs0g7JGZxvd/u/25+2MTM9IXJqnvFSo5yUmq0pZeAb3lacjm9BpItjwF645eBoeUYxMqoRFgMByXbGkcSEqOyXY0GjQpxyI25AIMJ45jl5MbkCjBEdw6cgbmlkNbHskpOOw4pPsmIceg3wsOZjGQB1CsOYxlQ57ASrJ/d9WTN9Cfpe8Atx15Bf1Xyv6I+oO8g/6csR9pGSpA+Hxn97JzT+FA/nZnp+whobBgpg27slNxLigUasnjybqleKAamaJ8O1JsMOjFnV+y3lQ0DZC0XwvJ3yHWqpnRtMD8d2klP3c/1TqnqYIu16o2O/6f1Fy3+jjQzwBV1eq/mqp68rcDAAAAAAAAAAAAAAAAAAAAwFCtdF1bY8w/EyhjzKmuHzovaLqg+lS/TMbPpGZR6ok1aaBr1O3C37Oz29Wc4oMkf1wzflVq4xaCodpYwaNd9seewoMPfUvZFWEDrytg2Lyza9m+pTCgUBf2Q9ZH8g26x4V9kmVB/kDSLAR7Z84z8gKGUnIY4pqTc9De/rBzdzvJA1EUhvfMtEMN/QqKJfCVUCJJu6YK3v/dedIYEzT8SGC2Xc8tvNkH62TjljatlSuirl3g1tJRI1dCycThHszSyxVQMuoDMiIDXqT81cigbhRwd6WXC5FdO8TATBO5BM3GiIV76+RcVM8RkyyXs1AyRWwKL6ejPEV8zMlv18kXiFO2lROQnRhEq0zkGPIVYpbOjgSg94CeykOkfYH4PT7LTygPUOG/le9Qt4QW1V4OkV9AD3c4L6gNUGVq5SuyS2hTvcgnkmYOfdKV9EjqDBqZtg9ArwE69euCnqDXrhOyJTTbNNzzO+iWeRm2poJ2biVD5sfQL2xluP6l+AtMLkNVKy/IgVg7gA1ZMBZrGZ4H5QXZsHYf7dzbctpAEATQ2dXFAgExF5sQxyADgZbA5P//Lg+pStllG/shD+rZPv9Aie6ZHThztLSUBbwJc0vJdgp/wsLScajhUTuwVOQNfMrGloY4gVfF1pJwC7+azhJwhGd35t8gwLWzebctQE3RomvgXVaaa4/wr87NsTNSMIzm1i4gCTPzqsyQiJH5lNdIRbsxl/ZIR5WrlekftTRli6SczJv4gLRkF3PmBqmZRJXbfaLCO9ZITyj1CpTdfTQ3NgFJWpoXsUGa2ovmE+yezYcygJv67iHSNe3MgR1SNlMkZBdK7VqwGxq7bYvE7YzcCqmro3oZdmv2QMFNweIXyGnqdA8BstxoLSAAcGO0GggAtAf2H6HMjNQE3PQ1HOAvAc7smVCKzgiNQU4VzR3+EVTR6BwCXpC50fmGl2RibGKBV2RsZE54TZ7YY720OXuikCX7tUP5bkxihjdkY0TmeEtu2e+TSBGNRh7ATSulS7xH9kbjAdwUDS94nxzZX8LIkH17VELO/n9URkZhjY/II/vak7SdEehacFO63+Fj8sMIPIGcJk4VrpCD9V6Ja2TEHilkxb7ELZX13hRXSUkwpeCmacUI18mKPRVKTX8hQXLrtS7gE7KwXvuJz8iZfXdN9uy3K6VmXz+U0FmPxRafkgF7NyNr9om9zNiXgOWZvV6Tiv1IgoRo/VXjC2Rr/RXATaniAHJagRqAnIruE8jpltdvkNNL0Rm+Qhr2UZPU7BeDJLP/6Q/qOTFj+4uw2wAAAABJRU5ErkJggg=="},434:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){"use strict";a.r(t);a(241);var n=a(0),s=a.n(n),r=a(27),o=a.n(r),i=(a(345),a(346),a(113)),l=a(13),c=a(6),u=a(7),m=a(9),d=a(8),h=a(1),p=a(10),f=a(5),g="http://".concat("52.26.229.94",":").concat("5000","/api/"),v=function(e,t){if("401"!=e.status){var a=e.headers.get("Application-Error");a?t(new Error(a)):e.clone().json().then(function(e){var a=e.errors,n="";if(a&&"object"==typeof a){for(var s in a)a[s]&&(n+=a[s]+"\n");t(new Error(n))}else t(new Error(a||"Server Error"))}).catch(function(a){e.clone().text().then(function(e){throw new Error(e)}).catch(function(e){throw e}).catch(function(e){t(e)})})}else t(new Error(e.statusText))};String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t;return-1};var b=[{value:"books",display:"Books"},{value:"mooc",display:"MOOC"},{value:"articles",display:"Articles"},{value:"videos",display:"Videos"},{value:"others",display:"Others"}],E=[{value:"male",display:"Male"},{value:"female",display:"Female"}],k=["web development","machine learning","deep learning","game development","virtual reality","augmented reality","data structure"];var P=a(114),y=a.n(P),N=function(e){return{type:"LOGIN_FAILURE",message:e}},C=function(e,t,a){return function(n){return n({type:"LOGIN_REQUEST"}),fetch(g+"auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.ok?e.json().then(function(a){if(console.log(a),!a.token)throw new Error("Error "+e.status+": "+e.statusText);var s,r;localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),n((s=a.token,r=a.user,{type:"LOGIN_SUCCESS",token:s,user:r})),t&&t()}).catch(function(e){n(N(e.message)),a&&a(e)}):v(e,function(e){n(N(e.message)),a&&a(e)})},function(e){throw e}).catch(function(e){n(N(e.message)),a&&a(e)})}},w=function(e,t,a,n,s){return function(r,o){console.log("fetchUsers"),r(O());var i={};null!=e&&(i.pageNumber=e),null!=t&&(i.pageSize=t),null!=a&&(null!=a.minAge&&(i.minAge=a.minAge),null!=a.maxAge&&(i.maxAge=a.maxAge),null!=a.gender&&(i.gender=a.gender),null!=a.orderBy&&(i.orderBy=a.orderBy),null!=a.likers&&(i.likers=a.likers),null!=a.likees&&(i.likees=a.likees));var l=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&");return fetch(g+"users?"+l).then(function(e){e.ok?e.json().then(function(t){r(F(t));var a=e.headers.get("Pagination"),s=null;a&&(s=JSON.parse(a)),n&&n(t,s)}).catch(function(e){r(j(e.message)),s&&s(e)}):v(e,function(e){r(j(e.message)),s&&s(e)})},function(e){throw e}).catch(function(e){r(j(e.message)),s&&s(e)})}},O=function(){return{type:"USERS_LOADING"}},j=function(e){return{type:"USERS_FAILED",payload:e}},F=function(e){return{type:"ADD_USERS",payload:e}},U=function(e,t,a){return function(n,s){return fetch(g+"users/"+e).then(function(e){e.ok?e.json().then(function(e){n(A(e)),t&&t(e)}).catch(function(e){a&&a(e)}):v(e,function(e){a&&a(e)})},function(e){throw e}).catch(function(e){a&&a(a)})}},S=function(e,t,a){return function(n,s){return fetch(g+"posts/"+e).then(function(e){e.ok?e.json().then(function(e){t&&t(e)}).catch(function(e){a&&a(e)}):v(e,function(e){a&&a(e)})},function(e){throw e}).catch(function(e){a&&a(a)})}},A=function(e){return{type:"ADD_USER",user:e}},x=function(e){return function(t,a){t({type:"SET_USER_MAIN_PHOTO_URL",url:e}),localStorage.setItem("user",JSON.stringify(a().auth.user))}},I=function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/like/").concat(t),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}},B=function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/likePost/").concat(t),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}},D=function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/cancelLikedPost/").concat(t),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}},M=function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/dislikePost/").concat(t),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}},L=function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/cancelDislikedPost/").concat(t),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}},T=function(e,t,a){return function(n,s){return fetch(g+"users/auth/"+e).then(function(e){e.ok?e.json().then(function(e){n(R(e)),localStorage.setItem("user",JSON.stringify(s().auth.user)),t&&t(e)}).catch(function(e){a&&a(e)}):v(e,function(e){a&&a(e)})},function(e){throw e}).catch(function(e){a&&a(a)})}},R=function(e){return{type:"ADD_AUTH_USER",user:e}},_=function(e,t,a){return function(n){var s={};null!=e&&(null!=e.orderBy&&(s.orderBy=e.orderBy),null!=e.maxReturnNumber&&(s.maxReturnNumber=e.maxReturnNumber),null!=e.minCount&&(s.minCount=e.minCount));var r=Object.keys(s).map(function(e){return e+"="+s[e]}).join("&");return fetch(g+"tags?"+r).then(function(e){e.ok?e.json().then(function(e){t&&t(e)}).catch(function(e){a&&a(e)}):v(e,function(e){a&&a(e)})},function(e){throw e}).catch(function(e){a&&a(e)})}},q=function(e){return s.a.createElement("div",{className:"col-12"},s.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),s.a.createElement("p",null,e.text?e.text:"Loading . . ."))},V=a(32),J=a(166),z=a.n(J),G=a(65),W=a(80),X=a.n(W),K=new(function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"confirm",value:function(e,t){X.a.confirm(e,function(e){e&&t()})}},{key:"success",value:function(e){X.a.success(e)}},{key:"error",value:function(e){X.a.error(e)}},{key:"warning",value:function(e){X.a.warning(e)}},{key:"message",value:function(e){X.a.message(e)}}]),e}()),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={postParams:{category:"",search:""},trendingTags:k},a.onClickTagButton=a.onClickTagButton.bind(Object(h.a)(a)),a.handleInputChangePostParamsForm=a.handleInputChangePostParamsForm.bind(Object(h.a)(a)),a.handleSubmitPostParamsForm=a.handleSubmitPostParamsForm.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(this.props.fetchTags({orderBy:"count",maxReturnNumber:20,minCount:2},function(t){t=t.map(function(e){return e.value});for(var a=e.state.trendingTags,n=0;n<t.length;n++){var s=t[n];if(-1==a.indexOf(s)&&(a.push(s),a.length>=20))break}e.setState({trendingTags:a})},function(e){K.error(e.message)}),1)}},{key:"handleInputChangePostParamsForm",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState({postParams:Object(l.a)({},this.state.postParams,Object(V.a)({},n,a))})}},{key:"onClickTagButton",value:function(e){this.props.history.push({pathname:"/search",state:{search:e}})}},{key:"handleSubmitPostParamsForm",value:function(e){e.preventDefault(),this.props.history.push({pathname:"/search",state:{search:this.state.postParams.search,category:this.state.postParams.category}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:z.a.background},s.a.createElement("div",{className:z.a.center},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-8 offset-lg-2"},s.a.createElement("div",{className:"px-2"},s.a.createElement("h1",{className:""},"Best CS Study"),s.a.createElement("p",null,"Knowledge is infinite while time is limited. Here you can find the most efficient way to learn your desired skillset."),s.a.createElement("form",{noValidate:!0},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control input-sm",type:"text",placeholder:"Web Development",name:"search",value:this.state.postParams.search,onChange:this.handleInputChangePostParamsForm}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("select",{className:"form-control",style:{borderRadius:"0"},name:"category",value:this.state.postParams.category,onChange:this.handleInputChangePostParamsForm},s.a.createElement("option",{key:"all",value:""},"All"),b.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})),s.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSubmitPostParamsForm},"Search")))))),s.a.createElement("div",{className:"col-lg-10 offset-lg-1"},s.a.createElement("div",{className:"px-2"},s.a.createElement("hr",{className:"mt-5 mb-5"}),s.a.createElement("h3",null,"Popular Topics"),s.a.createElement("div",{className:"row"},this.state.trendingTags.map(function(t,a){return s.a.createElement("div",{key:a,className:"col-4 col-lg-3 px-1 py-1"},s.a.createElement("button",{className:"btn btn-outline-primary btn-block",onClick:function(a){e.onClickTagButton(t)}},t))}))))))))}}]),t}(n.Component),Y=Object(G.g)(Object(f.connect)(function(e){return{}},function(e){return{fetchTags:function(t,a,n){e(_(t,a,n))}}})(H)),Z=a(458),Q=a(95),$=a.n(Q),ee=a(19),te=a(37),ae=a.n(te),ne=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a.handleClickEditProfileLink=a.handleClickEditProfileLink.bind(Object(h.a)(a)),a.handleClickLogoutLink=a.handleClickLogoutLink.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.fetchAuthUser(this.props.auth.user.id,function(e){},function(e){K.error(e.message)})}},{key:"handleClickLogoutLink",value:function(e){this.props.logoutUser(function(){})}},{key:"handleClickEditProfileLink",value:function(e){this.props.history.push("/member/edit")}},{key:"render",value:function(){var e=this;return s.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-primary"},s.a.createElement("div",{className:"container"},s.a.createElement(ee.b,{to:"/home",className:"navbar-brand"},"Best CS Study"),s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(ee.c,{to:"/search",className:"nav-link",activeClassName:"active"},"Search")),this.props.auth.isAuthenticated?s.a.createElement("li",{className:"nav-item"},s.a.createElement(ee.c,{to:"/likedPosts",className:"nav-link",activeClassName:"active"},"Liked")):null,this.props.auth.isAuthenticated?s.a.createElement("li",{className:"nav-item"},s.a.createElement(ee.c,{to:"/userPosts/".concat(this.props.auth.user.id),className:"nav-link",activeClassName:"active"},"My Posts")):null),this.props.auth.isAuthenticated?s.a.createElement(ee.b,{to:"/createPost"},s.a.createElement("button",{className:"btn btn-success my-2 my-sm-0 mr-3"},"Create New Post")):null,this.props.auth.isAuthenticated?s.a.createElement(Z.a,null,s.a.createElement("span",{className:"mr-2"},s.a.createElement("img",{className:$.a.imgUser,src:this.props.auth.user.mainPhotoUrl||ae.a,alt:""})),s.a.createElement(Z.a.Toggle,{as:"a",className:$.a.dropdownToggle+" text-light"},"Welcome ",this.props.auth.decodedToken.unique_name),s.a.createElement(Z.a.Menu,{as:"div",className:"mt-3"},s.a.createElement(Z.a.Item,{as:"a",className:$.a.dropdownItem,onClick:this.handleClickEditProfileLink},s.a.createElement("i",{className:"fas fa-user mr-1"})," Edit Profile"),s.a.createElement(Z.a.Item,{as:"a",className:$.a.dropdownItem,onClick:this.handleClickLogoutLink},s.a.createElement("i",{className:"fas fa-sign-out-alt mr-1"})," Logout"))):null,this.props.auth.isAuthenticated?null:s.a.createElement("button",{className:"btn btn-info my-2 my-sm-0 mr-3",onClick:function(){return e.props.showModal("login")}},"Log In"),this.props.auth.isAuthenticated?null:s.a.createElement("button",{className:"btn btn-success my-2 my-sm-0",onClick:function(){return e.props.showModal("register")}},"Sign Up")))}}]),t}(n.Component),se=Object(G.g)(Object(f.connect)(function(e){return{auth:e.auth}},function(e){return{loginUser:function(t,a,n){e(C(t,a,n))},fetchAuthUser:function(t,a,n){e(T(t,a,n))},logoutUser:function(t,a){e(function(e,t){return function(t){t({type:"LOGOUT_REQUEST"}),localStorage.removeItem("token"),t({type:"LOGOUT_SUCCESS"}),e&&e()}}(t))}}})(ne)),re=a(230),oe=a.n(re),ie=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("footer",{className:"footer "+oe.a.footer},s.a.createElement("span",{className:"text-muted"},"Copyright \xa9 Atom Cai 2019"))}}]),t}(n.Component),le=a(96),ce=a.n(le),ue=function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleClickLikeButton",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"card mb-4 "+ce.a.card},s.a.createElement("div",{className:ce.a.cardImgWrapper},s.a.createElement("img",{className:"card-img-top",src:this.props.user.photoUrl||ae.a,alt:this.props.user.knownAs}),s.a.createElement("ul",{className:"list-inline text-center "+ce.a.memberIcons+" "+ce.a.animate},s.a.createElement("li",{className:"list-inline-item"},s.a.createElement(ee.b,{to:"/members/".concat(this.props.user.id)},s.a.createElement("button",{className:"btn btn-primary"},s.a.createElement("i",{className:"fa fa-user"})))),s.a.createElement("li",{className:"list-inline-item"},s.a.createElement("button",{className:"btn btn-primary",onClick:this.props.handleClickLikeButton},s.a.createElement("i",{className:"fa fa-heart"}))),s.a.createElement("li",{className:"list-inline-item"},s.a.createElement(ee.b,{to:"/members/".concat(this.props.user.id,"?tab=messages")},s.a.createElement("button",{className:"btn btn-primary"},s.a.createElement("i",{className:"fa fa-envelope"})))))),s.a.createElement("div",{className:"card-body p-1"},s.a.createElement("h6",{className:"card-title text-center mb-1"},s.a.createElement("i",{className:"fa fa-user"})," ",this.props.user.knownAs,", ",this.props.user.age),s.a.createElement("p",{className:"card-text text-muted text-center"},this.props.user.city)))}}]),t}(n.Component),me=a(459),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={users:[],userParams:{likers:!1,likees:!0},pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0}},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.handleToggleUsersParams=a.handleToggleUsersParams.bind(Object(h.a)(a)),a.handleClickLikeUserButton=a.handleClickLikeUserButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"loadUsers",value:function(e){var t=this;this.props.fetchUsers(e,this.state.pagination.itemsPerPage,this.state.userParams,function(e,a){t.setState({users:e,pagination:a})},function(e){K.error(e.message)})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadUsers(e.state.pagination.currentPage)},1)}},{key:"handleToggleUsersParams",value:function(e){var t=this;this.setState({userParams:Object(l.a)({},this.state.userParams,{likers:"likers"==e,likees:"likees"==e})}),setTimeout(function(){t.loadUsers(t.state.pagination.currentPage)},1)}},{key:"handleChangePage",value:function(e){this.loadUsers(e)}},{key:"handleClickLikeUserButton",value:function(e){this.props.sendLike(this.props.authUser.id,e.id,function(){},function(e){K.error(e.message)})}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"text-center my-4"},s.a.createElement("h2",null,this.state.userParams.likers?"Members who like me":"Members who I've Liked"," : ",this.state.pagination.totalItems)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{className:"btn btn-primary "+(this.state.userParams.likers?"active":""),name:"likers",onClick:function(t){e.handleToggleUsersParams("likers")}},"Members who like me"),s.a.createElement("button",{className:"btn btn-primary "+(this.state.userParams.likees?"active":""),name:"likees",onClick:function(t){e.handleToggleUsersParams("likees")}},"Members who I like"))),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},this.state.users.map(function(t){return s.a.createElement("div",{className:"col-sm-6 col-md-4 col-lg-4 col-xl-2",key:t.id},s.a.createElement(ue,{user:t,handleClickLikeButton:function(a){e.handleClickLikeUserButton(t)}}))}))),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}))))}}]),t}(n.Component),he=Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchUsers:function(t,a,n,s,r){e(w(t,a,n,s,r))},sendLike:function(t,a,n,s){e(I(t,a,n,s))}}})(de),pe=[{value:"male",display:"Male"},{value:"female",display:"Female"}],fe=[{value:"created",display:"Created Time"},{value:"lastActive",display:"Last Active Time"}],ge=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(m.a)(this,Object(d.a)(t).call(this,e)),console.log(a.props.users),a.state={userParams:{gender:"female"==a.props.authUser.gender?"male":"female",minAge:0,maxAge:200,orderBy:"lastActive"},pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0}},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.resetFilter=a.resetFilter.bind(Object(h.a)(a)),a.handleInputChangeUsersParamsForm=a.handleInputChangeUsersParamsForm.bind(Object(h.a)(a)),a.handleSubmitUsersParamsForm=a.handleSubmitUsersParamsForm.bind(Object(h.a)(a)),a.handleClickLikeUserButton=a.handleClickLikeUserButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("MemberList.componentDidMount"),setTimeout(function(){e.loadUsers(e.state.pagination.currentPage)},1)}},{key:"resetFilter",value:function(){var e=this;this.setState({userParams:{gender:"female"==this.props.authUser.gender?"male":"female",minAge:18,maxAge:99,orderBy:"lastActive"}}),setTimeout(function(){e.loadUsers(e.state.pagination.currentPage)},1)}},{key:"handleInputChangeUsersParamsForm",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState({userParams:Object(l.a)({},this.state.userParams,Object(V.a)({},n,a))})}},{key:"handleSubmitUsersParamsForm",value:function(e){e.preventDefault(),this.loadUsers(this.state.pagination.currentPage)}},{key:"loadUsers",value:function(e){var t=this;this.props.fetchUsers(e,this.state.pagination.itemsPerPage,this.state.userParams,function(e,a){t.setState({pagination:a})},function(e){K.error(e.message)})}},{key:"handleChangePage",value:function(e){this.loadUsers(e)}},{key:"handleClickLikeUserButton",value:function(e){this.props.sendLike(this.props.authUser.id,e.id,function(){},function(e){K.error(e.message)})}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"text-center my-4"},s.a.createElement("h2",null,"Your matches - ",this.state.pagination.totalItems," found")),s.a.createElement("form",{className:"form-inline my-1",noValidate:!0,onSubmit:this.handleSubmitUsersParamsForm},s.a.createElement("div",{className:"form-group px-2"},s.a.createElement("label",{className:"mr-1"},"Age From"),s.a.createElement("input",{type:"number",className:"form-control ml-1",style:{width:"70px"},id:"minAge",name:"minAge",value:this.state.userParams.minAge,onChange:this.handleInputChangeUsersParamsForm})),s.a.createElement("div",{className:"form-group px-2"},s.a.createElement("label",{className:"mr-1"},"Age To"),s.a.createElement("input",{type:"number",className:"form-control ml-1",style:{width:"70px"},id:"maxAge",name:"maxAge",value:this.state.userParams.maxAge,onChange:this.handleInputChangeUsersParamsForm})),s.a.createElement("div",{className:"form-group px-2"},s.a.createElement("label",{className:"mr-1"},"Show"),s.a.createElement("select",{className:"form-control ml-1",style:{width:"108px"},id:"gender",name:"gender",value:this.state.userParams.gender,onChange:this.handleInputChangeUsersParamsForm},pe.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)}))),s.a.createElement("div",{className:"form-group px-2"},s.a.createElement("label",{className:"mr-1"},"Order By"),s.a.createElement("select",{className:"form-control ml-1",style:{width:"166px"},id:"orderBy",name:"orderBy",value:this.state.userParams.orderBy,onChange:this.handleInputChangeUsersParamsForm},fe.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)}))),s.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{marginLeft:"10px"}},"Apply Filters"),s.a.createElement("button",{type:"button",className:"btn btn-info",style:{marginLeft:"10px"},onClick:function(t){e.resetFilter()}},"Reset Filter")),s.a.createElement("br",null),s.a.createElement("div",{className:"row"},this.props.users.users.map(function(t){return s.a.createElement("div",{key:t.id,className:"col-lg-2 col-md-3 col-sm-6"},s.a.createElement(ue,{user:t,handleClickLikeButton:function(a){e.handleClickLikeUserButton(t)}}))}))),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}))))}}]),t}(n.Component),ve=(Object(f.connect)(function(e){return{authUser:e.auth.user,users:e.users}},function(e){return{fetchUsers:function(t,a,n,s,r){e(w(t,a,n,s,r))},sendLike:function(t,a,n,s){e(I(t,a,n,s))}}})(ge),a(169)),be=a.n(ve),Ee=a(457),ke=a(455),Pe=a(117),ye=a.n(Pe),Ne=a(47),Ce=a.n(Ne),we=a(81),Oe=a.n(we),je=function(e){return e&&e.length},Fe=function(e){return function(t){return!t||t.length<=e}},Ue=function(e){return function(t){return t&&t.length>=e}},Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={messages:[],newMessage:{content:""}},a.handleInputChangeNewMessage=a.handleInputChangeNewMessage.bind(Object(h.a)(a)),a.handleSendNewMessage=a.handleSendNewMessage.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadMessages()},1)}},{key:"loadMessages",value:function(){var e=this;this.props.fetchMessageThread(this.props.authUser.id,this.props.recipientId,function(t){e.setState({messages:t});for(var a=0;a<t.length;a++)0==t[a].isRead&&t[a].recipientId==e.props.authUser.id&&e.props.markMessageAsRead(e.props.authUser.id,t[a].id,function(){},function(e){K.error(e.message)})},function(e){K.error(e.message)})}},{key:"handleInputChangeNewMessage",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState({newMessage:Object(l.a)({},this.state.newMessage,Object(V.a)({},n,a))})}},{key:"handleSendNewMessage",value:function(e){var t=this;e.preventDefault(),this.setState({newMessage:Object(l.a)({},this.state.newMessage,{recipientId:this.props.recipientId})}),setTimeout(function(){t.props.sendMessage(t.props.authUser.id,t.state.newMessage,function(e){var a=t.state.messages;a.push(e),t.setState({messages:a,newMessage:{content:""}})},function(e){K.error(e.message)})},1)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"card "+Oe.a.card},s.a.createElement("div",{className:"card-body "+Oe.a.cardBody},0==this.state.messages.length?s.a.createElement("div",null,s.a.createElement("p",null,"No messages yet... say hi using the message box below")):s.a.createElement("ul",{className:"chat "+Oe.a.chat},this.state.messages.map(function(t){return s.a.createElement("li",{key:t.id},t.senderId==e.props.recipientId?s.a.createElement("div",null,s.a.createElement("span",{className:"chat-img float-left"},s.a.createElement("img",{src:t.senderPhotoUrl,alt:t.senderKnownAs,className:"rounded-circle mr-2 "+Oe.a.roundedCircle})),s.a.createElement("div",{className:"chat-body"},s.a.createElement("div",{className:"header"},s.a.createElement("strong",{className:"primary-font"},t.senderKnownAs),s.a.createElement("small",{className:"text-muted float-right"},s.a.createElement("span",{className:"fa fa-clock-o"}," ",s.a.createElement(Ce.a,{date:t.messageSent,live:!1})," "))),s.a.createElement("p",null,t.content))):s.a.createElement("div",null,s.a.createElement("span",{className:"chat-img float-right"},s.a.createElement("img",{src:t.senderPhotoUrl,alt:t.senderKnownAs,className:"rounded-circle ml-2 "+Oe.a.roundedCircle})),s.a.createElement("div",{className:"chat-body"},s.a.createElement("div",{className:"header"},s.a.createElement("small",{className:"text-muted"},s.a.createElement("span",{className:"fa fa-clock-o"}," ",s.a.createElement(Ce.a,{date:t.messageSent,live:!1})," "),t.isRead?s.a.createElement("span",{className:"text-success"}," (read)"):s.a.createElement("span",{className:"text-danger"}," (unread)")),s.a.createElement("strong",{className:"primary-font float-right"},t.senderKnownAs)),s.a.createElement("p",null,t.content))))}))),s.a.createElement("div",{className:"card-footer"},s.a.createElement("form",{onSubmit:this.handleSendNewMessage},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control input-sm",type:"text",placeholder:"send a private message",name:"content",value:this.state.newMessage.content,onChange:this.handleInputChangeNewMessage,onBlur:function(e){}}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!je(this.state.newMessage.content)},"Send"))))))}}]),t}(n.Component),Ae=(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchMessageThread:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/messages/thread/").concat(t)).then(function(e){e.ok?e.json().then(function(e){a&&a(e)}).catch(function(e){n&&n(e)}):v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))},sendMessage:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){e.ok?e.json().then(function(e){a&&a(e)}).catch(function(e){n&&n(e)}):v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))},markMessageAsRead:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/messages/").concat(t,"/read"),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))}}})(Se),a(163)),xe=a.n(Ae),Ie=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(m.a)(this,Object(d.a)(t).call(this,e));var n=xe.a.parse(a.props.location.search).tab;return a.state={user:null,tab:n||"profile"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(this.props.fetchUser(this.props.match.params.id,function(t){e.setState({user:t})},function(e){K.error(e.message)}),1)}},{key:"render",value:function(){var e=this;this.state.user&&console.log(new Date(this.state.user.dateOfBirth).valueOf());var t=this.state.user?this.state.user.photos.map(function(e){return{original:e.url,thumbnail:e.url}}):null;return s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("h1",{className:"text-left"},this.state.user?this.state.user.username:"","'s Profile"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"p-3"},s.a.createElement("img",{className:"card-img-top img-thumbnail",src:this.state.user&&this.state.user.photoUrl||ae.a,alt:this.state.user?this.state.user.knownAs:""})),s.a.createElement("div",{className:"card-body "+be.a.cardBody},s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Last Active At:"),s.a.createElement("p",null,this.state.user?s.a.createElement(Ce.a,{date:this.state.user.lastActive,live:!1}):null)),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Register At:"),s.a.createElement("p",null,this.state.user?new Date(this.state.user.created).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):""))))),s.a.createElement("div",{className:"col-sm-8"},s.a.createElement("div",{className:"tab-panel"},s.a.createElement(Ee.a,{className:"member-tabs",activeKey:this.state.tab,onSelect:function(t){return e.setState({tab:t})}},s.a.createElement(ke.a,{className:"text-left ",eventKey:"profile",title:"About "+(this.state.user?this.state.user.username:"")},s.a.createElement("div",{className:"mt-3 mx-2"},s.a.createElement("div",{className:"row text-left"},s.a.createElement("label",{className:"col-sm-2 font-weight-bold"},"Introduction"),s.a.createElement("div",{className:"col-sm"},s.a.createElement("p",null,this.state.user?this.state.user.introduction||"This lazy user didn't write anything...":""))),s.a.createElement("div",{className:"row text-left "},s.a.createElement("label",{className:"col-sm-2 font-weight-bold"},"Gender"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("p",null,this.state.user?this.state.user.gender||"Unknown":""))),s.a.createElement("div",{className:"row text-left "},s.a.createElement("label",{className:"col-sm-2 font-weight-bold"},"Date of Birth"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("p",null,this.state.user?-62135571604e3==new Date(this.state.user.dateOfBirth).valueOf()?"Unknown":new Date(this.state.user.created).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""))),s.a.createElement("div",{className:"row text-left "},s.a.createElement("label",{className:"col-sm-2 font-weight-bold"},"Country"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("p",null,this.state.user?this.state.user.country||"Unknown":""))),s.a.createElement("div",{className:"row text-left "},s.a.createElement("label",{className:"col-sm-2 font-weight-bold"},"City"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("p",null,this.state.user?this.state.user.city||"Unknown":""))))),s.a.createElement(ke.a,{className:"text-left",eventKey:"photos",title:"Photos"},t?s.a.createElement("div",{className:be.a.imageGallery},s.a.createElement(ye.a,{items:t,showPlayButton:!1,showFullscreenButton:!1,useBrowserFullscreen:!1})):s.a.createElement("h4",null,"Photos will go here")))))))}}]),t}(n.Component),Be=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchUser:function(t,a,n){e(U(t,a,n))}}})(Ie)),De=a(170),Me=a.n(De),Le=(a(145),a(239)),Te=a(233),Re=a.n(Te),_e=a(63),qe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Ve={borderColor:"#2196f3"},Je={borderColor:"#00e676"},ze={borderColor:"#ff1744"};var Ge=function(e){var t=Object(n.useCallback)(function(t){e.handleDroppedFiles(t)}),a=Object(_e.b)({onDrop:t,accept:"image/*"}),r=(a.acceptedFiles,a.getRootProps),o=a.getInputProps,i=a.isDragActive,c=a.isDragAccept,u=a.isDragReject,m=Object(n.useMemo)(function(){return Object(l.a)({},qe,i?Ve:{},c?Je:{},u?ze:{})},[i,u]),d=e.files.map(function(t,a){return s.a.createElement("div",{key:t.path,className:"row"},s.a.createElement("div",{className:"col-md-6 align-self-center"},t.path," (",t.size," bytes)"),s.a.createElement("div",{className:"col-md-6 text-md-right my-1"},s.a.createElement("button",{className:"btn btn-sm btn-success mx-1",onClick:function(t){e.handleUploadFile(a)},disabled:e.isUploadingPhoto},"Upload"),s.a.createElement("button",{className:"btn btn-sm btn-danger mx-1",onClick:function(t){e.handleRemoveFile(a)},disabled:e.isUploadingPhoto},"Remove")))});return s.a.createElement("div",{className:"row mt-1"},s.a.createElement("div",{className:"col-lg-4 mt-3"},s.a.createElement("h4",null,"Add Photos"),s.a.createElement("div",r({style:m}),s.a.createElement("input",o()),s.a.createElement("i",{className:"fa fa-upload fa-3x mt-1"}),s.a.createElement("p",{className:"my-1"},"Drop files or click to select files"))),e.files.length>0?s.a.createElement("div",{className:"col-lg-8 mt-3"},s.a.createElement("h4",null,"Files to Upload"),e.isUploadingPhoto?s.a.createElement(q,{text:"Uploading. . ."}):null,s.a.createElement("div",null,d)):null)},We=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleDroppedFiles=function(e){console.log("PhotoEditor.handleDroppedFiles",e),a.setState({files:e})},a.handleUploadFile=function(e){a.setState({isUploadingPhoto:!0});var t=a.state.files[e];console.log("PhotoEditor.handleUploadFile",t),a.props.uploadUserPhoto(a.props.auth.decodedToken.nameid,t,function(t){console.log(t);var n={id:t.id,url:t.url,description:t.description,dateAdded:t.dateAdded,isMain:t.isMain};a.props.handleUploadedPhoto(n),n.isMain&&(a.props.handleSetMainPhoto(n.id),a.props.fetchAuthUser(a.props.auth.decodedToken.nameid,function(){},function(e){K.error(e.message)})),a.handleRemoveFile(e),a.setState({isUploadingPhoto:!1})},function(e){K.error(e.message),a.setState({isUploadingPhoto:!1})})},a.handleRemoveFile=function(e){var t=Object(Le.a)(a.state.files);t.splice(e,1),a.setState({files:t})},a.setMainPhoto=function(e){a.props.setUserMainPhoto(a.props.auth.decodedToken.nameid,e,function(){a.props.handleSetMainPhoto(e),a.props.fetchAuthUser(a.props.auth.decodedToken.nameid,function(){},function(e){K.error(e.message)})},function(e){K.error(e.message)})},a.handleDeletePhoto=function(e){K.confirm("Are you sure you want to delete this photo?",function(){a.props.deleteUserPhoto(a.props.auth.decodedToken.nameid,e,function(){a.props.handleDeletedPhoto(e),a.props.fetchAuthUser(a.props.auth.decodedToken.nameid,function(){},function(e){K.error(e.message)})},function(e){K.error(e.message)})})},a.state={files:[],isUploadingPhoto:!1},a.handleDroppedFiles=a.handleDroppedFiles.bind(Object(h.a)(a)),a.handleUploadFile=a.handleUploadFile.bind(Object(h.a)(a)),a.handleRemoveFile=a.handleRemoveFile.bind(Object(h.a)(a)),a.setMainPhoto=a.setMainPhoto.bind(Object(h.a)(a)),a.handleDeletePhoto=a.handleDeletePhoto.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},this.props.photos&&this.props.photos.length>0?s.a.createElement("div",{className:"row mt-3"},this.props.photos.map(function(t){return s.a.createElement("div",{key:t.id,className:"col-sm-6 col-md-4 col-lg-3 my-1 text-center"},s.a.createElement("img",{src:t.url,className:"img-thumbnail p-1 "+Re.a.imgThumbnail,alt:""}),s.a.createElement("div",{className:"text-center mt-1"},s.a.createElement("button",{type:"button",className:"mr-1 btn btn-sm "+(t.isMain?"btn-success active":"btn-secondary"),onClick:function(a){e.setMainPhoto(t.id)},disabled:t.isMain},"Main"),s.a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:function(a){e.handleDeletePhoto(t.id)}},s.a.createElement("i",{className:"fas fa-trash-alt"}))))})):null,s.a.createElement(Ge,{files:this.state.files,handleDroppedFiles:this.handleDroppedFiles,handleUploadFile:this.handleUploadFile,handleRemoveFile:this.handleRemoveFile,isUploadingPhoto:this.state.isUploadingPhoto}))}}]),t}(n.Component),Xe=Object(f.connect)(function(e){return{auth:e.auth}},function(e){return{uploadUserPhoto:function(t,a,n,s){e(function(e,t,a,n){return function(s){var r=new FormData;return r.append("File",t),fetch(g+"users/".concat(e,"/photos"),{method:"POST",body:r}).then(function(e){e.ok?e.json().then(function(e){a&&a(e)}).catch(function(e){n&&n(e)}):v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))},setUserMainPhoto:function(t,a,n,s){e(function(e,t,a,n){return function(s,r){return fetch(g+"users/".concat(e,"/photos/").concat(t,"/setMain"),{method:"POST"}).then(function(e){e.ok?e.json().then(function(e){s(x(e.url)),a&&a()}).catch(function(e){n&&n(e)}):v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))},setUserMainPhotoUrl:function(t){e(x(t))},fetchAuthUser:function(t,a,n){e(T(t,a,n))},deleteUserPhoto:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/".concat(e,"/photos/").concat(t),{method:"DELETE"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))}}})(We),Ke=(a(454),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleBlurProfileForm=function(e){var t=e.target.name;console.log("MemberEditComponent.handleBlurProfileForm",t);var n=a.state.profileForm;n.fields[t].touched=!0,n.touched=!0,n=a.validateProfileForm(n),a.setState({form:n})},a.state={user:null,profileForm:{fields:{introduction:{value:""},gender:{value:""},dateOfBirth:{value:""},country:{value:""},city:{value:""}},valid:!1,touched:!1,dirty:!1}},a.handleInputChangeProfileForm=a.handleInputChangeProfileForm.bind(Object(h.a)(a)),a.handleBlurProfileForm=a.handleBlurProfileForm.bind(Object(h.a)(a)),a.handleSubmitProfileForm=a.handleSubmitProfileForm.bind(Object(h.a)(a)),a.handleBeforeunload=a.handleBeforeunload.bind(Object(h.a)(a)),a.handleUploadedPhoto=a.handleUploadedPhoto.bind(Object(h.a)(a)),a.handleSetMainPhoto=a.handleSetMainPhoto.bind(Object(h.a)(a)),a.handleDeletedPhoto=a.handleDeletedPhoto.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(this.props.fetchUser(this.props.auth.decodedToken.nameid,function(t){var a=e.state.profileForm;a.fields.introduction.value=t.introduction||"",a.fields.gender.value=t.gender||"",a.fields.dateOfBirth.value=t.dateOfBirth||"",a.fields.country.value=t.country||"",a.fields.city.value=t.city||"",e.setState({user:t})},function(e){K.error(e.message)}),1),window.addEventListener("beforeunload",this.handleBeforeunload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleBeforeunload)}},{key:"handleBeforeunload",value:function(e){if(this.state.profileForm.dirty)return e.preventDefault(),(e||window.event).returnValue="Are you sure you want to continue? Any unsaved changes will be lost!"}},{key:"handleUploadedPhoto",value:function(e){var t=this;this.props.fetchUser(this.props.auth.decodedToken.nameid,function(e){t.setState({user:e})},function(e){K.error(e.message)})}},{key:"handleSetMainPhoto",value:function(e){var t=this;this.props.fetchUser(this.props.auth.decodedToken.nameid,function(e){t.setState({user:e})},function(e){K.error(e.message)})}},{key:"handleDeletedPhoto",value:function(e){var t=this;this.props.fetchUser(this.props.auth.decodedToken.nameid,function(e){t.setState({user:e})},function(e){K.error(e.message)})}},{key:"handleInputChangeProfileForm",value:function(e){var t=e.target,a=t.value,n=t.name,s=this.state.profileForm;s.fields[n].value=a,s.dirty=!0,s=this.validateProfileForm(s),this.setState({form:s})}},{key:"validateProfileForm",value:function(e){for(var t in e.fields)Array.isArray(e.fields[t])?e.fields[t].forEach(function(e){e.error=null}):e.fields[t].error=null;var a;return e.valid=!0,console.log(e),je(e.fields.dateOfBirth.value)&&(a=e.fields.dateOfBirth.value,!/\d{4}-\d{2}-\d{2}/.test(a))&&(e.valid=!1,e.fields.dateOfBirth.error="Date of birth should be in yyyy-mm-dd format."),e}},{key:"handleSubmitProfileForm",value:function(e){var t=this;e.preventDefault(),this.props.updateUser(this.props.auth.decodedToken.nameid,{introduction:this.state.profileForm.fields.introduction.value,gender:this.state.profileForm.fields.gender.value,dateOfBirth:this.state.profileForm.fields.dateOfBirth.value,country:this.state.profileForm.fields.country.value,city:this.state.profileForm.fields.city.value},function(){var e=t.state.profileForm;e.touched=!1,e.dirty=!1,t.setState({profileForm:e})},function(e){K.error(e.message)})}},{key:"showFormFieldError",value:function(e){return this.state.profileForm.fields[e].error&&this.state.profileForm.fields[e].touched}},{key:"render",value:function(){return s.a.createElement("div",{className:"container mt-4"},s.a.createElement(G.a,{when:this.state.profileForm.dirty,message:"Are you sure you want to continue? Any unsaved changes will be lost!"}),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("h1",{className:"text-left"},"Edit Profile")),s.a.createElement("div",{className:"col-md-8"},this.state.profileForm.dirty?s.a.createElement("div",{className:"alert alert-info text-left"},s.a.createElement("strong",null,"Information:")," You have made changes. Any unsaved changes will be lost!"):null)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"p-3"},s.a.createElement("img",{className:"card-img-top img-thumbnail",src:this.state.user&&this.state.user.photoUrl||ae.a,alt:this.state.user?this.state.user.knownAs:""})),s.a.createElement("div",{className:"card-body "+Me.a.cardBody},s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Last Active At:"),s.a.createElement("p",null,this.state.user?s.a.createElement(Ce.a,{date:this.state.user.lastActive,live:!1}):null)),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Register At:"),s.a.createElement("p",null,this.state.user?new Date(this.state.user.created).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):""))),s.a.createElement("div",{className:"card-footer "+Me.a.cardFooter},s.a.createElement("button",{disabled:!this.state.profileForm.dirty,form:"profile-form",className:"btn btn-success btn-block"},"Save Changes")))),s.a.createElement("div",{className:"col-md-8"},s.a.createElement("div",{className:"tab-panel"},s.a.createElement(Ee.a,{className:"member-tabs",defaultActiveKey:"edit-profile"},s.a.createElement(ke.a,{className:"text-left",eventKey:"edit-profile",title:"Edit Profile"},s.a.createElement("form",{noValidate:!0,id:"profile-form",className:"mt-3 mx-2",onSubmit:this.handleSubmitProfileForm},s.a.createElement("div",{className:"form-group row text-left"},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold "},"Introduction"),s.a.createElement("div",{className:"col-sm"},s.a.createElement("textarea",{name:"introduction",type:"text",className:"form-control "+(this.showFormFieldError("introduction")?"is-invalid":""),placeholder:"Write something about yourself...",value:this.state.profileForm.fields.introduction.value,onChange:this.handleInputChangeProfileForm,onBlur:this.handleBlurProfileForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("introduction")?this.state.form.fields.introduction.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Gender"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("select",{name:"gender",className:"form-control "+(this.showFormFieldError("gender")?"is-invalid":""),value:this.state.profileForm.fields.gender.value,onChange:this.handleInputChangeProfileForm,onBlur:this.handleBlurProfileForm},s.a.createElement("option",{value:""}),E.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("gender")?this.state.form.fields.gender.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Date of Birth"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("input",{name:"dateOfBirth",type:"date",className:"form-control "+(this.showFormFieldError("dateOfBirth")?"is-invalid":""),value:this.state.profileForm.fields.dateOfBirth.value,onChange:this.handleInputChangeProfileForm,onBlur:this.handleBlurProfileForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("dateOfBirth")?this.state.form.fields.dateOfBirth.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Country"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("input",{name:"country",type:"text",className:"form-control "+(this.showFormFieldError("country")?"is-invalid":""),value:this.state.profileForm.fields.country.value,onChange:this.handleInputChangeProfileForm,onBlur:this.handleBlurProfileForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("country")?this.state.form.fields.country.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"City"),s.a.createElement("div",{className:"col-sm col-lg-5 col-md-6"},s.a.createElement("input",{name:"city",type:"text",className:"form-control "+(this.showFormFieldError("city")?"is-invalid":""),value:this.state.profileForm.fields.city.value,onChange:this.handleInputChangeProfileForm,onBlur:this.handleBlurProfileForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("city")?this.state.form.fields.city.error:""))))),s.a.createElement(ke.a,{className:"text-left",eventKey:"edit-photos",title:"Edit Photos"},s.a.createElement(Xe,{photos:this.state.user?this.state.user.photos:null,handleUploadedPhoto:this.handleUploadedPhoto,handleSetMainPhoto:this.handleSetMainPhoto,handleDeletedPhoto:this.handleDeletedPhoto})))))))}}]),t}(n.Component)),He=Object(f.connect)(function(e){return{auth:e.auth}},function(e){return{fetchUser:function(t,a,n){e(U(t,a,n))},updateUser:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))}}})(Ke),Ye=a(61),Ze=a.n(Ye),Qe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={messages:[],pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0},messageContainer:"Unread"},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.handleChangeMessageContainer=a.handleChangeMessageContainer.bind(Object(h.a)(a)),a.deleteMessage=a.deleteMessage.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadMessages(e.state.pagination.currentPage)},1)}},{key:"loadMessages",value:function(e){var t=this;this.props.fetchMessages(this.props.authUser.id,e,this.state.pagination.itemsPerPage,this.state.messageContainer,function(e,a){t.setState({messages:e,pagination:a})},function(e){K.error(e.message)})}},{key:"handleChangePage",value:function(e){this.loadMessages(e)}},{key:"handleChangeMessageContainer",value:function(e){var t=this;this.setState({messageContainer:e}),setTimeout(function(){t.loadMessages(t.state.pagination.currentPage)},1)}},{key:"deleteMessage",value:function(e){var t=this;K.confirm("Are you sure you want to delete this message",function(){t.props.deleteMessage(e,t.props.authUser.id,function(){t.loadMessages(t.state.pagination.currentPage)},function(e){K.error(e.message)})})}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-5"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"btn-group"},s.a.createElement("button",{className:"btn btn-primary "+("Unread"==this.state.messageContainer?"active":""),onClick:function(t){e.handleChangeMessageContainer("Unread")}},s.a.createElement("i",{className:"fa fa-envelope"})," Unread"),s.a.createElement("button",{className:"btn btn-primary "+("Inbox"==this.state.messageContainer?"active":""),onClick:function(t){e.handleChangeMessageContainer("Inbox")}},s.a.createElement("i",{className:"fa fa-envelope-open"})," Inbox"),s.a.createElement("button",{className:"btn btn-primary "+("Outbox"==this.state.messageContainer?"active":""),onClick:function(t){e.handleChangeMessageContainer("Outbox")}},s.a.createElement("i",{className:"fa fa-paper-plane"})," Outbox"))),this.state.messages.length<=0?s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"my-2"},"No messages")):s.a.createElement("div",{className:"row"},s.a.createElement("table",{className:"table table-hover "+Ze.a.table,style:{cursor:"pointer"}},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-left",style:{width:"30%"}},"Message"),s.a.createElement("th",{className:"text-left",style:{width:"25%"}},"Outbox"==this.state.messageContainer?"To":"From"),s.a.createElement("th",{className:"text-left",style:{width:"25%"}},"Outbox"==this.state.messageContainer?"Sent":"Received"),s.a.createElement("th",{className:"text-left",style:{width:"20%"}})),this.state.messages.map(function(t){return s.a.createElement("tr",{key:t.id,onClick:function(a){e.props.history.push("/members/"+("Outbox"==e.state.messageContainer?t.recipientId:t.senderId)+"?tab=messages")}},s.a.createElement("td",{className:"text-left "+Ze.a.td},t.content),s.a.createElement("td",{className:"text-left "+Ze.a.td},"Outbox"==e.state.messageContainer?s.a.createElement("div",null,s.a.createElement("img",{src:t.recipientPhotoUrl,className:"img-circle rounded-circle mr-2 "+Ze.a.imgCircle}),s.a.createElement("strong",null,t.recipientKnownAs)):s.a.createElement("div",null,s.a.createElement("img",{src:t.senderPhotoUrl,className:"img-circle rounded-circle mr-2 "+Ze.a.imgCircle}),s.a.createElement("strong",null,t.senderKnownAs))),s.a.createElement("td",{className:"text-left "+Ze.a.td},s.a.createElement(Ce.a,{date:t.messageSent,live:!1})),s.a.createElement("td",{className:"text-left "+Ze.a.td},s.a.createElement("button",{className:"btn btn-danger",onClick:function(a){a.stopPropagation(),e.deleteMessage(t.id)}},"Delete")))})))),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages})))))}}]),t}(n.Component),$e=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchMessages:function(t,a,n,s,r,o){e(function(e,t,a,n,s,r){return function(o){var i={};null!=t&&(i.pageNumber=t),null!=a&&(i.pageSize=a),null!=n&&(i.messageContainer=n);var l=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&");return fetch(g+"users/".concat(e,"/messages?").concat(l)).then(function(e){e.ok?e.json().then(function(t){var a=e.headers.get("Pagination"),n=null;a&&(n=JSON.parse(a)),s&&s(t,n)}).catch(function(e){r&&r(e)}):v(e,function(e){r&&r(e)})},function(e){throw e}).catch(function(e){r&&r(e)})}}(t,a,n,s,r,o))},deleteMessage:function(t,a,n,s){e(function(e,t,a,n){return function(s){return fetch(g+"users/".concat(t,"/messages/").concat(e,"/delete"),{method:"POST"}).then(function(e){e.ok?a&&a():v(e,function(e){n&&n(e)})},function(e){throw e}).catch(function(e){n&&n(e)})}}(t,a,n,s))}}})(Qe)),et=a(111),tt=a.n(et),at=(a(155),a(112)),nt=a.n(at),st=(a(157),a(78)),rt=a.n(st),ot=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onInputAcceptedImage=function(e){e.forEach(function(e){var t=a.state.form,n=t.fields.images.value.length;t.fields.images.value.push(e),a.setState({form:t});var s=new FileReader;s.onload=function(e){var t=a.state.form;t.fields.images.value[n].src=e.target.result,t.fields.images.touched=!0,t=a.validateForm(t),a.setState({form:t})},s.readAsDataURL(e)})},a.onInputRejectedImage=function(e){console.log("CreatePostComponent.onDropRejected",e),e.forEach(function(e){K.error('"'.concat(e.name,'" is not a valid image file!'))});var t=a.state.form;t.fields.images.touched=!0,t.touched=!0,t=a.validateForm(t),a.setState({form:t})},a.handleRemoveImage=function(e){console.log("CreatePostComponent.handleRemoveFile",e);var t=a.state.form;t.fields.images.value.splice(e,1),t.mainImage>e?t.mainImage--:t.mainImage==e&&(t.mainImage=0),t=a.validateForm(t),a.setState({form:t})},a.setMainImage=function(e){a.setState({form:Object(l.a)({},a.state.form,{mainImage:e})})},a.handleBlurForm=function(e){console.log("CreatePostComponent.handleBlurForm");var t=e.target.name,n=a.state.form;n.fields[t].touched=!0,n.touched=!0,n=a.validateForm(n),a.setState({form:n})},a.state={form:{fields:{title:{value:""},description:{value:""},category:{value:""},links:[{value:""}],tags:{value:[]},images:{value:[]}},mainImage:0,isUploadingImage:!1,valid:!1,touched:!1},suggestedTags:k.map(function(e){return{name:e}})},a.handleInputChangeTags=a.handleInputChangeTags.bind(Object(h.a)(a)),a.handleFormArrayFieldChange=a.handleFormArrayFieldChange.bind(Object(h.a)(a)),a.handleFormArrayFieldBlur=a.handleFormArrayFieldBlur.bind(Object(h.a)(a)),a.onClickAddLinkButton=a.onClickAddLinkButton.bind(Object(h.a)(a)),a.onClickRemoveLinkButton=a.onClickRemoveLinkButton.bind(Object(h.a)(a)),a.onInputAcceptedImage=a.onInputAcceptedImage.bind(Object(h.a)(a)),a.onInputRejectedImage=a.onInputRejectedImage.bind(Object(h.a)(a)),a.onImageFileDialogCancel=a.onImageFileDialogCancel.bind(Object(h.a)(a)),a.handleRemoveImage=a.handleRemoveImage.bind(Object(h.a)(a)),a.tagsInputProps={className:"react-tagsinput-input form-control",placeholder:"Type a tag and press Enter"},a.handleInputChangeForm=a.handleInputChangeForm.bind(Object(h.a)(a)),a.handleBlurForm=a.handleBlurForm.bind(Object(h.a)(a)),a.handleSubmitForm=a.handleSubmitForm.bind(Object(h.a)(a)),a.validateForm=a.validateForm.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(null!=this.props.post){var t=this.state.form;t.fields.title.value=this.props.post.title,t.fields.description.value=this.props.post.description,t.fields.category.value=this.props.post.category,t.fields.links=this.props.post.links.map(function(e){return{value:e}}),t.fields.tags.value=this.props.post.tags.map(function(e){return e.toTitleCase()}),t.fields.images.value=this.props.post.postImages.map(function(e){return{id:e.id,src:e.url}}),t.mainImage=this.props.post.postImages.findIndex(function(e){return e.isMain}),this.setState({form:t})}setTimeout(this.props.fetchTags({orderBy:"count",minCount:0},function(t){t=t.map(function(e){return{name:e.value}});for(var a=e.state.suggestedTags,n=function(e){-1==t.findIndex(function(t){return t.name==a[e].name})&&t.push(a[e])},s=0;s<a.length;s++)n(s);e.setState({suggestedTags:t})},function(e){K.error(e.message)}),1)}},{key:"handleInputChangeTags",value:function(e){if(e=e.map(function(e){return e.toTitleCase()}),new Set(e).size===e.length){var t=this.state.form;t.fields.tags.value=e,t=this.validateForm(t),this.setState({form:t})}else K.error("Tags cannot be duplicated!")}},{key:"handleFormArrayFieldChange",value:function(e,t){var a=e.target,n=a.value,s=a.name,r=this.state.form;r.fields[s][t].value=n,r=this.validateForm(r),this.setState({form:r})}},{key:"handleFormArrayFieldBlur",value:function(e,t){var a=e.target.name,n=this.state.form;n.fields[a][t].touched=!0,n.touched=!0,n=this.validateForm(n),this.setState({form:n})}},{key:"onClickAddLinkButton",value:function(){var e=this.state.form;e.fields.links.push({value:""}),this.setState({form:e})}},{key:"onClickRemoveLinkButton",value:function(e,t){t.preventDefault();var a=this.state.form;a.fields.links.splice(e,1),this.setState({form:a})}},{key:"showFormFieldError",value:function(e){return this.state.form.fields[e].error&&this.state.form.fields[e].touched}},{key:"showFormArrayFieldError",value:function(e,t){return this.state.form.fields[e][t].error&&this.state.form.fields[e][t].touched}},{key:"onImageFileDialogCancel",value:function(e){var t=this.state.form;t.fields.images.touched=!0,t.touched=!0,t=this.validateForm(t),this.setState({form:t})}},{key:"tagsInputRenderLayout",value:function(e,t){return s.a.createElement("span",null,t,e)}},{key:"autocompleteRenderInput",value:function(e){for(var t=e.addTag,a=Object(i.a)(e,["addTag"]),n=a.value&&a.value.trim().toLowerCase()||"",r=n.length,o=this.state.suggestedTags.filter(function(e){return e.name.slice(0,r)===n}),c=0;c<o.length;c++)o[c]={name:o[c].name.toTitleCase()};return s.a.createElement(nt.a,{ref:a.ref,suggestions:o,shouldRenderSuggestions:function(e){return e&&e.trim().length>0},getSuggestionValue:function(e){return e.name},renderSuggestion:function(e){return s.a.createElement("span",null,e.name)},inputProps:Object(l.a)({},a,{onChange:function(e,t){t.newValue;"enter"===t.method?e.preventDefault():a.onChange(e)}}),onSuggestionSelected:function(e,a){var n=a.suggestion;t(n.name)},onSuggestionsClearRequested:function(){},onSuggestionsFetchRequested:function(){}})}},{key:"handleInputChangeForm",value:function(e){var t=e.target,a=t.value,n=t.name,s=this.state.form;s.fields[n].value=a,s=this.validateForm(s),this.setState({form:s})}},{key:"validateForm",value:function(e){for(var t in e.fields)Array.isArray(e.fields[t])?e.fields[t].forEach(function(e){e.error=null}):e.fields[t].error=null;e.valid=!0,je(e.fields.title.value)?Ue(4)(e.fields.title.value)&&Fe(100)(e.fields.title.value)||(e.valid=!1,e.fields.title.error="Title should be between ".concat(4," to ").concat(100," characters.")):(e.valid=!1,e.fields.title.error="Title is required."),je(e.fields.description.value)?Ue(20)(e.fields.description.value)&&Fe(3e3)(e.fields.description.value)||(e.valid=!1,e.fields.description.error="Description should be between ".concat(20," to ").concat(3e3," characters.")):(e.valid=!1,e.fields.description.error="Description is required."),je(e.fields.category.value)||(e.valid=!1,e.fields.category.error="Please choose the resource category."),je(e.fields.tags.value)?e.fields.tags.value.length>5&&(e.valid=!1,e.fields.tags.error="At most ".concat(5," tags can be added.")):(e.valid=!1,e.fields.tags.error="Please add at least one tag.");for(var a=0;a<e.fields.links.length;a++)je(e.fields.links[a].value)||(e.valid=!1,e.fields.links[a].error="Empty link is not allowed.");return je(e.fields.images.value)?e.fields.images.value.length>5&&(e.valid=!1,e.fields.images.error="At most ".concat(5," images can be added.")):(e.valid=!1,e.fields.images.error="Please upload at least one image."),e}},{key:"handleSubmitForm",value:function(e){e.preventDefault();var t=this.state.form;if(t.touched){if(!t.valid){for(var a in t.fields)Array.isArray(t.fields[a])?t.fields[a].forEach(function(e){e.touched=!0}):t.fields[a].touched=!0;return t.touched=!0,t=this.validateForm(t),this.setState({form:t}),void K.error("Please correct the errors on this form.")}}else{for(var n in t.fields)Array.isArray(t.fields[n])?t.fields[n].forEach(function(e){e.touched=!0}):t.fields[n].touched=!0;if(t.touched=!0,t=this.validateForm(t),this.setState({form:t}),!t.valid)return void K.error("Please correct the errors on this form.")}var s=this.state.form.fields.links.map(function(e){return encodeURIComponent(e.value)});console.log(s),this.props.onSubmitPost(this.state.form.fields.title.value,this.state.form.fields.description.value,this.state.form.fields.category.value,this.state.form.fields.tags.value.map(function(e){return e.toLowerCase()}).join(","),s.join(","),this.state.form.fields.images.value,this.state.form.mainImage)}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{id:"post-form",noValidate:!0,onSubmit:this.handleSubmitForm},s.a.createElement("div",{className:"form-group row text-left"},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold "},"Title"),s.a.createElement("div",{className:"col-sm"},s.a.createElement("input",{name:"title",type:"text",className:"form-control "+(this.showFormFieldError("title")?"is-invalid":""),placeholder:"Name of the Study Resource",value:this.state.form.fields.title.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm,minLength:4}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("title")?this.state.form.fields.title.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Description"),s.a.createElement("div",{className:"col-sm"},s.a.createElement("textarea",{name:"description",type:"text",className:"form-control "+(this.showFormFieldError("description")?"is-invalid":""),placeholder:"Description of the Study Resource",value:this.state.form.fields.description.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm,minLength:20}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("description")?this.state.form.fields.description.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Category"),s.a.createElement("div",{className:"col-sm col-lg-4 col-md-6"},s.a.createElement("select",{name:"category",className:"form-control "+(this.showFormFieldError("category")?"is-invalid":""),value:this.state.form.fields.category.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm},s.a.createElement("option",{disabled:!0,value:"",style:{display:"none"}}),b.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("category")?this.state.form.fields.category.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Tags"),s.a.createElement("div",{className:"col-sm"},s.a.createElement(tt.a,{className:"text-left",inputProps:{className:"react-tagsinput-input form-control "+(this.showFormFieldError("tags")?"is-invalid":""),name:"tags",onBlur:this.handleBlurForm,placeholder:this.state.form.fields.tags.value.length<5?"Type a tag and press Enter":"At most ".concat(5," tags can be added."),disabled:this.state.form.fields.tags.value.length>=5},renderInput:this.autocompleteRenderInput.bind(this),renderLayout:this.tagsInputRenderLayout,value:this.state.form.fields.tags.value,onChange:this.handleInputChangeTags}),s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.showFormFieldError("tags")?this.state.form.fields.tags.error:""))),s.a.createElement("div",{className:"form-group row text-left "},s.a.createElement("label",{className:"col-sm-2 col-form-label font-weight-bold"},"Links"),s.a.createElement("div",{className:"col-sm-10"},this.state.form.fields.links.map(function(t,a){return s.a.createElement("div",{key:a,className:"input-group mb-2"},s.a.createElement("input",{name:"links",type:"text",className:"form-control "+(e.showFormArrayFieldError("links",a)?"is-invalid":""),placeholder:"http://example.com",value:t.value,onChange:function(t){return e.handleFormArrayFieldChange(t,a)},onBlur:function(t){return e.handleFormArrayFieldBlur(t,a)}}),e.state.form.fields.links.length>1?s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.onClickRemoveLinkButton(a,t)}},s.a.createElement("span",{className:"fas fa-minus mr-2"}),"Remove")):null,s.a.createElement("div",{className:"invalid-feedback"},e.showFormArrayFieldError("links",a)?e.state.form.fields.links[a].error:""))})),s.a.createElement("div",{className:"col-sm text-right"},s.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.onClickAddLinkButton},s.a.createElement("span",{className:"fas fa-plus mr-1"}),"Add a new link"))),s.a.createElement("div",{className:"form-group row"},s.a.createElement("label",{className:"col-sm-2 col-form-label text-left font-weight-bold"},"Images"),s.a.createElement("div",{className:"col-sm text-left"},s.a.createElement("div",{className:"mx-0 px-0 col-sm-12 col-md-6 col-lg-4 mb-2"},s.a.createElement(_e.a,{onFileDialogCancel:this.onImageFileDialogCancel,onDropAccepted:this.onInputAcceptedImage,onDropRejected:this.onInputRejectedImage,accept:"image/*",noDrag:!0},function(t){var a=t.getRootProps,n=t.getInputProps;return s.a.createElement("label",Object.assign({htmlFor:"input-image"},a({tabIndex:null,className:rt.a.labelInputImage+" "+(e.showFormFieldError("images")?rt.a.isInvalid:"")})),s.a.createElement("input",Object.assign({id:"input-image"},n({}))),s.a.createElement("span",{className:"fas fa-upload mr-1"})," Upload Images")}),s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.showFormFieldError("images")?this.state.form.fields.images.error:"")),s.a.createElement("div",{className:"row mx-0 px-0 mb-2"},this.state.form.fields.images.value.map(function(t,a){return null!=t.src?s.a.createElement("div",{key:a,className:"col-sm-6 col-md-4 col-lg-3 mb-4 text-center"},s.a.createElement("img",{src:t.src,className:rt.a.imgThumbnail,alt:""}),s.a.createElement("div",{className:"text-center mt-1"},s.a.createElement("button",{type:"button",className:"mr-1 btn btn-sm "+(a==e.state.form.mainImage?"btn-success active":"btn-secondary"),onClick:function(t){e.setMainImage(a)},disabled:a==e.state.form.mainImage},"Cover"),s.a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:function(t){e.handleRemoveImage(a)}},s.a.createElement("i",{className:"fas fa-trash-alt"})))):null})))))}}]),t}(n.Component),it=Object(f.connect)(function(e){return{}},function(e){return{fetchTags:function(t,a,n){e(_(t,a,n))}}})(ot);var lt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a.onSubmitPost=a.onSubmitPost.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onSubmitPost",value:function(e,t,a,n,s,r,o){var i=this;this.props.createPost(e,t,a,n,s,r,o,function(e){i.props.history.push("/posts/".concat(e.id)),i.props.fetchAuthUser(i.props.authUser.id,function(e){},function(e){K.error(e.message)})},function(e){K.error(e.message)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container mt-4"},s.a.createElement("h1",{className:"mb-4 text-left"},"Create New Post"),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement(it,{onSubmitPost:this.onSubmitPost}),s.a.createElement("div",{className:"text-left row "},s.a.createElement("div",{className:"offset-md-2 col"},s.a.createElement("button",{className:"btn btn-success btn-lg",type:"submit",form:"post-form"},"Submit"))))))}}]),t}(n.Component),ct=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchAuthUser:function(t,a,n){e(T(t,a,n))},createPost:function(t,a,n,s,r,o,i,l,c){e(function(e,t,a,n,s,r,o,i,l){return function(c,u){console.log(o);var m=new FormData;m.append("title",e),m.append("description",t),m.append("category",a),m.append("tags",n),m.append("links",s);for(var d=0;d<r.length;d++)m.append("image".concat(d+1),r[d]);return m.append("mainImage",o),fetch(g+"posts",{method:"POST",body:m}).then(function(e){e.ok?e.json().then(function(e){i&&i(e)}).catch(function(e){l&&l(e)}):v(e,function(e){l&&l(e)})},function(e){throw e}).catch(function(e){l&&l(e)})}}(t,a,n,s,r,o,i,l,c))}}})(lt)),ut=(a(434),a(171)),mt=a.n(ut),dt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={post:null},a.onClickLikeButton=a.onClickLikeButton.bind(Object(h.a)(a)),a.onClickDislikeButton=a.onClickDislikeButton.bind(Object(h.a)(a)),a.onClickEditButton=a.onClickEditButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(this.props.fetchPost(this.props.match.params.id,function(t){t.tags=t.tags;for(var a=t.links.split(","),n=0;n<a.length;n++)a[n]=decodeURIComponent(a[n]);t.links=a,e.setState({post:t})},function(e){K.error(e.message)}),1)}},{key:"fetchPost",value:function(){var e=this;this.props.fetchPost(this.props.match.params.id,function(t){t.tags=t.tags;for(var a=t.links.split(","),n=0;n<a.length;n++)a[n]=decodeURIComponent(a[n]);t.links=a,e.setState({post:t})},function(e){K.error(e.message)})}},{key:"onClickLikeButton",value:function(e){var t=this;this.isPostLiked()?this.props.cancelLikedPost(this.props.authUser.id,this.props.match.params.id,function(e){t.fetchPost()},function(e){K.error(e.message)}):this.props.likePost(this.props.authUser.id,this.props.match.params.id,function(e){t.fetchPost()},function(e){K.error(e.message)})}},{key:"isPostLiked",value:function(){var e=this;return null!=this.state.post&&-1!=this.state.post.likers.findIndex(function(t){return t.likerId==e.props.authUser.id})}},{key:"isPostDisliked",value:function(){var e=this;return null!=this.state.post&&-1!=this.state.post.dislikers.findIndex(function(t){return t.dislikerId==e.props.authUser.id})}},{key:"onClickDislikeButton",value:function(e){var t=this;this.isPostDisliked()?this.props.cancelDislikedPost(this.props.authUser.id,this.props.match.params.id,function(e){t.fetchPost()},function(e){K.error(e.message)}):this.props.dislikePost(this.props.authUser.id,this.props.match.params.id,function(e){t.fetchPost()},function(e){K.error(e.message)})}},{key:"onClickEditButton",value:function(e){this.props.history.push("/posts/".concat(this.props.match.params.id,"/edit"))}},{key:"render",value:function(){var e=this.state.post?this.state.post.postImages.map(function(e){return{original:e.url,thumbnail:e.url}}):null;return s.a.createElement("div",{className:"container mt-4 pt-3 mb-4 post-details-component"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Author:"),s.a.createElement("p",null,this.state.post?s.a.createElement(ee.b,{to:"/members/"+this.state.post.author.id,className:"navbar-brand"},s.a.createElement("span",{className:"mr-2"},s.a.createElement("img",{className:mt.a.imgAuthor,src:this.state.post?this.state.post.author.photoUrl||ae.a:"",alt:""})),this.state.post?this.state.post.author.username:null):null)),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Created At:"),s.a.createElement("p",null,this.state.post?new Date(this.state.post.created).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"")),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,"Last Updated At:"),s.a.createElement("p",null,this.state.post?new Date(this.state.post.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"")),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,s.a.createElement("i",{className:"far fa-thumbs-up"})," Likes:"),s.a.createElement("p",null,this.state.post?this.state.post.likers.length:"")),s.a.createElement("div",{className:"text-left"},s.a.createElement("strong",null,s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislikes:"),s.a.createElement("p",null,this.state.post?this.state.post.dislikers.length:""))),this.props.isAuthenticated?s.a.createElement("div",{className:"card-footer "},s.a.createElement("button",{className:"btn mx-1 "+(this.isPostLiked()?"btn-success":"btn-outline-secondary"),onClick:this.onClickLikeButton},s.a.createElement("i",{className:"far fa-thumbs-up"})," Like"),s.a.createElement("button",{className:"btn mx-1 "+(this.isPostDisliked()?"btn-danger":"btn-outline-secondary"),onClick:this.onClickDislikeButton},s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislike")):null)),s.a.createElement("div",{className:"col-md-9"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"col-sm"},s.a.createElement("h2",null,this.state.post?this.state.post.title:""))),s.a.createElement("div",{className:"row text-left mb-2"},s.a.createElement("div",{className:"col-sm col-lg-4 col-md-6"},s.a.createElement("strong",{className:"mr-1"},"Category: ")," ",this.state.post?this.state.post.category.toUpperCase():"")),s.a.createElement("div",{className:"row text-left mb-4"},s.a.createElement("div",{className:"col-sm"},s.a.createElement("strong",{className:"mr-1"},"Tags: "),this.state.post?this.state.post.tags.map(function(e){return e.toTitleCase()}).join(", "):null)),s.a.createElement("div",{className:"row text-left mb-4"},s.a.createElement("label",{className:"col-12 font-weight-bold"},"Description"),s.a.createElement("div",{className:"col-sm"},s.a.createElement("p",{className:"bg-light px-3 py-3 "+mt.a.pDescription},this.state.post?this.state.post.description:""))),s.a.createElement("div",{className:"row text-left mb-5"},s.a.createElement("label",{className:"col-lg-2 col-md-3 font-weight-bold"},"Links"),s.a.createElement("div",{className:"col-sm-10"},this.state.post?this.state.post.links.map(function(e,t){return s.a.createElement("div",{className:"mb-2",key:t},s.a.createElement("a",{href:e,target:"_blank"},e))}):null)),s.a.createElement("div",{className:"row text-left mt-4"},s.a.createElement("label",{className:"col-lg-2 col-md-3 font-weight-bold"},"Images"),s.a.createElement("div",{className:"col-sm-8 col-md-6 col-lg-4"},e?s.a.createElement(ye.a,{items:e,showPlayButton:!1,showFullscreenButton:!1,useBrowserFullscreen:!1}):null)),this.props.isAuthenticated&&null!=this.state.post&&this.state.post.author.id==this.props.authUser.id?s.a.createElement("div",{className:"text-right mt-4 mt-sm-0"},s.a.createElement("button",{className:"btn btn-block-xs-only btn-warning",onClick:this.onClickEditButton},s.a.createElement("i",{className:"fas fa-edit"})," Edit")):null)))))}}]),t}(n.Component),ht=Object(G.g)(Object(f.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated,authUser:e.auth.user}},function(e){return{fetchPost:function(t,a,n){e(S(t,a,n))},likePost:function(t,a,n,s){e(B(t,a,n,s))},cancelLikedPost:function(t,a,n,s){e(D(t,a,n,s))},dislikePost:function(t,a,n,s){e(M(t,a,n,s))},cancelDislikedPost:function(t,a,n,s){e(L(t,a,n,s))}}})(dt)),pt=a(57),ft=a.n(pt),gt=[{value:"relevance",display:"Most Relevant"},{value:"updated",display:"Updated Time"},{value:"created",display:"Created Time"},{value:"likes",display:"Most Liked"},{value:"dislikes",display:"Most Disliked"}],vt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={posts:null,postParams:{category:a.props.location.state&&a.props.location.state.category||"",search:a.props.location.state&&a.props.location.state.search||"",orderBy:"updated"},pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0}},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.handleLikePost=a.handleLikePost.bind(Object(h.a)(a)),a.onClickPost=a.onClickPost.bind(Object(h.a)(a)),a.handleInputChangePostParamsForm=a.handleInputChangePostParamsForm.bind(Object(h.a)(a)),a.handleSubmitPostParamsForm=a.handleSubmitPostParamsForm.bind(Object(h.a)(a)),a.onClickEditPostButton=a.onClickEditPostButton.bind(Object(h.a)(a)),console.log(a.props.location),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadPosts(e.state.pagination.currentPage)},1)}},{key:"handleChangePage",value:function(e){this.loadPosts(e)}},{key:"isPostLiked",value:function(e){return this.state.posts[e].likers.includes(this.props.authUser.id)}},{key:"handleLikePost",value:function(e){var t=this;this.isPostLiked(e)?this.props.cancelLikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.likePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].likers.push(t.props.authUser.id);var s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"isPostDisliked",value:function(e){return this.state.posts[e].dislikers.includes(this.props.authUser.id)}},{key:"handleDislikePost",value:function(e){var t=this;this.isPostDisliked(e)?this.props.cancelDislikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.dislikePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].dislikers.push(t.props.authUser.id);var s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"onClickPost",value:function(e){this.props.history.push("/posts/".concat(e))}},{key:"onClickEditPostButton",value:function(e){this.props.history.push("/posts/".concat(e,"/edit"))}},{key:"loadPosts",value:function(e){var t=this;this.props.fetchPosts(e,this.state.pagination.itemsPerPage,this.state.postParams,function(e,a){t.setState({posts:e,pagination:a})},function(e){K.error(e.message)})}},{key:"handleInputChangePostParamsForm",value:function(e){var t=this,a=e.target,n=a.value,s=a.name;this.setState({postParams:Object(l.a)({},this.state.postParams,Object(V.a)({},s,n))}),"category"!=s&&"orderBy"!=s||setTimeout(function(){t.loadPosts(1)},1)}},{key:"handleSubmitPostParamsForm",value:function(e){e.preventDefault(),this.loadPosts(1)}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"text-left mb-4"},s.a.createElement("h2",null,s.a.createElement("i",{className:"fas fa-search"})," Search Study Resources")),s.a.createElement("form",{className:"row",noValidate:!0},s.a.createElement("div",{className:"form-inline ml-3 mb-2"},s.a.createElement("label",{className:"mr-2"},"Category"),s.a.createElement("select",{className:"form-control",style:{width:"108px"},name:"category",value:this.state.postParams.category,onChange:this.handleInputChangePostParamsForm},s.a.createElement("option",{key:"all",value:""},"All"),b.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)}))),s.a.createElement("div",{className:"col-sm-12 col-lg mb-2"},s.a.createElement("div",{className:"input-group "},s.a.createElement("input",{className:"form-control",type:"text",placeholder:"Web Development",value:this.state.postParams.search,onChange:this.handleInputChangePostParamsForm,name:"search"}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSubmitPostParamsForm},"Search")))),s.a.createElement("div",{className:"form-inline ml-auto mb-2"},s.a.createElement("label",{className:"mr-2"},"Order By"),s.a.createElement("select",{className:"form-control",style:{width:"166px"},name:"orderBy",value:this.state.postParams.orderBy,onChange:this.handleInputChangePostParamsForm},gt.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})))),s.a.createElement("br",null),s.a.createElement("div",{className:"row mb-4"},this.state.posts&&this.state.posts.length?this.state.posts.map(function(t,a){return s.a.createElement("div",{key:t.id,className:"col-12 p-4 border-bottom "+(0==a?"border-top ":"")+ft.a.divPost,onClick:function(){return e.onClickPost(t.id)}},s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"my-auto text-center col-12 px-5 col-sm-2 px-sm-3"},s.a.createElement("img",{className:" "+ft.a.imgCardSide,src:t.mainPostImageUrl})),s.a.createElement("div",{className:"col col-sm-10 mt-3 mt-md-0"},s.a.createElement("h3",{className:""},t.title),s.a.createElement("div",{className:"mb-2 text-secondary"},s.a.createElement("span",null,"Updated: ",new Date(t.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),s.a.createElement("div",{className:"mb-2"},s.a.createElement("strong",{className:"font-weight-bold"},"Category: ")," ",t.category.toUpperCase()),s.a.createElement("div",{className:"mb-3"},s.a.createElement("strong",{className:"font-weight-bold"},"Tags: ")," ",t.tags.map(function(e){return e.toTitleCase()}).join(", ")),s.a.createElement("div",{className:"mb-4 "},t.description.length<=200?t.description.length:t.description.substring(0,200)+"..."),e.props.isAuthenticated?s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn mr-2 "+(t.likers.includes(e.props.authUser.id)?"btn-success":"btn-outline-secondary"),onClick:function(t){t.stopPropagation(),e.handleLikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-up"})," Like \xb7 ",t.likers.length),s.a.createElement("button",{className:"btn "+(t.dislikers.includes(e.props.authUser.id)?"btn-danger":"btn-outline-secondary"),onClick:function(t){t.stopPropagation(),e.handleDislikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislike \xb7 ",t.dislikers.length)),t.author.id==e.props.authUser.id?s.a.createElement("div",{className:"col-4 text-right"},s.a.createElement("button",{className:"btn btn-warning",onClick:function(a){a.stopPropagation(),e.onClickEditPostButton(t.id)}},s.a.createElement("i",{className:"fas fa-edit"})," Edit")):null):s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn mr-2 btn-outline-secondary",onClick:function(t){t.stopPropagation(),e.props.showModal("login")}},s.a.createElement("i",{className:"far fa-thumbs-up"})," Like \xb7 ",t.likers.length),s.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(t){t.stopPropagation(),e.props.showModal("login")}},s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislike \xb7 ",t.dislikers.length))))))}):this.state.posts&&0==this.state.posts.length?s.a.createElement("h3",{className:"mx-auto text-secondary"},"No relevant post yet."):null)),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}))))}}]),t}(n.Component),bt=Object(G.g)(Object(f.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated,authUser:e.auth.user}},function(e){return{fetchPosts:function(t,a,n,s,r){e(function(e,t,a,n,s){return function(r,o){console.log("fetchPosts");var i={};null!=e&&(i.pageNumber=e),null!=t&&(i.pageSize=t),null!=a&&(null!=a.category&&(i.category=a.category),null!=a.search&&(i.search=a.search),null!=a.orderBy&&(i.orderBy=a.orderBy));var l=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&");return fetch(g+"posts?"+l).then(function(e){e.ok?e.json().then(function(t){var a=e.headers.get("Pagination"),s=null;a&&(s=JSON.parse(a)),n&&n(t,s)}).catch(function(e){s&&s(e)}):v(e,function(e){s&&s(e)})},function(e){throw e}).catch(function(e){s&&s(e)})}}(t,a,n,s,r))},likePost:function(t,a,n,s){e(B(t,a,n,s))},cancelLikedPost:function(t,a,n,s){e(D(t,a,n,s))},dislikePost:function(t,a,n,s){e(M(t,a,n,s))},cancelDislikedPost:function(t,a,n,s){e(L(t,a,n,s))}}})(vt));var Et=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={post:null},a.onSubmitPost=a.onSubmitPost.bind(Object(h.a)(a)),a.onClickCancelButton=a.onClickCancelButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.authUser.posts.includes(Number(this.props.match.params.id))&&setTimeout(this.props.fetchPost(this.props.match.params.id,function(t){for(var a=t.links.split(","),n=0;n<a.length;n++)a[n]=decodeURIComponent(a[n]);t.links=a,e.setState({post:t})},function(e){K.error(e.message)}),1)}},{key:"onClickCancelButton",value:function(e){this.props.history.goBack()}},{key:"onSubmitPost",value:function(e,t,a,n,s,r,o){var i=this,l=[],c=[];this.state.post.postImages.forEach(function(e){-1==r.findIndex(function(t){return t.id==e.id})&&l.push(e.id)}),r.forEach(function(e){null!=e.path&&c.push(e)});var u=r.length-c.length;o>=u?o-=u:o=-r[o].id,this.props.updatePost(this.props.match.params.id,e,t,a,n,s,l.join(","),c,o,function(e){i.props.history.push("/posts/".concat(i.props.match.params.id))},function(e){K.error(e.message)})}},{key:"render",value:function(){return this.props.authUser.posts.includes(Number(this.props.match.params.id))?s.a.createElement("div",{className:"container mt-4"},s.a.createElement("h1",{className:"mb-4 text-left"},"Edit Post ",this.props.match.params.id),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},null!=this.state.post?s.a.createElement(s.a.Fragment,null,s.a.createElement(it,{post:this.state.post,onSubmitPost:this.onSubmitPost}),s.a.createElement("div",{className:"text-left row "},s.a.createElement("div",{className:"offset-md-2 col"},s.a.createElement("button",{className:"btn btn-info btn-lg mr-3 ",type:"submit",form:"post-form"},"Update"),s.a.createElement("button",{className:"btn btn-secondary btn-lg",onClick:this.onClickCancelButton},"Cancel")))):null))):s.a.createElement(G.b,{to:{pathname:"/home"}})}}]),t}(n.Component),kt=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchPost:function(t,a,n){e(S(t,a,n))},updatePost:function(t,a,n,s,r,o,i,l,c,u,m){e(function(e,t,a,n,s,r,o,i,l,c,u){return function(m,d){var h=new FormData;h.append("title",t),h.append("description",a),h.append("category",n),h.append("tags",s),h.append("links",r),h.append("deletedImages",o);for(var p=0;p<i.length;p++)h.append("addedImage".concat(p+1),i[p]);return h.append("mainImage",l),fetch(g+"posts/".concat(e),{method:"PUT",body:h}).then(function(e){e.ok?e.json().then(function(e){c&&c(e)}).catch(function(e){u&&u(e)}):v(e,function(e){u&&u(e)})},function(e){throw e}).catch(function(e){u&&u(e)})}}(t,a,n,s,r,o,i,l,c,u,m))}}})(Et)),Pt=[{value:"likedTime",display:"Liked Time"},{value:"updated",display:"Updated Time"}],yt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={posts:null,postParams:{category:"",orderBy:"likedTime"},pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0}},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.handleLikePost=a.handleLikePost.bind(Object(h.a)(a)),a.onClickPost=a.onClickPost.bind(Object(h.a)(a)),a.handleInputChangePostParamsForm=a.handleInputChangePostParamsForm.bind(Object(h.a)(a)),a.handleSubmitPostParamsForm=a.handleSubmitPostParamsForm.bind(Object(h.a)(a)),a.onClickEditPostButton=a.onClickEditPostButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadPosts(e.state.pagination.currentPage)},1)}},{key:"handleChangePage",value:function(e){this.loadPosts(e)}},{key:"isPostLiked",value:function(e){return this.state.posts[e].likers.includes(this.props.authUser.id)}},{key:"handleLikePost",value:function(e){var t=this;this.isPostLiked(e)?this.props.cancelLikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.likePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].likers.push(t.props.authUser.id);var s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"isPostDisliked",value:function(e){return this.state.posts[e].dislikers.includes(this.props.authUser.id)}},{key:"handleDislikePost",value:function(e){var t=this;this.isPostDisliked(e)?this.props.cancelDislikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.dislikePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].dislikers.push(t.props.authUser.id);var s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"onClickPost",value:function(e){this.props.history.push("/posts/".concat(e))}},{key:"onClickEditPostButton",value:function(e){this.props.history.push("/posts/".concat(e,"/edit"))}},{key:"loadPosts",value:function(e){var t=this;this.props.fetchLikedPosts(this.props.authUser.id,e,this.state.pagination.itemsPerPage,this.state.postParams,function(e,a){t.setState({posts:e,pagination:a})},function(e){K.error(e.message)})}},{key:"handleInputChangePostParamsForm",value:function(e){var t=this,a=e.target,n=a.value,s=a.name;console.log(s,n),this.setState({postParams:Object(l.a)({},this.state.postParams,Object(V.a)({},s,n))}),"category"!=s&&"orderBy"!=s||setTimeout(function(){t.loadPosts(1)},1)}},{key:"handleSubmitPostParamsForm",value:function(e){e.preventDefault(),this.loadPosts(1)}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"text-left mb-4"},s.a.createElement("h2",null,s.a.createElement("i",{className:"far fa-thumbs-up"})," Posts I Liked")),s.a.createElement("form",{className:"row",noValidate:!0},s.a.createElement("div",{className:"form-inline ml-3 mb-2"},s.a.createElement("label",{className:"mr-2"},"Category"),s.a.createElement("select",{className:"form-control",style:{width:"108px"},name:"category",value:this.state.postParams.category,onChange:this.handleInputChangePostParamsForm},s.a.createElement("option",{key:"all",value:""},"All"),b.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)}))),s.a.createElement("div",{className:"form-inline ml-auto mb-2"},s.a.createElement("label",{className:"mr-2"},"Order By"),s.a.createElement("select",{className:"form-control",style:{width:"166px"},name:"orderBy",value:this.state.postParams.orderBy,onChange:this.handleInputChangePostParamsForm},Pt.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})))),s.a.createElement("br",null),s.a.createElement("div",{className:"row mb-4"},this.state.posts&&this.state.posts.length>0?this.state.posts.map(function(t,a){return s.a.createElement("div",{key:t.id,className:"col-12 p-4 border-bottom "+(0==a?"border-top ":"")+ft.a.divPost,onClick:function(){return e.onClickPost(t.id)}},s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"my-auto text-center col-12 px-5 col-sm-2 px-sm-3"},s.a.createElement("img",{className:" "+ft.a.imgCardSide,src:t.mainPostImageUrl})),s.a.createElement("div",{className:"col mt-3 mt-md-0"},s.a.createElement("h3",{className:""},t.title),s.a.createElement("div",{className:"mb-2 text-secondary"},s.a.createElement("span",{className:"mr-2"},"Liked: ",new Date(t.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),","),s.a.createElement("span",null,"Updated: ",new Date(t.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),s.a.createElement("div",{className:"mb-2"},s.a.createElement("strong",{className:"font-weight-bold"},"Category: ")," ",t.category.toUpperCase()),s.a.createElement("div",{className:"mb-3"},s.a.createElement("strong",{className:"font-weight-bold"},"Tags: ")," ",t.tags.join(", ")),s.a.createElement("div",{className:"mb-4 "},t.description.length<=200?t.description.length:t.description.substring(0,200)+"..."),s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn mr-2 "+(t.likers.includes(e.props.authUser.id)?"btn-success":"btn-secondary"),onClick:function(t){t.stopPropagation(),e.handleLikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-up"})," Like \xb7 ",t.likers.length),s.a.createElement("button",{className:"btn "+(t.dislikers.includes(e.props.authUser.id)?"btn-danger":"btn-secondary"),onClick:function(t){t.stopPropagation(),e.handleDislikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislike \xb7 ",t.dislikers.length)),t.author.id==e.props.authUser.id?s.a.createElement("div",{className:"col-4 text-right"},s.a.createElement("button",{className:"btn btn-warning",onClick:function(a){a.stopPropagation(),e.onClickEditPostButton(t.id)}},s.a.createElement("i",{className:"fas fa-edit"})," Edit")):null))))}):this.state.posts&&0==this.state.posts.length?s.a.createElement("h3",{className:"mx-auto text-secondary"},"You didn't like any post."):null)),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}))))}}]),t}(n.Component),Nt=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchLikedPosts:function(t,a,n,s,r,o){e(function(e,t,a,n,s,r){return function(o,i){console.log("fetchLikedPosts");var l={liked:!0};null!=t&&(l.pageNumber=t),null!=a&&(l.pageSize=a),null!=n&&(null!=n.category&&(l.category=n.category),null!=n.orderBy&&(l.orderBy=n.orderBy));var c=Object.keys(l).map(function(e){return e+"="+l[e]}).join("&");return fetch(g+"posts/liked/".concat(e,"?")+c).then(function(e){e.ok?e.json().then(function(t){var a=e.headers.get("Pagination"),n=null;a&&(n=JSON.parse(a)),s&&s(t,n)}).catch(function(e){r&&r(e)}):v(e,function(e){r&&r(e)})},function(e){throw e}).catch(function(e){r&&r(e)})}}(t,a,n,s,r,o))},likePost:function(t,a,n,s){e(B(t,a,n,s))},cancelLikedPost:function(t,a,n,s){e(D(t,a,n,s))},dislikePost:function(t,a,n,s){e(M(t,a,n,s))},cancelDislikedPost:function(t,a,n,s){e(L(t,a,n,s))}}})(yt)),Ct=[{value:"created",display:"Created Time"},{value:"updated",display:"Updated Time"}],wt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={posts:null,postParams:{category:"",orderBy:"updated"},pagination:{currentPage:1,itemsPerPage:5,totalItems:0,totalPages:0}},a.handleChangePage=a.handleChangePage.bind(Object(h.a)(a)),a.handleLikePost=a.handleLikePost.bind(Object(h.a)(a)),a.onClickPost=a.onClickPost.bind(Object(h.a)(a)),a.handleInputChangePostParamsForm=a.handleInputChangePostParamsForm.bind(Object(h.a)(a)),a.handleSubmitPostParamsForm=a.handleSubmitPostParamsForm.bind(Object(h.a)(a)),a.onClickEditPostButton=a.onClickEditPostButton.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.loadPosts(e.state.pagination.currentPage)},1)}},{key:"handleChangePage",value:function(e){this.loadPosts(e)}},{key:"isPostLiked",value:function(e){return this.state.posts[e].likers.includes(this.props.authUser.id)}},{key:"handleLikePost",value:function(e){var t=this;this.isPostLiked(e)?this.props.cancelLikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.likePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].likers.push(t.props.authUser.id);var s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"isPostDisliked",value:function(e){return this.state.posts[e].dislikers.includes(this.props.authUser.id)}},{key:"handleDislikePost",value:function(e){var t=this;this.isPostDisliked(e)?this.props.cancelDislikedPost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts,s=t.state.posts[e].dislikers.indexOf(t.props.authUser.id);-1!=s&&n[e].dislikers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)}):this.props.dislikePost(this.props.authUser.id,this.state.posts[e].id,function(a){var n=t.state.posts;n[e].dislikers.push(t.props.authUser.id);var s=t.state.posts[e].likers.indexOf(t.props.authUser.id);-1!=s&&n[e].likers.splice(s,1),t.setState({posts:n})},function(e){K.error(e.message)})}},{key:"onClickPost",value:function(e){this.props.history.push("/posts/".concat(e))}},{key:"onClickEditPostButton",value:function(e){this.props.history.push("/posts/".concat(e,"/edit"))}},{key:"loadPosts",value:function(e){var t=this;this.props.fetchUserPosts(this.props.match.params.id,e,this.state.pagination.itemsPerPage,this.state.postParams,function(e,a){t.setState({posts:e,pagination:a})},function(e){K.error(e.message)})}},{key:"handleInputChangePostParamsForm",value:function(e){var t=this,a=e.target,n=a.value,s=a.name;this.setState({postParams:Object(l.a)({},this.state.postParams,Object(V.a)({},s,n))}),"category"!=s&&"orderBy"!=s||setTimeout(function(){t.loadPosts(1)},1)}},{key:"handleSubmitPostParamsForm",value:function(e){e.preventDefault(),this.loadPosts(1)}},{key:"render",value:function(){var e=this,t=[];if(this.state.pagination)for(var a=function(a){t.push(s.a.createElement(me.a.Item,{key:a,active:a===e.state.pagination.currentPage,onClick:function(t){e.handleChangePage(a)}},a))},n=1;n<=this.state.pagination.totalPages;n++)a(n);return s.a.createElement("div",null,s.a.createElement("div",{className:"container mt-4"},s.a.createElement("div",{className:"text-left mb-4"},s.a.createElement("h2",null,s.a.createElement("i",{className:"far fa-folder-open"})," ",this.props.authUser.id==this.props.match.params.id?this.props.authUser.username:"User ".concat(this.props.match.params.id),"'s Posts")),s.a.createElement("form",{className:"row",noValidate:!0},s.a.createElement("div",{className:"form-inline ml-3 mb-2"},s.a.createElement("label",{className:"mr-2"},"Category"),s.a.createElement("select",{className:"form-control",style:{width:"108px"},name:"category",value:this.state.postParams.category,onChange:this.handleInputChangePostParamsForm},s.a.createElement("option",{key:"all",value:""},"All"),b.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)}))),s.a.createElement("div",{className:"form-inline ml-auto mb-2"},s.a.createElement("label",{className:"mr-2"},"Order By"),s.a.createElement("select",{className:"form-control",style:{width:"166px"},name:"orderBy",value:this.state.postParams.orderBy,onChange:this.handleInputChangePostParamsForm},Ct.map(function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.display)})))),s.a.createElement("br",null),s.a.createElement("div",{className:"row mb-4"},this.state.posts&&this.state.posts.length?this.state.posts.map(function(t,a){return s.a.createElement("div",{key:t.id,className:"col-12 p-4 border-bottom "+(0==a?"border-top ":"")+ft.a.divPost,onClick:function(){return e.onClickPost(t.id)}},s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"my-auto text-center col-12 px-5 col-sm-2 px-sm-3"},s.a.createElement("img",{className:" "+ft.a.imgCardSide,src:t.mainPostImageUrl})),s.a.createElement("div",{className:"col mt-3 mt-md-0"},s.a.createElement("h3",{className:""},t.title),s.a.createElement("div",{className:"mb-2 text-secondary"},s.a.createElement("span",{className:"mr-2"},"Liked: ",new Date(t.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),","),s.a.createElement("span",null,"Updated: ",new Date(t.updated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))),s.a.createElement("div",{className:"mb-2"},s.a.createElement("strong",{className:"font-weight-bold"},"Category: ")," ",t.category.toUpperCase()),s.a.createElement("div",{className:"mb-3"},s.a.createElement("strong",{className:"font-weight-bold"},"Tags: ")," ",t.tags.join(", ")),s.a.createElement("div",{className:"mb-4 "},t.description.length<=200?t.description.length:t.description.substring(0,200)+"..."),s.a.createElement("div",{className:"row text-left"},s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"btn mr-2 "+(t.likers.includes(e.props.authUser.id)?"btn-success":"btn-secondary"),onClick:function(t){t.stopPropagation(),e.handleLikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-up"})," Like \xb7 ",t.likers.length),s.a.createElement("button",{className:"btn "+(t.dislikers.includes(e.props.authUser.id)?"btn-danger":"btn-secondary"),onClick:function(t){t.stopPropagation(),e.handleDislikePost(a)}},s.a.createElement("i",{className:"far fa-thumbs-down"})," Dislike \xb7 ",t.dislikers.length)),t.author.id==e.props.authUser.id?s.a.createElement("div",{className:"col-4 text-right"},s.a.createElement("button",{className:"btn btn-warning",onClick:function(a){a.stopPropagation(),e.onClickEditPostButton(t.id)}},s.a.createElement("i",{className:"fas fa-edit"})," Edit")):null))))}):this.state.posts&&0==this.state.posts.length?s.a.createElement("h3",{className:"mx-auto text-secondary"},this.props.authUser.id==this.props.match.params.id?"You":"User ".concat(this.props.match.params.id)," didn't create any post."):null)),s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement(me.a,null,s.a.createElement(me.a.First,{onClick:function(t){1!=e.state.pagination.currentPage&&e.handleChangePage(1)},disabled:this.state.pagination.currentPage<=1}),s.a.createElement(me.a.Prev,{onClick:function(t){e.state.pagination.currentPage>1&&e.handleChangePage(e.state.pagination.currentPage-1)},disabled:this.state.pagination.currentPage<=1}),t,s.a.createElement(me.a.Next,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.currentPage+1)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}),s.a.createElement(me.a.Last,{onClick:function(t){e.state.pagination.currentPage<e.state.pagination.totalPages&&e.handleChangePage(e.state.pagination.totalPages)},disabled:this.state.pagination.currentPage>=this.state.pagination.totalPages}))))}}]),t}(n.Component),Ot=Object(G.g)(Object(f.connect)(function(e){return{authUser:e.auth.user}},function(e){return{fetchUserPosts:function(t,a,n,s,r,o){e(function(e,t,a,n,s,r){return function(o,i){var l={userPosts:!0};null!=t&&(l.pageNumber=t),null!=a&&(l.pageSize=a),null!=n&&(null!=n.category&&(l.category=n.category),null!=n.orderBy&&(l.orderBy=n.orderBy));var c=Object.keys(l).map(function(e){return e+"="+l[e]}).join("&");return fetch(g+"posts/userPosts/".concat(e,"?")+c).then(function(e){e.ok?e.json().then(function(t){var a=e.headers.get("Pagination"),n=null;a&&(n=JSON.parse(a)),s&&s(t,n)}).catch(function(e){r&&r(e)}):v(e,function(e){r&&r(e)})},function(e){throw e}).catch(function(e){r&&r(e)})}}(t,a,n,s,r,o))},likePost:function(t,a,n,s){e(B(t,a,n,s))},cancelLikedPost:function(t,a,n,s){e(D(t,a,n,s))},dislikePost:function(t,a,n,s){e(M(t,a,n,s))},cancelDislikedPost:function(t,a,n,s){e(L(t,a,n,s))}}})(wt)),jt=a(456),Ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleBlurForm=function(e){var t=e.target.name,n=a.state.form;n.fields[t].touched=!0,n.touched=!0,n=a.validateForm(n),a.setState({form:n})},a.state={form:{fields:{username:{value:""},dateOfBirth:{value:""},city:{value:""},country:{value:""},password:{value:"",visible:""},confirmPassword:{value:"",visible:""}},valid:!1,touched:!1}},a.handleInputChangeForm=a.handleInputChangeForm.bind(Object(h.a)(a)),a.handleSubmitForm=a.handleSubmitForm.bind(Object(h.a)(a)),a.handleBlurForm=a.handleBlurForm.bind(Object(h.a)(a)),a.togglePasswordVisibility=a.togglePasswordVisibility.bind(Object(h.a)(a)),console.log(window),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChangeForm",value:function(e){var t=e.target,a=t.value,n=t.name,s=this.state.form;s.fields[n].value=a,s=this.validateForm(s),this.setState({form:s})}},{key:"togglePasswordVisibility",value:function(e){var t=this.state.form;t.fields[e].visible=!t.fields[e].visible,this.setState({form:t})}},{key:"validateForm",value:function(e){for(var t in e.fields)e.fields[t].error=null;return e.valid=!0,je(e.fields.username.value)||(e.valid=!1,e.fields.username.error="Username is required."),je(e.fields.password.value)||(e.valid=!1,e.fields.password.error="Password is required."),je(e.fields.confirmPassword.value)?e.fields.password.value!=e.fields.confirmPassword.value&&(e.valid=!1,e.fields.confirmPassword.error="Password and confirmed password do not match."):(e.valid=!1,e.fields.confirmPassword.error="Please re-enter your password."),e}},{key:"showFormFieldError",value:function(e){return this.state.form.fields[e].error&&this.state.form.fields[e].touched}},{key:"handleSubmitForm",value:function(e){var t=this;e.preventDefault();var a=this.state.form;if(a.touched){if(!a.valid){for(var n in a.fields)a.fields[n].touched=!0;return a.touched=!0,this.setState({form:a}),void K.error("Please correct the errors on this form.")}}else{for(var s in a.fields)a.fields[s].touched=!0;if(a.touched=!0,a=this.validateForm(a),this.setState({form:a}),!a.valid)return void K.error("Please correct the errors on this form.")}var r={username:this.state.form.fields.username.value,password:this.state.form.fields.password.value};this.props.signupUser(r,function(e){t.props.close(),t.props.loginUser(r,function(){},function(e){K.error(e.message)})},function(e){K.error(e.message)})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"",noValidate:!0,onSubmit:this.handleSubmitForm},s.a.createElement("h2",{className:"text-center text-primary my-2"},"Sign Up"),s.a.createElement("hr",{className:"mb-4"}),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{name:"username",type:"text",placeholder:"Username",className:"form-control "+(this.showFormFieldError("username")?"is-invalid":""),autoComplete:"new-username",value:this.state.form.fields.username.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("username")?this.state.form.fields.username.error:"")),s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{name:"password",type:this.state.form.fields.password.visible?"text":"password",placeholder:"Password",className:"form-control "+(this.showFormFieldError("password")?"is-invalid":""),autoComplete:"new-password",value:this.state.form.fields.password.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("span",{className:"input-group-text"},s.a.createElement("i",{className:this.state.form.fields.password.visible?"fa fa-eye-slash":"fa fa-eye",style:{cursor:"pointer"},onClick:function(){return e.togglePasswordVisibility("password")}}))),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("password")?this.state.form.fields.password.error:""))),s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{name:"confirmPassword",type:this.state.form.fields.confirmPassword.visible?"text":"password",placeholder:"Confirm Password",className:"form-control "+(this.showFormFieldError("confirmPassword")?"is-invalid":""),value:this.state.form.fields.confirmPassword.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("span",{className:"input-group-text"},s.a.createElement("i",{className:this.state.form.fields.confirmPassword.visible?"fa fa-eye-slash":"fa fa-eye",style:{cursor:"pointer"},onClick:function(){return e.togglePasswordVisibility("confirmPassword")}}))),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("confirmPassword")?this.state.form.fields.confirmPassword.error:""))),s.a.createElement("div",{className:"form-group text-center mt-4"},s.a.createElement("button",{className:"btn btn-success mr-2",type:"submit"},"Register"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.props.close},"Cancel")))}}]),t}(n.Component),Ut=Object(G.g)(Object(f.connect)(null,function(e){return{signupUser:function(t,a,n){e(function(e,t,a){return function(n,s){return fetch(g+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){e.ok?t&&t():v(e,function(e){a&&a(e)})},function(e){throw e}).catch(function(e){a&&a(e)})}}(t,a,n))},loginUser:function(t,a,n){e(C(t,a,n))}}})(Ft)),St=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleBlurForm=function(e){var t=e.target.name,n=a.state.form;n.fields[t].touched=!0,n.touched=!0,n=a.validateForm(n),a.setState({form:n})},a.state={form:{fields:{username:{value:""},dateOfBirth:{value:""},city:{value:""},country:{value:""},password:{value:"",visible:""},confirmPassword:{value:"",visible:""}},valid:!1,touched:!1}},a.handleInputChangeForm=a.handleInputChangeForm.bind(Object(h.a)(a)),a.handleSubmitForm=a.handleSubmitForm.bind(Object(h.a)(a)),a.handleBlurForm=a.handleBlurForm.bind(Object(h.a)(a)),a.togglePasswordVisibility=a.togglePasswordVisibility.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("RegisterComponent.componentDidMount",this.props)}},{key:"handleInputChangeForm",value:function(e){var t=e.target,a=t.value,n=t.name,s=this.state.form;s.fields[n].value=a,s=this.validateForm(s),this.setState({form:s})}},{key:"togglePasswordVisibility",value:function(e){var t=this.state.form;t.fields[e].visible=!t.fields[e].visible,this.setState({form:t})}},{key:"handleSubmitForm",value:function(e){var t=this;e.preventDefault();var a=this.state.form;if(a.touched){if(!a.valid){for(var n in a.fields)a.fields[n].touched=!0;return a.touched=!0,this.setState({form:a}),void K.error("Please correct the errors on this form.")}}else{for(var s in a.fields)a.fields[s].touched=!0;if(a.touched=!0,a=this.validateForm(a),this.setState({form:a}),!a.valid)return void K.error("Please correct the errors on this form.")}this.props.loginUser({username:this.state.form.fields.username.value,password:this.state.form.fields.password.value},function(){t.props.close()},function(e){K.error(e.message)})}},{key:"validateForm",value:function(e){for(var t in e.fields)e.fields[t].error=null;return e.valid=!0,je(e.fields.username.value)||(e.valid=!1,e.fields.username.error="Username is required."),je(e.fields.password.value)||(e.valid=!1,e.fields.password.error="Password is required."),e}},{key:"showFormFieldError",value:function(e){return this.state.form.fields[e].error&&this.state.form.fields[e].touched}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"",noValidate:!0,onSubmit:this.handleSubmitForm},s.a.createElement("h2",{className:"text-center text-primary my-2"},"Log In"),s.a.createElement("hr",{className:"mb-4"}),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"font-weight-bold"},"Username"),s.a.createElement("input",{className:"form-control "+(this.showFormFieldError("username")?"is-invalid":""),type:"text",placeholder:"Username",name:"username",value:this.state.form.fields.username.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm}),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("username")?this.state.form.fields.username.error:"")),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"font-weight-bold"},"Password"),s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control "+(this.showFormFieldError("password")?"is-invalid":""),type:this.state.form.fields.password.visible?"text":"password",placeholder:"Password",name:"password",value:this.state.form.fields.password.value,onChange:this.handleInputChangeForm,onBlur:this.handleBlurForm}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement("span",{className:"input-group-text"},s.a.createElement("i",{className:this.state.form.fields.password.visible?"fas fa-eye-slash":"fas fa-eye",style:{cursor:"pointer"},onClick:function(){return e.togglePasswordVisibility("password")}}))),s.a.createElement("div",{className:"invalid-feedback"},this.showFormFieldError("password")?this.state.form.fields.password.error:""))),s.a.createElement("div",{className:"form-group text-center mt-4"},s.a.createElement("button",{className:"btn btn-info mr-2",type:"submit"},"Log In"),s.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.props.close},"Cancel")))}}]),t}(n.Component),At=Object(G.g)(Object(f.connect)(null,function(e){return{loginUser:function(t,a,n){e(C(t,a,n))}}})(St)),xt=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={modal:{show:!1,type:""}},a.showModal=a.showModal.bind(Object(h.a)(a)),a.hideModal=a.hideModal.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("MainComponent.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("MainComponent.componentWillUnmount")}},{key:"showModal",value:function(e){this.setState({modal:Object(l.a)({},this.state.modal,{show:!0,type:e})})}},{key:"hideModal",value:function(){console.log("MainComponent.hideModal"),this.setState({modal:Object(l.a)({},this.state.modal,{show:!1})})}},{key:"render",value:function(){var e=this;console.log("render main component");var t=function(t){var a=t.render,n=Object(i.a)(t,["render"]);return s.a.createElement(G.c,Object.assign({},n,{render:e.props.isAuthenticated?a:function(e){return s.a.createElement(G.b,{to:{pathname:"/home",state:{from:e.location}}})}}))};return s.a.createElement("div",{className:"Main"},s.a.createElement(se,{showModal:this.showModal}),s.a.createElement(G.e,null,s.a.createElement(G.c,{path:"/home",component:function(){return s.a.createElement(Y,{signupUser:e.props.signupUser})}}),s.a.createElement(G.c,{exact:!0,path:"/search",render:function(t){return s.a.createElement(bt,{showModal:e.showModal})}}),s.a.createElement(G.c,{exact:!0,path:"/posts/:id",render:function(e){return s.a.createElement(ht,null)}}),s.a.createElement(t,{path:"/posts/:id/edit",render:function(e){return s.a.createElement(kt,null)}}),s.a.createElement(t,{path:"/likedPosts",render:function(e){return s.a.createElement(Nt,null)}}),s.a.createElement(t,{path:"/userPosts/:id",render:function(e){return s.a.createElement(Ot,null)}}),s.a.createElement(G.c,{path:"/members/:id",render:function(e){return s.a.createElement(Be,null)}}),s.a.createElement(t,{path:"/member/edit",render:function(e){return s.a.createElement(He,null)}}),s.a.createElement(t,{path:"/messages",render:function(e){return s.a.createElement($e,null)}}),s.a.createElement(t,{path:"/lists",render:function(e){return s.a.createElement(he,null)}}),s.a.createElement(t,{path:"/createPost",render:function(e){return s.a.createElement(ct,null)}}),s.a.createElement(G.b,{to:"/home"})),s.a.createElement(jt.a,{show:this.state.modal.show,onHide:this.hideModal,animation:!0,backdrop:"static",centered:!0,scrollable:!0},s.a.createElement(jt.a.Body,{className:"mx-4"},"login"==this.state.modal.type?s.a.createElement(At,{close:this.hideModal}):null,"register"==this.state.modal.type?s.a.createElement(Ut,{close:this.hideModal}):null)))}}]),t}(n.Component),It=Object(G.g)(Object(f.connect)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{}})(xt)),Bt=a(53),Dt=a(236),Mt=a(237),Lt=a.n(Mt),Tt=Object(Bt.createStore)(Object(Bt.combineReducers)({values:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,values:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALUES_LOADING":return Object(l.a)({},e,{isLoading:!0,errMess:null,values:[]});case"ADD_VALUES":return Object(l.a)({},e,{isLoading:!1,errMess:null,values:t.payload});case"VALUES_FAILED":return Object(l.a)({},e,{isLoading:!1,errMess:t.payload,values:[]});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e={isRequestingLogin:!1,errMessLogin:null,isAuthenticated:!1,token:null,decodedToken:null,user:null,isRequestingLogout:!1},t=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("user"));if(null!=t&&null!=a){var n=y()(t);"undefined"===typeof n.exp||n.exp>Date.now().valueOf()/1e3?(e.token=t,e.decodedToken=n,e.isAuthenticated=!0,e.user=a):(localStorage.removeItem("token"),localStorage.removeItem("user"))}return e}(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(l.a)({},e,{isRequestingLogin:!0,errMessLogin:null,isAuthenticated:!1,token:null,decodedToken:null,user:null});case"LOGIN_SUCCESS":return Object(l.a)({},e,{isRequestingLogin:!1,errMessLogin:null,isAuthenticated:!0,token:t.token,decodedToken:y()(t.token),user:t.user});case"LOGIN_FAILURE":return Object(l.a)({},e,{isRequestingLogin:!1,errMessLogin:t.message,isAuthenticated:!1,token:null,decodedToken:null,user:null});case"LOGOUT_REQUEST":return Object(l.a)({},e,{isRequestingLogout:!0});case"LOGOUT_SUCCESS":return Object(l.a)({},e,{isRequestingLogout:!1,isAuthenticated:!1,token:null,decodedToken:null});case"SET_USER_MAIN_PHOTO_URL":return Object(l.a)({},e,{user:Object(l.a)({},e.user,{mainPhotoUrl:t.url})});case"ADD_AUTH_USER":return Object(l.a)({},e,{user:t.user});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,errMess:null,users:[],usersDetails:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LOADING":return Object(l.a)({},e,{isLoading:!0,errMess:null,users:[]});case"ADD_USERS":return Object(l.a)({},e,{isLoading:!1,errMess:null,users:t.payload});case"USERS_FAILED":return Object(l.a)({},e,{isLoading:!1,errMess:t.payload,users:[]});case"ADD_USER":var a=e.usersDetails,n=a.findIndex(function(e){return e.id==t.user.id});return-1==n?a.push(t.user):a[n]=t.user,Object(l.a)({},e,{usersDetails:a});default:return e}}}),Object(Bt.applyMiddleware)(Dt.a,Lt.a)),Rt=a(238),_t=a.n(Rt),qt=["".concat("52.26.229.94",":").concat("5000")],Vt=["".concat("52.26.229.94",":").concat("5000","/api/auth")];_t.a.register({request:function(e,t){var a=e.replace(/(^\w+:|^)\/\//,"");if(1==Tt.getState().auth.isAuthenticated){for(var n=!1,s=0,r=qt;s<r.length;s++){var o=r[s];if(-1!=a.indexOf(o)){n=!0;break}}if(n)for(var i=0,l=Vt;i<l.length;i++){var c=l[i];if(-1!=a.indexOf(c)){n=!1;break}}n&&(null==t&&(t={}),null==t.headers&&(t.headers={}),t.headers.Authorization="bearer "+Tt.getState().auth.token)}return[e,t]},requestError:function(e){return Promise.reject(e)},response:function(e){return e},responseError:function(e){return Promise.reject(e)}});var Jt=function(){return s.a.createElement(f.Provider,{store:Tt},s.a.createElement(ee.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(It,null),s.a.createElement(ie,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(446),a(447),a(448),a(449),a(450),a(451),a(452);o.a.render(s.a.createElement(Jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,t,a){e.exports={imgCardSide:"PostsComponent_imgCardSide__3afKU",divPost:"PostsComponent_divPost__Rn3DB"}},61:function(e,t,a){e.exports={table:"MessagesComponent_table__3zW3d",imgCircle:"MessagesComponent_imgCircle__1WpO0",td:"MessagesComponent_td__1bIQK"}},78:function(e,t,a){e.exports={imgThumbnail:"CreatePostComponent_imgThumbnail__3oHw6",labelInputImage:"CreatePostComponent_labelInputImage__10aNz",isInvalid:"CreatePostComponent_isInvalid__1bxop"}},81:function(e,t,a){e.exports={card:"MemberMessagesComponent_card__1S5uI",chat:"MemberMessagesComponent_chat__3E6x2",roundedCircle:"MemberMessagesComponent_roundedCircle__12ldk",cardBody:"MemberMessagesComponent_cardBody__DkLPn"}},95:function(e,t,a){e.exports={dropdownToggle:"HeaderComponent_dropdownToggle__1_QCU",dropdownItem:"HeaderComponent_dropdownItem__3CnDJ",imgUser:"HeaderComponent_imgUser__3Doy_"}},96:function(e,t,a){e.exports={card:"MemberCardComponent_card__1xBF3",cardImgWrapper:"MemberCardComponent_cardImgWrapper__1jQZl",memberIcons:"MemberCardComponent_memberIcons__2RG7_",animate:"MemberCardComponent_animate__Xfzsi"}}},[[240,1,2]]]);
//# sourceMappingURL=main.2546b765.chunk.js.map