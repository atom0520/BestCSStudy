{"version":3,"sources":["components/HomeComponent.module.scss","components/MemberDetailsComponent.module.scss","components/MemberEditComponent.module.scss","components/PostDetailsComponent.module.scss","components/FooterComponent.module.scss","components/PhotoEditorComponent.module.scss","logo.svg","shared/img/user.png","shared/baseUrl.js","shared/config.js","shared/global.js","redux/ActionCreators.js","redux/ActionTypes.js","components/LoadingComponent.js","services/AlertifyService.js","components/HomeComponent.js","components/HeaderComponent.js","components/FooterComponent.js","components/member/MemberCardComponent.js","components/ListsComponent.js","components/member/MemberListComponent.js","shared/validators.js","components/member/MemberMessagesComponent.js","components/MemberDetailsComponent.js","components/PhotoUploaderComponent.js","components/PhotoEditorComponent.js","components/MemberEditComponent.js","components/MessagesComponent.js","components/PostFormComponent.js","components/CreatePostComponent.js","components/PostDetailsComponent.js","components/PostsComponent.js","components/EditPostComponent.js","components/LikedPostsComponent.js","components/UserPostsComponent.js","components/RegisterComponent.js","components/LoginComponent.js","components/MainComponent.js","redux/store.js","redux/values.js","redux/auth.js","redux/users.js","shared/fetchIntercept.js","App.js","serviceWorker.js","index.js","components/PostsComponent.module.scss","components/MessagesComponent.module.scss","components/CreatePostComponent.module.scss","components/member/MemberMessagesComponent.module.scss","components/HeaderComponent.module.scss","components/member/MemberCardComponent.module.scss"],"names":["module","exports","background","center","imageGallery","cardBody","cardFooter","imgAuthor","btnLike","active","btnDislike","pDescription","footer","imgThumbnail","__webpack_require__","p","baseUrl","concat","handleFetchResponseNotOkError","response","onError","status","applicationError","headers","get","Error","clone","json","then","responseBodyJson","modalStateErrors","errors","errMess","key","catch","error","text","responseBodyText","statusText","String","prototype","toTitleCase","this","replace","txt","charAt","toUpperCase","substr","toLowerCase","Array","findIndex","filter","index","length","postCategoryOptions","value","display","genderOptions","defaultTags","loginError","message","type","loginUser","creds","onSuccess","dispatch","fetch","method","Content-Type","body","JSON","stringify","ok","console","log","token","user","localStorage","setItem","fetchUsers","pageNumber","pageSize","userParams","getState","usersLoading","params","minAge","maxAge","gender","orderBy","likers","likees","query","Object","keys","map","k","join","users","addUsers","paginationHeader","pagination","parse","usersFailed","errmess","payload","fetchUser","id","addUser","fetchPost","post","setUserMainPhotoUrl","url","auth","sendLike","recipientId","likePost","userId","postId","cancelLikedPost","dislikePost","cancelDislikedPost","fetchAuthUser","addAuthUser","fetchTags","tagParams","maxReturnNumber","minCount","tags","Loading","props","react_default","a","createElement","className","alertifyService","AlertifyService","classCallCheck","okCallback","alertify","confirm","e","success","warning","Home","_this","possibleConstructorReturn","getPrototypeOf","call","state","postParams","category","search","trendingTags","onClickTagButton","bind","assertThisInitialized","handleInputChangePostParamsForm","handleSubmitPostParamsForm","_this2","setTimeout","tag","i","indexOf","push","setState","event","target","name","objectSpread","defineProperty","history","pathname","preventDefault","_this3","styles","noValidate","placeholder","onChange","style","borderRadius","onClick","Component","withRouter","connect","Header","handleClickEditProfileLink","handleClickLogoutLink","isAuthenticated","logoutUser","react_router_dom","to","activeClassName","Dropdown","imgUser","src","mainPhotoUrl","ImgUser","alt","Toggle","as","dropdownToggle","decodedToken","unique_name","Menu","Item","dropdownItem","showModal","removeItem","Footer","MemberCard","card","cardImgWrapper","photoUrl","knownAs","memberIcons","animate","handleClickLikeButton","age","city","Lists","currentPage","itemsPerPage","totalItems","totalPages","handleChangePage","handleToggleUsersParams","handleClickLikeUserButton","pageIndex","loadUsers","param","_this4","recipient","authUser","_this5","paginationItems","_loop","Pagination","MemberCardComponent","First","disabled","Prev","Next","Last","orderByOptions","MemberList","resetFilter","handleInputChangeUsersParamsForm","handleSubmitUsersParamsForm","onSubmit","width","marginLeft","required","val","maxLength","len","minLength","MemberMessages","messages","newMessage","content","handleInputChangeNewMessage","handleSendNewMessage","loadMessages","fetchMessageThread","isRead","markMessageAsRead","sendMessage","chat","senderId","senderPhotoUrl","senderKnownAs","roundedCircle","react_timeago_lib_default","date","messageSent","live","onBlur","messageId","MemberDetails","initTab","queryString","location","tab","match","Date","dateOfBirth","valueOf","photos","photo","original","thumbnail","username","lastActive","created","toLocaleDateString","year","month","day","hour","minute","Tabs","activeKey","onSelect","Tab","eventKey","title","introduction","country","image_gallery_default","items","showPlayButton","showFullscreenButton","useBrowserFullscreen","dropzoneStyle","flex","flexDirection","alignItems","padding","borderWidth","borderColor","borderStyle","backgroundColor","color","outline","transition","dropzoneStyleActive","dropzoneStyleAccept","dropzoneStyleReject","PhotoUploader","onDrop","useCallback","acceptedFiles","handleDroppedFiles","_useDropzone","useDropzone","accept","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","files","file","path","size","handleUploadFile","isUploadingPhoto","handleRemoveFile","LoadingComponent_Loading","PhotoEditor","uploadUserPhoto","nameid","res","description","dateAdded","isMain","handleUploadedPhoto","handleSetMainPhoto","toConsumableArray","splice","setMainPhoto","photoId","setUserMainPhoto","handleDeletePhoto","deleteUserPhoto","handleDeletedPhoto","PhotoUploaderComponent","formData","FormData","append","MemberEdit","handleBlurProfileForm","form","profileForm","fields","touched","validateProfileForm","valid","dirty","handleInputChangeProfileForm","handleSubmitProfileForm","handleBeforeunload","window","addEventListener","removeEventListener","returnValue","isArray","forEach","element","test","_this6","updateUser","react_router","when","defaultActiveKey","showFormFieldError","PhotoEditorComponent","Messages","messageContainer","handleChangeMessageContainer","deleteMessage","fetchMessages","table","cursor","td","recipientPhotoUrl","imgCircle","recipientKnownAs","stopPropagation","PostForm","onInputAcceptedImage","acceptedFile","images","reader","FileReader","onload","result","validateForm","readAsDataURL","onInputRejectedImage","rejectedFiles","rejectedFile","handleRemoveImage","mainImage","setMainImage","handleBlurForm","links","isUploadingImage","suggestedTags","handleInputChangeTags","handleFormArrayFieldChange","handleFormArrayFieldBlur","onClickAddLinkButton","onClickRemoveLinkButton","onImageFileDialogCancel","tagsInputProps","handleInputChangeForm","handleSubmitForm","link","postImages","image","Set","args","tagComponents","inputComponent","addTag","_ref","objectWithoutProperties","inputValue","trim","inputLength","suggestions","slice","dist_default","ref","shouldRenderSuggestions","getSuggestionValue","suggestion","renderSuggestion","inputProps","_ref2","newValue","onSuggestionSelected","_ref3","onSuggestionsClearRequested","onSuggestionsFetchRequested","encodedLinkValues","encodeURIComponent","onSubmitPost","react_tagsinput_default","renderInput","autocompleteRenderInput","renderLayout","tagsInputRenderLayout","showFormArrayFieldError","dist_es","onFileDialogCancel","onDropAccepted","onDropRejected","noDrag","_ref4","assign","htmlFor","tabIndex","labelInputImage","isInvalid","CreatePost","encodedLinks","createPost","PostFormComponent","PostDetails","onClickLikeButton","onClickDislikeButton","onClickEditButton","split","decodeURIComponent","isPostLiked","likerId","dislikers","dislikerId","_this7","isPostDisliked","postImage","author","updated","href","Posts","posts","handleLikePost","onClickPost","onClickEditPostButton","loadPosts","postIndex","includes","authUserLikerIndex","authUserDislikerIndex","fetchPosts","divPost","imgCardSide","mainPostImageUrl","substring","handleDislikePost","EditPost","onClickCancelButton","Number","goBack","deletedImages","addedImages","addedImageStartIndex","updatePost","Fragment","LikedPosts","fetchLikedPosts","UserPosts","fetchUserPosts","Register","password","visible","confirmPassword","togglePasswordVisibility","signupUser","close","autoComplete","Login","Main","modal","show","hideModal","AuthGuardedRoute","render","rest","from","HeaderComponent","component","HomeComponent","exact","PostsComponent","components_PostDetailsComponent","EditPostComponent","LikedPostsComponent","UserPostsComponent","MemberDetailsComponent","MemberEditComponent","MessagesComponent","ListsComponent","components_CreatePostComponent","Modal","onHide","animation","backdrop","centered","scrollable","Body","LoginComponent","RegisterComponent","store","createStore","combineReducers","values","arguments","undefined","isLoading","action","initAuthState","isRequestingLogin","errMessLogin","isRequestingLogout","getItem","JwtDecode","exp","now","usersDetails","userDetailsIndex","userDetails","applyMiddleware","thunk","logger","jwtWhiteListedDomains","jwtBlackListedDomains","fetchIntercept","register","request","config","domain","jwtRequired","_i","_jwtWhiteListedDomain","jwtWhiteListedDomain","_i2","_jwtBlackListedDomain","jwtBlackListedDomain","requestError","Promise","reject","responseError","App","es","MainComponent","FooterComponent","Boolean","hostname","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2546b765.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"background\":\"HomeComponent_background__AkaY1\",\"center\":\"HomeComponent_center__6v_s_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"MemberDetailsComponent_imageGallery__AZ8KE\",\"cardBody\":\"MemberDetailsComponent_cardBody__2Bmom\",\"cardFooter\":\"MemberDetailsComponent_cardFooter__tO1jf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardBody\":\"MemberEditComponent_cardBody__3OLFD\",\"cardFooter\":\"MemberEditComponent_cardFooter__2I64y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgAuthor\":\"PostDetailsComponent_imgAuthor__18KAm\",\"btnLike\":\"PostDetailsComponent_btnLike__3ZaW8\",\"active\":\"PostDetailsComponent_active__j2a_W\",\"btnDislike\":\"PostDetailsComponent_btnDislike__2lnHy\",\"pDescription\":\"PostDetailsComponent_pDescription__2J1co\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"FooterComponent_footer__3CaNI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgThumbnail\":\"PhotoEditorComponent_imgThumbnail__3Hr55\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","module.exports = \"data:image/png;base64,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\"","import { serverIP, serverPort } from './config';\r\n\r\nexport const baseUrl = `http://${serverIP}:${serverPort}/api/`;","export const serverIP = \"52.26.229.94\";\r\nexport const serverPort = \"5000\";\r\nexport const debug = true;","import { debug } from './config';\r\n\r\nexport const handleFetchResponseNotOkError = (response, onError) => {\r\n    if(response.status == '401'){\r\n        onError(new Error(response.statusText));\r\n        return;\r\n    }\r\n\r\n    const applicationError = response.headers.get('Application-Error');\r\n    if(applicationError){\r\n        onError(new Error(applicationError));\r\n        return;\r\n    }\r\n\r\n    response.clone().json()\r\n    .then(responseBodyJson=>{\r\n\r\n        const modalStateErrors = responseBodyJson.errors;\r\n\r\n        var errMess = '';\r\n        if(modalStateErrors && typeof(modalStateErrors) == 'object'){\r\n            for(const key in modalStateErrors){\r\n                if(modalStateErrors[key]){\r\n                    errMess += modalStateErrors[key] + '\\n';\r\n                }\r\n            }\r\n\r\n            onError(new Error(errMess));\r\n            return;\r\n        }else{\r\n\r\n            onError(new Error(modalStateErrors || 'Server Error'));\r\n            return;\r\n        }\r\n    })\r\n    .catch(error=>{\r\n\r\n        response.clone().text()\r\n        .then(responseBodyText=>{\r\n            throw new Error(responseBodyText);\r\n        })\r\n        .catch(error=>{\r\n            throw error;\r\n        })\r\n        .catch(error=>{\r\n            onError(error);\r\n            return;\r\n        });\r\n    });\r\n};\r\n\r\nString.prototype.toTitleCase = function () {\r\n    return this.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n};\r\n\r\nArray.prototype.findIndex = function (filter) {\r\n    for(let index=0; index < this.length; index++){\r\n        if(filter(this[index])){\r\n            return index;\r\n        }\r\n    }\r\n\r\n    return -1;\r\n};\r\n\r\nexport const postCategoryOptions = [\r\n    {value:'books', display:'Books'}, \r\n    {value:'mooc', display:'MOOC'},\r\n    {value:'articles', display:'Articles'},\r\n    {value:'videos', display:'Videos'},\r\n    {value:'others', display:'Others'},\r\n];\r\n\r\nexport const genderOptions = [\r\n    {value:'male', display:'Male'}, \r\n    {value:'female', display:'Female'}\r\n];\r\n\r\nexport const defaultTags =[\r\n    \"web development\",\r\n    \"machine learning\",\r\n    \"deep learning\",\r\n    \"game development\",\r\n    \"virtual reality\",\r\n    \"augmented reality\",\r\n    \"data structure\"\r\n];\r\n\r\nexport const defaultDatetimeValue = -62135571604000;\r\n\r\nif (!debug) {\r\n    console = console || {};\r\n    console.log = function(){};\r\n}\r\n\r\nexport const maxPostListDescriptionDisplayLength = 200;","import * as ActionTypes from './ActionTypes';\r\nimport { VALUES } from '../shared/values';\r\nimport { baseUrl } from '../shared/baseUrl';\r\n\r\nimport { handleFetchResponseNotOkError } from '../shared/global';\r\n\r\nimport JwtDecode from 'jwt-decode';\r\n\r\nexport const fetchValues = (onSuccess, onError) => (dispatch) => {\r\n    console.log('fetchValues');\r\n\r\n    dispatch(valuesLoading(true));\r\n\r\n    // setTimeout(() => {\r\n    //     dispatch(addValues(VALUES));\r\n    // }, 2000);\r\n    return fetch(baseUrl + 'values')\r\n    .then(response => {\r\n        console.log(response);\r\n        if(response.ok){\r\n            return response;\r\n        } else {\r\n            var error = new Error('Error ' + response.status + ': ' + response.statusText);\r\n            error.response = response;\r\n            throw error;\r\n        }\r\n    },\r\n    error => {\r\n        var errmess = new Error(error.message);\r\n        throw errmess;\r\n    })\r\n    .then(response => response.json())\r\n    .then(values => {\r\n        dispatch(addValues(values));\r\n        if(onSuccess){\r\n            onSuccess(values);\r\n        }\r\n    })\r\n    .catch(error => {\r\n        dispatch(valuesFailed(error.message));\r\n        if(onError){\r\n            onSuccess(onError);\r\n        }\r\n    });\r\n}\r\n\r\nexport const valuesLoading = () => ({\r\n    type: ActionTypes.VALUES_LOADING\r\n});\r\n\r\nexport const valuesFailed = (errmess) => ({\r\n    type: ActionTypes.VALUES_FAILED,\r\n    payload: errmess\r\n});\r\n\r\nexport const addValues = (values) => ({\r\n    type: ActionTypes.ADD_VALUES,\r\n    payload: values\r\n});\r\n\r\nexport const requestLogin = () => {\r\n    return {\r\n        type: ActionTypes.LOGIN_REQUEST\r\n    }\r\n}\r\n\r\nexport const loginSuccess = (token, user) => {\r\n    return {\r\n        type: ActionTypes.LOGIN_SUCCESS,\r\n        token: token,\r\n        user: user\r\n    }\r\n}\r\n\r\nexport const loginError = (message) => {\r\n    return {\r\n        type: ActionTypes.LOGIN_FAILURE,\r\n        message\r\n    }\r\n}\r\n\r\n// export const loadLocalToken = (onSuccess) => (dispatch) => {\r\n//     const token = localStorage.getItem('token');\r\n//     if(token != null){\r\n//         const decodedToken = JwtDecode(token);\r\n//         if (typeof decodedToken.exp === 'undefined' || decodedToken.exp > Date.now().valueOf() / 1000) {\r\n//             dispatch(receiveLogin(token, decodedToken));\r\n//             if(onSuccess){\r\n//                 onSuccess(token);\r\n//             }\r\n//         }\r\n//         else{\r\n//             localStorage.removeItem('token');\r\n//             if(onSuccess){\r\n//                 onSuccess(null);\r\n//             }\r\n//         }\r\n//     }else{\r\n//         if(onSuccess){\r\n//             onSuccess(null);\r\n//         }\r\n//     }\r\n// };\r\n\r\nexport const loginUser = (creds, onSuccess, onError) => (dispatch) => {\r\n\r\n    dispatch(requestLogin());\r\n\r\n    return fetch(baseUrl + 'auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(creds)\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n\r\n                response.json()\r\n                .then(responseBodyJson=>{\r\n                    console.log(responseBodyJson);\r\n                    if(responseBodyJson.token){\r\n                        localStorage.setItem('token', responseBodyJson.token);\r\n                        localStorage.setItem('user', JSON.stringify(responseBodyJson.user));\r\n                        dispatch(loginSuccess(responseBodyJson.token, responseBodyJson.user));\r\n\r\n                        if(onSuccess){\r\n                            onSuccess();\r\n                        }\r\n                        \r\n                    }else{\r\n          \r\n                        throw new Error('Error ' + response.status + ': ' + response.statusText);\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n\r\n                    dispatch(loginError(error.message));\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n           \r\n                    dispatch(loginError(error.message));\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{          \r\n            throw error;\r\n    })\r\n    .catch(error=>{\r\n\r\n        dispatch(loginError(error.message));\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n};\r\n\r\nexport const requestLogout = () => {\r\n    return {\r\n        type: ActionTypes.LOGOUT_REQUEST\r\n    }\r\n}\r\n\r\nexport const logoutSuccess = () => {\r\n    return {\r\n        type: ActionTypes.LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\nexport const logoutUser = (onSuccess, onError) => (dispatch) => {\r\n\r\n    dispatch(requestLogout());\r\n\r\n    localStorage.removeItem('token');\r\n\r\n    dispatch(logoutSuccess());\r\n\r\n    if(onSuccess){\r\n        onSuccess();\r\n    }\r\n}\r\n\r\n// export const requestSignup = (creds) => {\r\n//     return {\r\n//         type: ActionTypes.SIGNUP_REQUEST\r\n//     }\r\n// }\r\n\r\n// export const signupSuccess = (response) => {\r\n//     return {\r\n//         type: ActionTypes.SIGNUP_SUCCESS\r\n//     }\r\n// }\r\n\r\n// export const signupError = (message) => {\r\n//     return {\r\n//         type: ActionTypes.SIGNUP_FAILURE,\r\n//         message\r\n//     }\r\n// }\r\n\r\nexport const signupUser = (creds, onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    return fetch(baseUrl + 'auth/register', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(creds)\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n}\r\n\r\n// unregister();\r\n\r\n\r\nexport const fetchUsers = (pageNumber, pageSize, userParams, \r\n    onSuccess, onError) => (dispatch, getState) => {\r\n    console.log('fetchUsers');\r\n\r\n    dispatch(usersLoading());\r\n\r\n    let params = {};\r\n\r\n    if(pageNumber!=null) params['pageNumber']=pageNumber;\r\n\r\n    if(pageSize!=null) params['pageSize']=pageSize;\r\n\r\n    if(userParams!=null){\r\n        if(userParams.minAge != null) params['minAge']=userParams.minAge;\r\n        if(userParams.maxAge != null) params['maxAge']=userParams.maxAge;\r\n        if(userParams.gender != null) params['gender']=userParams.gender;\r\n        if(userParams.orderBy != null) params['orderBy']=userParams.orderBy;\r\n        if(userParams.likers != null) params['likers']=userParams.likers;\r\n        if(userParams.likees != null) params['likees']=userParams.likees;\r\n    }\r\n\r\n    let query = Object.keys(params)\r\n        .map(k => k + '=' + params[k])\r\n        .join('&');\r\n\r\n    return fetch(baseUrl + 'users?' + query)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(users => {\r\n                dispatch(addUsers(users));\r\n\r\n                let paginationHeader = response.headers.get('Pagination');\r\n                let pagination = null;\r\n                if(paginationHeader){\r\n                    pagination = JSON.parse(paginationHeader);\r\n                }\r\n\r\n                if(onSuccess){\r\n                    onSuccess(users, pagination);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                dispatch(usersFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                dispatch(usersFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        dispatch(usersFailed(error.message));\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchPosts = (pageNumber, pageSize, postParams, \r\n    onSuccess, onError) => (dispatch, getState) => {\r\n    console.log('fetchPosts');\r\n\r\n    // dispatch(postsLoading());\r\n\r\n    let params = {};\r\n\r\n    if(pageNumber!=null) params['pageNumber']=pageNumber;\r\n\r\n    if(pageSize!=null) params['pageSize']=pageSize;\r\n\r\n    if(postParams!=null){\r\n        if(postParams.category != null) params['category']=postParams.category;\r\n        if(postParams.search != null) params['search']=postParams.search;\r\n        if(postParams.orderBy != null) params['orderBy']=postParams.orderBy;\r\n    }\r\n\r\n    let query = Object.keys(params)\r\n        .map(k => k + '=' + params[k])\r\n        .join('&');\r\n\r\n    return fetch(baseUrl + 'posts?' + query)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(posts => {\r\n                // dispatch(addPosts(posts));\r\n\r\n                let paginationHeader = response.headers.get('Pagination');\r\n                let pagination = null;\r\n                if(paginationHeader){\r\n                    pagination = JSON.parse(paginationHeader);\r\n                }\r\n\r\n                if(onSuccess){\r\n                    onSuccess(posts, pagination);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        // dispatch(postsFailed(error.message));\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const usersLoading = () => ({\r\n    type: ActionTypes.USERS_LOADING\r\n});\r\n\r\n// export const postsLoading = () => ({\r\n//     type: ActionTypes.POSTS_LOADING\r\n// });\r\n\r\nexport const usersFailed = (errmess) => ({\r\n    type: ActionTypes.USERS_FAILED,\r\n    payload: errmess\r\n});\r\n\r\n// export const postsFailed = (errmess) => ({\r\n//     type: ActionTypes.POSTS_FAILED,\r\n//     payload: errmess\r\n// });\r\n\r\nexport const addUsers = (users) => ({\r\n    type: ActionTypes.ADD_USERS,\r\n    payload: users\r\n});\r\n\r\n// export const addPosts = (posts) => ({\r\n//     type: ActionTypes.ADD_POSTS,\r\n//     payload: posts\r\n// });\r\n\r\nexport const fetchUser = (id, onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    return fetch(baseUrl + 'users/' + id)\r\n    .then(response => {\r\n        \r\n        if(response.ok){\r\n            response.json()\r\n            .then(user => {\r\n                dispatch(addUser(user));\r\n                if(onSuccess){\r\n                    onSuccess(user);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        \r\n        if(onError){\r\n            onError(onError);\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchPost = (id, onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    return fetch(baseUrl + 'posts/' + id)\r\n    .then(response => {\r\n        if(response.ok){\r\n            response.json()\r\n            .then(post => {\r\n                // dispatch(addUser(user));\r\n                if(onSuccess){\r\n                    onSuccess(post);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        \r\n        if(onError){\r\n            onError(onError);\r\n        }\r\n    });\r\n}\r\n\r\nexport const addUser = (user) => ({\r\n    type: ActionTypes.ADD_USER,\r\n    user\r\n});\r\n\r\nexport const updateUser = (id, user, onSuccess, onError) => (dispatch) => {\r\n    return fetch(baseUrl + 'users/'+id, {\r\n        method: 'PUT',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const uploadUserPhoto = (userId, file, onSuccess, onError) => (dispatch) => {\r\n    let formData = new FormData();\r\n    formData.append('File', file);\r\n\r\n    return fetch(baseUrl + `users/${userId}/photos`, {\r\n        method: 'POST',\r\n        // headers: {\r\n        //     'Content-Type': 'application/json'\r\n        // },\r\n        body: formData\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                response.json()\r\n                .then(responseBodyJson=>{\r\n                    if(onSuccess){\r\n                        onSuccess(responseBodyJson);\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const setUserMainPhotoUrl = (url) => (dispatch, getState) =>{\r\n    dispatch ({\r\n        type: ActionTypes.SET_USER_MAIN_PHOTO_URL,\r\n        url,\r\n    });\r\n\r\n    localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n}\r\n\r\nexport const setUserMainPhoto = (userId, photoId, onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/photos/${photoId}/setMain`, {\r\n        method: 'POST'\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                response.json()\r\n                .then(photo=>{\r\n\r\n                    dispatch(setUserMainPhotoUrl(photo.url));\r\n              \r\n\r\n                    if(onSuccess){\r\n                        onSuccess();\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const deleteUserPhoto = (userId, photoId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/photos/${photoId}`, {\r\n        method: 'DELETE'\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const sendLike = (id, recipientId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${id}/like/${recipientId}`, {\r\n        method: 'POST',\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const fetchMessages = (id, pageNumber, pageSize, messageContainer, onSuccess, onError) => (dispatch) => {\r\n\r\n    let params = {};\r\n\r\n    if(pageNumber!=null) params['pageNumber']=pageNumber;\r\n\r\n    if(pageSize!=null) params['pageSize']=pageSize;\r\n\r\n    if(messageContainer!=null) params['messageContainer']=messageContainer;\r\n\r\n    let query = Object.keys(params)\r\n    .map(k => k + '=' + params[k])\r\n    .join('&');\r\n\r\n    return fetch(baseUrl + `users/${id}/messages?${query}`)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(messages => {\r\n                let paginationHeader = response.headers.get('Pagination');\r\n                let pagination = null;\r\n                if(paginationHeader){\r\n                    pagination = JSON.parse(paginationHeader);\r\n                }\r\n\r\n                if(onSuccess){\r\n                    onSuccess(messages, pagination);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n};\r\n\r\nexport const fetchMessageThread = (id, recipientId, onSuccess, onError) => (dispatch) =>{\r\n    return fetch(baseUrl + `users/${id}/messages/thread/${recipientId}`)\r\n    .then(response => {\r\n        if(response.ok){\r\n            response.json()\r\n            .then(messages => {\r\n                if(onSuccess){\r\n                    onSuccess(messages);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const sendMessage = (id, message, onSuccess, onError) => (dispatch) => {\r\n    return fetch(baseUrl + `users/${id}/messages`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(message)\r\n    })\r\n    .then(response => {\r\n        if(response.ok){\r\n\r\n            response.json()\r\n            .then(message => {\r\n                if(onSuccess){\r\n                    onSuccess(message);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const deleteMessage = (id, userId, onSuccess, onError) => (dispatch) => {\r\n    return fetch(baseUrl + `users/${userId}/messages/${id}/delete`, {\r\n        method: 'POST'\r\n    })\r\n    .then(response => {\r\n        if(response.ok){\r\n            if(onSuccess){\r\n                onSuccess();\r\n            }\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const markMessageAsRead = (userId, messageId, onSuccess, onError) => (dispatch) => {\r\n    return fetch(baseUrl + `users/${userId}/messages/${messageId}/read`, {\r\n        method: 'POST'\r\n    })\r\n    .then(response => {\r\n        if(response.ok){\r\n            if(onSuccess){\r\n                onSuccess();\r\n            }\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n        },\r\n        error => {\r\n            throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const uploadPostImage = (file, onSuccess, onError) => (dispatch) => {\r\n    let formData = new FormData();\r\n    formData.append('File', file);\r\n\r\n    return fetch(baseUrl + `postsImages`, {\r\n        method: 'POST',\r\n        // headers: {\r\n        //     'Content-Type': 'application/json'\r\n        // },\r\n        body: formData\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                response.json()\r\n                .then(responseBodyJson=>{\r\n                    if(onSuccess){\r\n                        onSuccess(responseBodyJson);\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const createPost = (title, description, category, tags, links, images, mainImage, onSuccess, onError) => (dispatch, getState) => {\r\n    console.log(mainImage);\r\n    let formData = new FormData();\r\n    formData.append('title', title);\r\n    formData.append('description', description);\r\n    formData.append('category', category);\r\n    formData.append('tags', tags);\r\n    formData.append('links', links);\r\n    for(let i=0; i<images.length; i++){\r\n        formData.append(`image${i+1}`, images[i]);\r\n    }\r\n    formData.append('mainImage', mainImage);\r\n    // formData.append(`images`, images);\r\n\r\n    return fetch(baseUrl + `posts`, {\r\n        method: 'POST',\r\n        // headers: {\r\n        //     'Content-Type': 'application/json'\r\n        // },\r\n        body: formData\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                response.json()\r\n                .then(responseBodyJson=>{\r\n\r\n                    if(onSuccess){\r\n                        onSuccess(responseBodyJson);\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const updatePost = (postId, title, description, category, tags, links, deletedImages, addedImages, mainImage, onSuccess, onError) => (dispatch, getState) => {\r\n    let formData = new FormData();\r\n    formData.append('title', title);\r\n    formData.append('description', description);\r\n    formData.append('category', category);\r\n    formData.append('tags', tags);\r\n    formData.append('links', links);\r\n    formData.append('deletedImages', deletedImages);\r\n    for(let i=0; i<addedImages.length; i++){\r\n        formData.append(`addedImage${i+1}`, addedImages[i]);\r\n    }\r\n    formData.append('mainImage', mainImage);\r\n    // formData.append(`images`, images);\r\n\r\n    return fetch(baseUrl + `posts/${postId}`, {\r\n        method: 'PUT',\r\n        // headers: {\r\n        //     'Content-Type': 'application/json'\r\n        // },\r\n        body: formData\r\n    })\r\n    .then(response=>{\r\n            if(response.ok){\r\n                response.json()\r\n                .then(responseBodyJson=>{\r\n                    if(onSuccess){\r\n                        onSuccess(responseBodyJson);\r\n                    }\r\n                })\r\n                .catch(error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            } else {     \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const likePost = (userId, postId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/likePost/${postId}`, {\r\n        method: 'POST',\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const cancelLikedPost = (userId, postId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/cancelLikedPost/${postId}`, {\r\n        method: 'POST',\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const dislikePost = (userId, postId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/dislikePost/${postId}`, {\r\n        method: 'POST',\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const cancelDislikedPost = (userId, postId, onSuccess, onError) => (dispatch) => {\r\n\r\n    return fetch(baseUrl + `users/${userId}/cancelDislikedPost/${postId}`, {\r\n        method: 'POST',\r\n    })\r\n    .then(response=>{\r\n\r\n            if(response.ok){\r\n                if(onSuccess){\r\n                    onSuccess();\r\n                }\r\n            } else {\r\n                \r\n                handleFetchResponseNotOkError(response,\r\n                error=>{\r\n       \r\n                    if(onError){\r\n                        onError(error);\r\n                    }\r\n                });\r\n\r\n            }\r\n        },\r\n        error=>{\r\n            throw error;\r\n        })\r\n    .catch(error=>{\r\n\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    })\r\n};\r\n\r\nexport const fetchAuthUser = (id, onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    return fetch(baseUrl + 'users/auth/' + id)\r\n    .then(response => {\r\n        \r\n        if(response.ok){\r\n            response.json()\r\n            .then(user => {\r\n                dispatch(addAuthUser(user));\r\n                localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n                if(onSuccess){\r\n                    onSuccess(user);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                \r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        \r\n        if(onError){\r\n            onError(onError);\r\n        }\r\n    });\r\n}\r\n\r\nexport const addAuthUser = (user) => ({\r\n    type: ActionTypes.ADD_AUTH_USER,\r\n    user\r\n});\r\n\r\n// export const authUserLikePost = (postId) => (dispatch, getState) =>{\r\n//     dispatch ({\r\n//         type: ActionTypes.AUTH_USER_LIKE_POST,\r\n//         postId,\r\n//     });\r\n\r\n//     localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n// }\r\n\r\n// export const authUserCancelLikedPost = (postId) => (dispatch, getState) =>{\r\n//     dispatch ({\r\n//         type: ActionTypes.AUTH_USER_CANCEL_LIKED_POST,\r\n//         postId,\r\n//     });\r\n\r\n//     localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n// }\r\n\r\n// export const authUserDislikePost = (postId) => (dispatch, getState) =>{\r\n//     dispatch ({\r\n//         type: ActionTypes.AUTH_USER_DISLIKE_POST,\r\n//         postId,\r\n//     });\r\n\r\n//     localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n// }\r\n\r\n// export const authUserCancelDislikedPost = (postId) => (dispatch, getState) =>{\r\n//     dispatch ({\r\n//         type: ActionTypes.AUTH_USER_CANCEL_DISLIKED_POST,\r\n//         postId,\r\n//     });\r\n\r\n//     localStorage.setItem('user', JSON.stringify(getState().auth.user));\r\n// }\r\n\r\nexport const fetchLikedPosts = (\r\n    userId,\r\n    pageNumber, pageSize, postParams, \r\n    onSuccess, onError) => (dispatch, getState) => {\r\n    console.log('fetchLikedPosts');\r\n\r\n    let params = {};\r\n\r\n    params['liked'] = true;\r\n\r\n    if(pageNumber!=null) params['pageNumber']=pageNumber;\r\n\r\n    if(pageSize!=null) params['pageSize']=pageSize;\r\n\r\n    if(postParams!=null){\r\n        if(postParams.category != null) params['category']=postParams.category;\r\n        if(postParams.orderBy != null) params['orderBy']=postParams.orderBy;\r\n    }\r\n\r\n    let query = Object.keys(params)\r\n        .map(k => k + '=' + params[k])\r\n        .join('&');\r\n\r\n    return fetch(baseUrl + `posts/liked/${userId}?` + query)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(posts => {\r\n                // dispatch(addPosts(posts));\r\n\r\n                let paginationHeader = response.headers.get('Pagination');\r\n                let pagination = null;\r\n                if(paginationHeader){\r\n                    pagination = JSON.parse(paginationHeader);\r\n                }\r\n\r\n                if(onSuccess){\r\n                    onSuccess(posts, pagination);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        // dispatch(postsFailed(error.message));\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchUserPosts = (userId, pageNumber, pageSize, postParams, \r\n    onSuccess, onError) => (dispatch, getState) => {\r\n\r\n    let params = {};\r\n\r\n    params['userPosts'] = true;\r\n\r\n    if(pageNumber!=null) params['pageNumber']=pageNumber;\r\n\r\n    if(pageSize!=null) params['pageSize']=pageSize;\r\n\r\n    if(postParams!=null){\r\n        if(postParams.category != null) params['category']=postParams.category;\r\n        if(postParams.orderBy != null) params['orderBy']=postParams.orderBy;\r\n    }\r\n\r\n    let query = Object.keys(params)\r\n        .map(k => k + '=' + params[k])\r\n        .join('&');\r\n\r\n    return fetch(baseUrl + `posts/userPosts/${userId}?` + query)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(posts => {\r\n                // dispatch(addPosts(posts));\r\n\r\n                let paginationHeader = response.headers.get('Pagination');\r\n                let pagination = null;\r\n                if(paginationHeader){\r\n                    pagination = JSON.parse(paginationHeader);\r\n                }\r\n\r\n                if(onSuccess){\r\n                    onSuccess(posts, pagination);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                // dispatch(postsFailed(error.message));\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        // dispatch(postsFailed(error.message));\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}\r\n\r\nexport const fetchTags = (tagParams, onSuccess, onError) => (dispatch) => {\r\n    let params = {};\r\n\r\n    if(tagParams!=null){\r\n        if(tagParams.orderBy != null) params['orderBy']=tagParams.orderBy;\r\n        if(tagParams.maxReturnNumber != null) params['maxReturnNumber']=tagParams.maxReturnNumber;\r\n        if(tagParams.minCount != null) params['minCount']=tagParams.minCount;\r\n    }\r\n\r\n    let query = Object.keys(params)\r\n        .map(k => k + '=' + params[k])\r\n        .join('&');\r\n\r\n    return fetch(baseUrl + 'tags?' + query)\r\n    .then(response => {\r\n\r\n        if(response.ok){\r\n            response.json()\r\n            .then(tags => {\r\n                if(onSuccess){\r\n                    onSuccess(tags);\r\n                }\r\n            })\r\n            .catch(error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n\r\n        } else {\r\n            handleFetchResponseNotOkError(response,\r\n            error=>{\r\n                if(onError){\r\n                    onError(error);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    error => {\r\n        throw error;\r\n    })\r\n    .catch(error => {\r\n        if(onError){\r\n            onError(error);\r\n        }\r\n    });\r\n}","export const VALUES_LOADING = 'VALUES_LOADING';\r\nexport const VALUES_FAILED = 'VALUES_FAILED';\r\nexport const ADD_VALUES = 'ADD_VALUES';\r\n\r\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\r\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\r\n// export const LOGOUT_FAILURE = 'LOGOUT_FAILURE';\r\n\r\n// export const SIGNUP_REQUEST = 'SIGNUP_REQUEST';\r\n// export const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\r\n// export const SIGNUP_FAILURE = 'SIGNUP_FAILURE';\r\n\r\nexport const USERS_LOADING = 'USERS_LOADING';\r\nexport const USERS_FAILED = 'USERS_FAILED';\r\nexport const ADD_USERS = 'ADD_USERS';\r\nexport const ADD_USER = 'ADD_USER';\r\n\r\nexport const ADD_AUTH_USER = 'ADD_AUTH_USER';\r\n// export const POSTS_LOADING = 'POSTS_LOADING';\r\n// export const POSTS_FAILED = 'POSTS_FAILED';\r\n// export const ADD_POSTS = 'ADD_POSTS';\r\n\r\nexport const SET_USER_MAIN_PHOTO_URL = 'SET_USER_MAIN_PHOTO_URL';\r\n\r\n\r\nexport const AUTH_USER_LIKE_POST = 'AUTH_USER_LIKE_POST';\r\nexport const AUTH_USER_CANCEL_LIKED_POST = 'AUTH_USER_CANCEL_LIKED_POST';\r\nexport const AUTH_USER_DISLIKE_POST = 'AUTH_USER_DISLIKE_POST';\r\nexport const AUTH_USER_CANCEL_DISLIKED_POST = 'AUTH_USER_CANCEL_DISLIKED_POST';\r\n// export const UPLOAD_FILE = 'UPLOAD_FILE';","import React from 'react';\r\n\r\nexport const Loading = (props) => {\r\n    return(\r\n        <div className=\"col-12\">\r\n            <span className=\"fa fa-spinner fa-pulse fa-3x fa-fw text-primary\"></span>\r\n            <p>{props.text?props.text:\"Loading . . .\"}</p>\r\n        </div>\r\n    );\r\n};","import alertify from 'alertifyjs';\r\n\r\nclass AlertifyService {\r\n    constructor(){\r\n        \r\n    }\r\n\r\n    confirm(message, okCallback){\r\n        alertify.confirm(message, function(e){\r\n            if(e){\r\n                okCallback();\r\n            }else{\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    success(message){\r\n        alertify.success(message);\r\n    }\r\n\r\n    error(message){\r\n        alertify.error(message);\r\n    }\r\n\r\n    warning(message){\r\n        alertify.warning(message);\r\n    }\r\n\r\n    message(message){\r\n        alertify.message(message);\r\n    }\r\n}\r\n\r\nexport const alertifyService = new AlertifyService();","import React, { Component } from 'react';\r\nimport { postCategoryOptions, defaultTags } from \"../shared/global\";\r\nimport styles from \"./HomeComponent.module.scss\";\r\nimport { withRouter } from 'react-router-dom';\r\nimport { fetchTags } from '../redux/ActionCreators';\r\nimport { connect } from 'react-redux';\r\nimport { alertifyService } from '../services/AlertifyService';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    \r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchTags: (tagParams, onSuccess, onError) => { dispatch(fetchTags(tagParams, onSuccess, onError)) }\r\n});\r\n\r\n\r\nclass Home extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            postParams:{\r\n                category: \"\",\r\n                search: \"\"\r\n            },\r\n\r\n            trendingTags:defaultTags\r\n        };\r\n\r\n        this.onClickTagButton = this.onClickTagButton.bind(this);\r\n        this.handleInputChangePostParamsForm = this.handleInputChangePostParamsForm.bind(this);\r\n\r\n        this.handleSubmitPostParamsForm = this.handleSubmitPostParamsForm.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(this.props.fetchTags(\r\n            {\r\n                orderBy:\"count\",\r\n                maxReturnNumber: 20,\r\n                minCount: 2\r\n            },\r\n            (tags)=>{                    \r\n                // alertifyService.success('Fetched trending tags successfully!'); \r\n\r\n                tags = tags.map(tag=>{ return tag.value});\r\n\r\n                let trendingTags = this.state.trendingTags;\r\n                for(let i=0; i<tags.length; i++){\r\n                    let tag = tags[i];\r\n                    if(trendingTags.indexOf(tag)==-1){\r\n                        trendingTags.push(tag);\r\n\r\n                        if(trendingTags.length>=20){\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                this.setState({\r\n                    trendingTags: trendingTags\r\n                });\r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n    }\r\n\r\n    handleInputChangePostParamsForm(event){\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            postParams: {...this.state.postParams, \r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickTagButton(tag){\r\n        this.props.history.push({\r\n            pathname:'/search',\r\n            state:{\r\n                search: tag\r\n            } \r\n        });\r\n    }\r\n\r\n    handleSubmitPostParamsForm(event){\r\n        event.preventDefault();\r\n        this.props.history.push({\r\n            pathname:'/search',\r\n            state:{\r\n                search: this.state.postParams.search,\r\n                category: this.state.postParams.category\r\n            } \r\n        });\r\n    }\r\n\r\n    render(){\r\n\r\n        return (\r\n            <div className={styles.background}>\r\n         \r\n                <div className={styles.center} >\r\n            \r\n                    <div className=\"container\" >\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-8 offset-lg-2\">\r\n                                <div className=\"px-2\">\r\n                                    <h1 className=\"\" >Best CS Study</h1>\r\n                                    <p >Knowledge is infinite while time is limited. Here you can find the most efficient way to learn your desired skillset.</p>\r\n                                \r\n                                    <form noValidate>\r\n                                        <div className=\"input-group\">\r\n                                            <input className=\"form-control input-sm\" type=\"text\" placeholder=\"Web Development\"\r\n                                                name=\"search\"\r\n                                                value={this.state.postParams.search}\r\n                                                onChange={this.handleInputChangePostParamsForm}\r\n                                            />\r\n                                    \r\n                                            <div className=\"input-group-append\">\r\n                                                <select className=\"form-control\" style={{borderRadius:'0'}}\r\n                                                    name=\"category\"\r\n                                                    value={this.state.postParams.category}\r\n                                                    onChange={this.handleInputChangePostParamsForm}\r\n                                                >\r\n                                                    <option key={\"all\"} value={\"\"}>\r\n                                                        { \"All\" }\r\n                                                    </option>\r\n                                                    {\r\n                                                        postCategoryOptions.map(category=>{\r\n                                                            return (\r\n                                                                <option key={category.value} value={category.value}>\r\n                                                                    { category.display }\r\n                                                                </option>\r\n                                                            );\r\n                                                        })\r\n                                                    }\r\n                                                </select>   \r\n                                                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmitPostParamsForm}>Search</button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-lg-10 offset-lg-1\">\r\n                                <div className=\"px-2\">\r\n                                    <hr className=\"mt-5 mb-5\"></hr>\r\n                                    <h3 >Popular Topics</h3>\r\n                                    <div className=\"row\" >\r\n                                        {\r\n                                            this.state.trendingTags.map((tag,index)=>{\r\n                                                return (\r\n                                                    <div key={index} className=\"col-4 col-lg-3 px-1 py-1\">\r\n                                                        <button className=\"btn btn-outline-primary btn-block\"\r\n                                                            onClick={(e)=>{this.onClickTagButton(tag);}}\r\n                                                        >{tag}</button>\r\n                                                    </div>\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                        </div>\r\n                    </div>\r\n                \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n  \r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Home));","import React, { Component } from 'react';\r\nimport { Dropdown, Button, Modal } from 'react-bootstrap';\r\nimport styles from './HeaderComponent.module.scss';\r\nimport { NavLink, Link } from 'react-router-dom';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { loginUser, logoutUser, fetchAuthUser } from '../redux/ActionCreators';\r\nimport { withRouter } from 'react-router-dom';\r\nimport ImgUser from '../shared/img/user.png';\r\n// import Register from './RegisterComponent';\r\n// import Login from './LoginComponent';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        auth: state.auth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    loginUser: (creds, onSuccess, onError) => { dispatch(loginUser(creds, onSuccess, onError)) },\r\n    fetchAuthUser: (id, onSuccess, onError) => { dispatch(fetchAuthUser(id, onSuccess, onError)) },\r\n    logoutUser: (onSuccess, onError) => { dispatch(logoutUser(onSuccess, onError)) }\r\n});\r\n\r\nclass Header extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n        };\r\n\r\n        this.handleClickEditProfileLink = this.handleClickEditProfileLink.bind(this);\r\n        this.handleClickLogoutLink = this.handleClickLogoutLink.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.auth.isAuthenticated){\r\n            this.props.fetchAuthUser(this.props.auth.user.id,\r\n                (user)=>{\r\n                    // alertifyService.success('Fetched auth user successfully!');\r\n                },\r\n                error=>{\r\n                    alertifyService.error(error.message);\r\n                });\r\n        }\r\n    }\r\n\r\n    handleClickLogoutLink(event){\r\n        this.props.logoutUser(\r\n            ()=>{\r\n                // alertifyService.message('Logged out successfully!');\r\n            }\r\n        );\r\n    }\r\n\r\n    handleClickEditProfileLink(event){\r\n        this.props.history.push(\"/member/edit\");\r\n    }\r\n\r\n    render() {\r\n\r\n        return(\r\n            <nav className=\"navbar navbar-expand-md navbar-dark bg-primary\">\r\n                <div className=\"container\">\r\n                    <Link to=\"/home\" className=\"navbar-brand\">Best CS Study</Link>\r\n  \r\n                    \r\n                        <ul className=\"navbar-nav mr-auto\">\r\n                            <li className=\"nav-item\" >                                \r\n                                <NavLink to=\"/search\" className=\"nav-link\" activeClassName=\"active\">Search</NavLink>\r\n                            </li>\r\n                            {\r\n                                this.props.auth.isAuthenticated?\r\n                                <li className=\"nav-item\" >\r\n                                    <NavLink to=\"/likedPosts\" className=\"nav-link\" activeClassName=\"active\">Liked</NavLink>\r\n                                </li>\r\n                                : null\r\n                            }\r\n                            {\r\n                                this.props.auth.isAuthenticated?\r\n                                <li className=\"nav-item\" >\r\n                                    <NavLink to={`/userPosts/${this.props.auth.user.id}`} className=\"nav-link\" activeClassName=\"active\">My Posts</NavLink>\r\n                                </li>\r\n                                : null\r\n                            }\r\n                        </ul>\r\n                       \r\n                        {\r\n                            this.props.auth.isAuthenticated?       \r\n                            <Link to={`/createPost`}>\r\n                                <button className=\"btn btn-success my-2 my-sm-0 mr-3\">Create New Post</button>\r\n                            </Link>\r\n                            : null\r\n                        }\r\n                        {\r\n                            this.props.auth.isAuthenticated?\r\n                            <Dropdown>\r\n                                <span className=\"mr-2\">\r\n                                    <img className={styles.imgUser} src={this.props.auth.user.mainPhotoUrl || ImgUser} alt=\"\"/>\r\n                                </span>\r\n                                <Dropdown.Toggle as=\"a\" className={styles.dropdownToggle + \" text-light\"}>\r\n                                    Welcome {this.props.auth.decodedToken.unique_name}\r\n                                </Dropdown.Toggle>\r\n\r\n                                <Dropdown.Menu as=\"div\" className=\"mt-3\">\r\n                                    <Dropdown.Item as=\"a\" className={styles.dropdownItem} onClick={this.handleClickEditProfileLink }>\r\n                                        <i className=\"fas fa-user mr-1\"></i> Edit Profile                                 \r\n                                    </Dropdown.Item>\r\n                                    <Dropdown.Item as=\"a\" className={styles.dropdownItem} onClick={this.handleClickLogoutLink}>\r\n                                        <i className=\"fas fa-sign-out-alt mr-1\"></i> Logout\r\n                                    </Dropdown.Item>\r\n\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                    \r\n                            : null\r\n                        }\r\n                        {\r\n                            !this.props.auth.isAuthenticated?\r\n                            <button className=\"btn btn-info my-2 my-sm-0 mr-3\" onClick={() => this.props.showModal('login')}>Log In</button>\r\n                            : null\r\n                        }\r\n                        {\r\n                            !this.props.auth.isAuthenticated?\r\n                            <button className=\"btn btn-success my-2 my-sm-0\" onClick={() => this.props.showModal('register')}>Sign Up</button>\r\n                            : null\r\n                        }\r\n                </div>\r\n            </nav>\r\n        );\r\n    };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));","import React, { Component } from 'react';\r\nimport styles from './FooterComponent.module.scss';\r\n\r\nclass Footer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <footer className={\"footer \"+styles.footer}>\r\n                {/* <div className=\"container\"> */}\r\n                    <span className=\"text-muted\">Copyright © Atom Cai 2019</span>\r\n                {/* </div> */}\r\n            </footer>\r\n        );\r\n    };\r\n}\r\n\r\nexport default Footer;","import React, { Component } from 'react'\r\nimport styles from './MemberCardComponent.module.scss';\r\nimport { Link } from 'react-router-dom';\r\nimport ImgUser from '../../shared/img/user.png';\r\n// import { connect } from 'react-redux';\r\n// import { sendLike } from '../../redux/ActionCreators';\r\n\r\n// const mapDispatchToProps = dispatch => ({\r\n//     sendLike: (id, recipientId, onSuccess, onError) => { dispatch(sendLike(id, recipientId, onSuccess, onError)); }\r\n// });\r\n\r\nclass MemberCard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n       \r\n    }\r\n\r\n    handleClickLikeButton(){\r\n\r\n    }\r\n\r\n    render() { \r\n        return(\r\n            <div className={\"card mb-4 \"+styles.card}>\r\n                <div className={styles.cardImgWrapper}>\r\n                    <img className=\"card-img-top\" src={this.props.user.photoUrl || ImgUser} alt={this.props.user.knownAs}/>\r\n                    <ul className={\"list-inline text-center \" + styles.memberIcons + \" \" + styles.animate}>\r\n                    \r\n                        <li className=\"list-inline-item\">\r\n                            <Link to={`/members/${this.props.user.id}`}><button className=\"btn btn-primary\"><i className=\"fa fa-user\"></i></button></Link>\r\n                        </li>\r\n                        <li className=\"list-inline-item\">\r\n                            <button className=\"btn btn-primary\"\r\n                                onClick={this.props.handleClickLikeButton}\r\n                            ><i className=\"fa fa-heart\"></i>\r\n                            </button>\r\n                        </li>\r\n                        <li className=\"list-inline-item\">\r\n                            <Link to={`/members/${this.props.user.id}?tab=messages`}><button className=\"btn btn-primary\"><i className=\"fa fa-envelope\"></i></button></Link>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"card-body p-1\">\r\n                    <h6 className=\"card-title text-center mb-1\">\r\n                        <i className=\"fa fa-user\"></i> {this.props.user.knownAs}, {this.props.user.age}\r\n                    </h6>\r\n                    <p className=\"card-text text-muted text-center\">{this.props.user.city}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MemberCard;\r\n// export default connect(null, mapDispatchToProps)(MemberCard);","import React, { Component } from 'react'\r\nimport MemberCard from './member/MemberCardComponent';\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { fetchUsers, sendLike } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchUsers: (pageNumber, pageSize, userParams, onSuccess, onError) => { dispatch(fetchUsers(pageNumber, pageSize, userParams, onSuccess, onError)); },\r\n    sendLike: (id, recipientId, onSuccess, onError) => { dispatch(sendLike(id, recipientId, onSuccess, onError)); }\r\n});\r\n\r\nclass Lists extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            users: [],\r\n            userParams:{\r\n                likers: false,\r\n                likees: true\r\n            },\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            }\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.handleToggleUsersParams = this.handleToggleUsersParams.bind(this);\r\n        this.handleClickLikeUserButton = this.handleClickLikeUserButton.bind(this);\r\n    }\r\n\r\n    loadUsers(pageIndex){\r\n        this.props.fetchUsers(\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.userParams,\r\n            (users, pagination)=>{\r\n            \r\n                // alertifyService.success('Fetched users successfully!');\r\n                \r\n                this.setState({\r\n                    users: users,\r\n                    pagination:pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n           this.loadUsers(this.state.pagination.currentPage);\r\n        },1);\r\n    }\r\n\r\n    handleToggleUsersParams(param){\r\n\r\n        this.setState({\r\n            userParams: {...this.state.userParams, \r\n                likers: param=='likers',\r\n                likees: param=='likees'\r\n            }\r\n        });\r\n        \r\n        setTimeout(()=>{\r\n            this.loadUsers(this.state.pagination.currentPage);\r\n         },1);\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadUsers(pageIndex);\r\n    }\r\n\r\n    handleClickLikeUserButton(recipient){\r\n        this.props.sendLike(this.props.authUser.id, recipient.id,\r\n            ()=>{\r\n                // alertifyService.success(`You have liked ${recipient.knownAs}!`);\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }); \r\n    }\r\n\r\n    render() {\r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"container mt-4\">\r\n                    <div className=\"text-center my-4\">\r\n                        <h2>{this.state.userParams.likers? 'Members who like me' : 'Members who I\\'ve Liked'} : {this.state.pagination.totalItems}</h2>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"btn-group\">\r\n                            <button className={\"btn btn-primary \"+(this.state.userParams.likers?\"active\":\"\")} name=\"likers\" onClick={(e)=>{this.handleToggleUsersParams('likers')}}>Members who like me</button>\r\n                            <button className={\"btn btn-primary \"+(this.state.userParams.likees?\"active\":\"\")} name=\"likees\" onClick={(e)=>{this.handleToggleUsersParams('likees')}}>Members who I like</button>\r\n                        </div>\r\n                    </div>\r\n                    <br/>\r\n                    <div className=\"row\">\r\n                        {\r\n                            this.state.users.map(user=>{\r\n                                return (\r\n                                    <div className=\"col-sm-6 col-md-4 col-lg-4 col-xl-2\" key={user.id} >\r\n                                        <MemberCard \r\n                                            user={user}\r\n                                            handleClickLikeButton={(e)=>{this.handleClickLikeUserButton(user)}}\r\n                                        />\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n              \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Lists);","import React, { Component } from 'react'\r\nimport MemberCard from './MemberCardComponent';\r\nimport { alertifyService } from '../../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { fetchUsers, sendLike } from '../../redux/ActionCreators';\r\nimport { Pagination } from 'react-bootstrap';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user,\r\n        users: state.users\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchUsers: (pageNumber, pageSize, userParams, onSuccess, onError) => { dispatch(fetchUsers(pageNumber, pageSize, userParams, onSuccess, onError)); },\r\n    sendLike: (id, recipientId, onSuccess, onError) => { dispatch(sendLike(id, recipientId, onSuccess, onError)); }\r\n});\r\n\r\nconst genderOptions = [{value:'male', display:'Male'}, {value:'female', display:'Female'}]\r\nconst orderByOptions = [{value:'created', display:'Created Time'}, {value:'lastActive', display:'Last Active Time'}]\r\n\r\nclass MemberList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(this.props.users);\r\n\r\n        this.state = {\r\n            // usersParamsForm:{\r\n\r\n            // },\r\n            userParams:{\r\n                gender: this.props.authUser.gender == 'female'? 'male' : 'female',\r\n                minAge: 0,\r\n                maxAge: 200,\r\n                orderBy: 'lastActive'\r\n            },\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            }\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.resetFilter = this.resetFilter.bind(this);\r\n        this.handleInputChangeUsersParamsForm = this.handleInputChangeUsersParamsForm.bind(this);\r\n        this.handleSubmitUsersParamsForm = this.handleSubmitUsersParamsForm.bind(this);\r\n        this.handleClickLikeUserButton = this.handleClickLikeUserButton.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(\"MemberList.componentDidMount\");\r\n        \r\n        setTimeout(()=>{\r\n           this.loadUsers(this.state.pagination.currentPage);\r\n        },1);\r\n\r\n    }\r\n\r\n    resetFilter(){\r\n        this.setState({\r\n            userParams:{\r\n                gender: this.props.authUser.gender == 'female'? 'male' : 'female',\r\n                minAge: 18,\r\n                maxAge: 99,\r\n                orderBy: 'lastActive'\r\n            }\r\n        });\r\n\r\n        setTimeout(()=>{\r\n           this.loadUsers(this.state.pagination.currentPage);\r\n        },1);\r\n    }\r\n\r\n    handleInputChangeUsersParamsForm(event){\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n\r\n        this.setState({\r\n            userParams: {...this.state.userParams, \r\n                [name]: value\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    handleSubmitUsersParamsForm(event){\r\n        event.preventDefault();\r\n\r\n        this.loadUsers(this.state.pagination.currentPage);\r\n    }\r\n\r\n    loadUsers(pageIndex){\r\n        this.props.fetchUsers(\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.userParams,\r\n            (users, pagination)=>{\r\n                // alertifyService.success('Fetched users successfully!');\r\n                \r\n                this.setState({\r\n                    pagination:pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadUsers(pageIndex);\r\n    }\r\n\r\n    handleClickLikeUserButton(recipient){\r\n        this.props.sendLike(this.props.authUser.id, recipient.id,\r\n            ()=>{\r\n                // alertifyService.success(`You have liked ${recipient.knownAs}!`);\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }); \r\n    }\r\n\r\n    render() {\r\n        \r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"container mt-4\">\r\n                    <div className=\"text-center my-4\">\r\n                        <h2>Your matches - {this.state.pagination.totalItems} found</h2>\r\n                    </div>\r\n                    <form className=\"form-inline my-1\" noValidate onSubmit={this.handleSubmitUsersParamsForm}>\r\n                        <div className=\"form-group px-2\">\r\n                            <label className=\"mr-1\">Age From</label>\r\n                            <input type=\"number\" className=\"form-control ml-1\" style={{width: \"70px\"}} id=\"minAge\" name=\"minAge\"\r\n                                value={this.state.userParams.minAge}\r\n                                onChange={this.handleInputChangeUsersParamsForm}\r\n                            />\r\n                        </div>\r\n                    \r\n                        <div className=\"form-group px-2\">\r\n                            <label className=\"mr-1\">Age To</label>\r\n                            <input type=\"number\" className=\"form-control ml-1\" style={{width: \"70px\"}}id=\"maxAge\" name=\"maxAge\"\r\n                                value={this.state.userParams.maxAge}\r\n                                onChange={this.handleInputChangeUsersParamsForm}\r\n                            />\r\n                        </div>\r\n                    \r\n                        <div className=\"form-group px-2\">\r\n                            <label className=\"mr-1\">Show</label>\r\n                            <select className=\"form-control ml-1\" style={{width: \"108px\"}} id=\"gender\" name=\"gender\"\r\n                                value={this.state.userParams.gender}\r\n                                onChange={this.handleInputChangeUsersParamsForm}\r\n                            >\r\n                                {\r\n                                    genderOptions.map(gender=>{\r\n                                        return (\r\n                                            <option key={gender.value} value={gender.value}>\r\n                                                { gender.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n\r\n                        \r\n                        <div className=\"form-group px-2\">\r\n                            <label className=\"mr-1\">Order By</label>\r\n                            <select className=\"form-control ml-1\" style={{width: \"166px\"}} id=\"orderBy\" name=\"orderBy\"\r\n                                value={this.state.userParams.orderBy}\r\n                                onChange={this.handleInputChangeUsersParamsForm}\r\n                            >\r\n                                {\r\n                                    orderByOptions.map(orderBy=>{\r\n                                        return (\r\n                                            <option key={orderBy.value} value={orderBy.value}>\r\n                                                { orderBy.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n\r\n                        <button type=\"submit\" className=\"btn btn-primary\" style={{marginLeft:\"10px\"}}>Apply Filters</button>\r\n                        <button type=\"button\" className=\"btn btn-info\" style={{marginLeft:\"10px\"}}\r\n                            onClick={(e)=>{this.resetFilter()}}\r\n                        >Reset Filter</button>\r\n                    \r\n                    </form>\r\n                    <br/>\r\n                    <div className=\"row\">                    \r\n                        {\r\n                            this.props.users.users.map((user)=>{\r\n                                return(\r\n                                    <div key={user.id} className=\"col-lg-2 col-md-3 col-sm-6\">\r\n                                        <MemberCard \r\n                                            user={user}\r\n                                            handleClickLikeButton={(e)=>{this.handleClickLikeUserButton(user)}}\r\n                                        />\r\n                                    </div>\r\n                                    // <p key={user.id}>{user.knownAs}</p>\r\n                                );\r\n                            })\r\n                        }                 \r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MemberList);","export const required = (val) => val && val.length;\r\nexport const maxLength = (len) => (val) => !(val) || (val.length <= len);\r\nexport const minLength = (len) => (val) => val && (val.length >= len); \r\nexport const validDate = (val) => /\\d{4}-\\d{2}-\\d{2}/.test(val);","import React, { Component } from 'react'\r\nimport { fetchMessageThread, sendMessage, markMessageAsRead } from '../../redux/ActionCreators';\r\nimport { alertifyService } from '../../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport styles from './MemberMessagesComponent.module.scss';\r\nimport TimeAgo from 'react-timeago'\r\nimport { required } from '../../shared/validators';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchMessageThread: (id, recipientId, onSuccess, onError) => { dispatch(fetchMessageThread(id, recipientId, onSuccess, onError)); },\r\n    sendMessage: (id, message, onSuccess, onError) => { dispatch(sendMessage(id, message, onSuccess, onError)); },\r\n    markMessageAsRead: (userId, messageId, onSuccess, onError) => { dispatch(markMessageAsRead(userId, messageId, onSuccess, onError)); }\r\n});\r\nclass MemberMessages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            messages: [],\r\n            newMessage: {\r\n                content: ''\r\n            }\r\n        }\r\n\r\n        this.handleInputChangeNewMessage = this.handleInputChangeNewMessage.bind(this);\r\n        this.handleSendNewMessage = this.handleSendNewMessage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n           this.loadMessages();\r\n        },1);\r\n    }\r\n\r\n    loadMessages(){\r\n        this.props.fetchMessageThread(\r\n            this.props.authUser.id,\r\n            this.props.recipientId,\r\n            (messages)=>{\r\n                // alertifyService.success(`Fetched message thread successfully!`);\r\n                \r\n                this.setState({\r\n                    messages: messages\r\n                });\r\n\r\n                for(let i=0; i< messages.length; i++){\r\n                    if(messages[i].isRead == false \r\n                        && messages[i].recipientId == this.props.authUser.id)\r\n                    {\r\n                        this.props.markMessageAsRead(this.props.authUser.id, messages[i].id,\r\n                            ()=>{\r\n                                // alertifyService.success(`Marked message ${messages[i].id} as read successfully!`);\r\n                            },\r\n                            (error)=>{\r\n                                alertifyService.error(error.message);\r\n                            });\r\n                    }\r\n                }\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleInputChangeNewMessage(event){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            newMessage: {...this.state.newMessage, \r\n                [name]: value\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    handleSendNewMessage(e){\r\n        e.preventDefault();\r\n\r\n        this.setState({\r\n            newMessage: {...this.state.newMessage, \r\n                recipientId: this.props.recipientId\r\n            }\r\n        });\r\n\r\n        setTimeout(()=>{\r\n            this.props.sendMessage(this.props.authUser.id,\r\n                this.state.newMessage,\r\n                (message)=>{\r\n                    let messages = this.state.messages;\r\n                    messages.push(message);\r\n                    this.setState({\r\n                        messages:messages,\r\n                        newMessage:{content:''}\r\n                    });\r\n    \r\n                    // alertifyService.success(`Sent message successfully!`);\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                });\r\n         },1);\r\n       \r\n    }\r\n\r\n\r\n\r\n    render() { \r\n        return(\r\n            <div className={\"card \"+styles.card}>\r\n              <div className={\"card-body \"+styles.cardBody}>\r\n               {\r\n                    this.state.messages.length == 0?\r\n                    <div>\r\n                       <p>No messages yet... say hi using the message box below</p>\r\n                    </div>\r\n                    :\r\n                    <ul className={\"chat \"+styles.chat}>\r\n                    {\r\n                        this.state.messages.map(message=>{\r\n                            return(\r\n                            <li key={message.id}>\r\n                                {\r\n                                    message.senderId==this.props.recipientId?\r\n                                    <div>\r\n                                        <span className=\"chat-img float-left\">\r\n                                            <img src={message.senderPhotoUrl} alt={message.senderKnownAs} className={\"rounded-circle mr-2 \"+styles.roundedCircle}>\r\n                                            </img>\r\n                                        </span>\r\n                                        <div className=\"chat-body\">\r\n                                            <div className=\"header\">\r\n                                                <strong className=\"primary-font\">{message.senderKnownAs}</strong>\r\n                                                <small className=\"text-muted float-right\">\r\n                                                    <span className=\"fa fa-clock-o\"> <TimeAgo date={message.messageSent} live={false}/> </span>\r\n                                                </small>\r\n                                            </div>\r\n                                            <p>{message.content}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    :\r\n                                    <div>\r\n                                        <span className=\"chat-img float-right\">\r\n                                            <img src={message.senderPhotoUrl} alt={message.senderKnownAs} className={\"rounded-circle ml-2 \"+styles.roundedCircle}>\r\n                                            </img>\r\n                                        </span>\r\n                                        <div className=\"chat-body\">\r\n                                            <div className=\"header\">\r\n                                                <small className=\"text-muted\">\r\n                                                    <span className=\"fa fa-clock-o\"> <TimeAgo date={message.messageSent} live={false}/> </span>\r\n                                                    {\r\n                                                        message.isRead?\r\n                                                        <span className=\"text-success\"> (read)</span>\r\n                                                        :\r\n                                                        <span className=\"text-danger\"> (unread)</span>\r\n                                                    }\r\n                                                    \r\n                                                </small>\r\n                                                <strong className=\"primary-font float-right\">{message.senderKnownAs}</strong>\r\n                                         \r\n                                            </div>\r\n                                            <p>{message.content}</p>\r\n                                        </div>                                      \r\n                                    </div>\r\n                                }\r\n                            </li>\r\n                            );\r\n                        })\r\n                    }\r\n                    </ul>\r\n               }\r\n               </div>\r\n               <div className=\"card-footer\">\r\n                    <form onSubmit={this.handleSendNewMessage}>\r\n                        <div className=\"input-group\">\r\n                            <input className=\"form-control input-sm\" type=\"text\" placeholder=\"send a private message\"\r\n                                name=\"content\"\r\n                                value={this.state.newMessage.content}\r\n                                onChange={this.handleInputChangeNewMessage}\r\n                                onBlur={(e)=>{}}\r\n                            />\r\n                            <div className=\"input-group-append\">\r\n                                <button type=\"submit\" className=\"btn btn-primary\" disabled={!required(this.state.newMessage.content)}>Send</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MemberMessages);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { fetchUser } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport styles from './MemberDetailsComponent.module.scss';\r\nimport { Tabs, Tab } from 'react-bootstrap';\r\nimport ImageGallery from 'react-image-gallery';\r\nimport ImgUser from '../shared/img/user.png';\r\nimport TimeAgo from 'react-timeago'\r\nimport MemberMessages from './member/MemberMessagesComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport queryString from 'query-string';\r\nimport { defaultDatetimeValue } from '../shared/global';\r\n// import './MemberDetailsComponent.scss';\r\n// import '../../App.css';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchUser: (id, onSuccess, onError) => { dispatch(fetchUser(id, onSuccess, onError)); }\r\n});\r\n\r\nclass MemberDetails extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let initTab = queryString.parse(this.props.location.search).tab;\r\n      \r\n        this.state = {\r\n            user:null,\r\n            tab:initTab?initTab:'profile'\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(this.props.fetchUser(\r\n            this.props.match.params.id,\r\n            (user)=>{                    \r\n                // alertifyService.success('Fetched user '+this.props.match.params.id+' successfully!'); \r\n                \r\n                this.setState({\r\n                    user: user\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n    }\r\n\r\n    render() { \r\n        if(this.state.user)\r\n        console.log((new Date(this.state.user.dateOfBirth)).valueOf());\r\n        const photos = this.state.user? this.state.user.photos.map((photo)=>{\r\n            return  {\r\n                original: photo.url,\r\n                thumbnail: photo.url\r\n            };\r\n        }):null;\r\n\r\n        return(\r\n            <div className=\"container mt-4\">\r\n                <div className=\"row\">\r\n                    <div className=\"col\">\r\n                        <h1 className=\"text-left\">\r\n                            {this.state.user? this.state.user.username: ''}'s Profile\r\n                        </h1>\r\n                    </div>\r\n                                 \r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm-4\">\r\n                        <div className=\"card\">\r\n                            <div className=\"p-3\">\r\n                            <img className=\"card-img-top img-thumbnail\" src={this.state.user?this.state.user.photoUrl||ImgUser:ImgUser} alt={this.state.user?this.state.user.knownAs:''}/>\r\n                            </div>\r\n                            <div className={\"card-body \"+styles.cardBody}>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Last Active At:</strong>\r\n                                    <p>{this.state.user?<TimeAgo date={this.state.user.lastActive} live={false}/>:null}</p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Register At:</strong>\r\n                                    <p>{this.state.user?(new Date(this.state.user.created)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'}):''}</p>\r\n                                </div>\r\n                            </div>\r\n                            {/* <div className={\"card-footer \"+styles.cardFooter}>\r\n                                <div className=\"btn-group d-flex\">\r\n                                    <button className=\"btn btn-primary w-100\">\r\n                                    <i className=\"far fa-thumbs-up\"></i> Like\r\n                                    </button>\r\n                                    <button className=\"btn btn-success w-100\" onClick={(e)=>{this.setState({tabKey:'messages'})}}>Message</button>\r\n                                </div>\r\n                            </div> */}\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div className=\"col-sm-8\">\r\n                        <div className=\"tab-panel\">\r\n                            <Tabs className=\"member-tabs\" \r\n                                activeKey={this.state.tab}\r\n                                onSelect={key => this.setState({ tab: key })}\r\n                            >\r\n                                <Tab className=\"text-left \" eventKey=\"profile\" title={'About '+ (this.state.user?this.state.user.username:'')}>\r\n                                    <div className=\"mt-3 mx-2\">\r\n                                        <div className=\"row text-left\">\r\n                                            <label className=\"col-sm-2 font-weight-bold\">Introduction</label>\r\n                                            <div className=\"col-sm\">\r\n                                                <p>{this.state.user?this.state.user.introduction||\"This lazy user didn't write anything...\":''}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row text-left \">\r\n                                            <label className=\"col-sm-2 font-weight-bold\">Gender</label>\r\n                                            <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                <p>{this.state.user?this.state.user.gender||\"Unknown\":''}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row text-left \">\r\n                                            <label className=\"col-sm-2 font-weight-bold\">Date of Birth</label>\r\n                                            <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                <p>{this.state.user?\r\n                                                    (new Date(this.state.user.dateOfBirth)).valueOf()==defaultDatetimeValue?\"Unknown\":(new Date(this.state.user.created)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})\r\n                                                    :''}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row text-left \">\r\n                                            <label className=\"col-sm-2 font-weight-bold\">Country</label>\r\n                                            <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                <p>{this.state.user?this.state.user.country||\"Unknown\":''}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"row text-left \">\r\n                                            <label className=\"col-sm-2 font-weight-bold\">City</label>\r\n                                            <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                <p>{this.state.user?this.state.user.city||\"Unknown\":''}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </Tab>\r\n                                <Tab className=\"text-left\" eventKey=\"photos\" title=\"Photos\">\r\n                                    {\r\n                                        photos?\r\n                                        <div className={styles.imageGallery}>\r\n                                            <ImageGallery items={photos} showPlayButton={false} showFullscreenButton={false} useBrowserFullscreen={false}/>\r\n                                        </div>\r\n                                        :\r\n                                        <h4>Photos will go here</h4>\r\n                                    }\r\n                                </Tab>\r\n                                {/* {\r\n                                    this.state.user!=null && this.state.user.id != this.props.authUser.id?\r\n                                    <Tab className=\"text-left\" eventKey=\"messages\" title=\"Messages\">\r\n                                        <MemberMessages recipientId={this.state.user.id}/>\r\n                                    </Tab>\r\n                                    :null\r\n                                } */}\r\n                            </Tabs>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(MemberDetails));","import React, { Component, useMemo, useCallback } from 'react'\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport { Loading } from './LoadingComponent';\r\n\r\nconst dropzoneStyle = {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: '20px',\r\n    borderWidth: 2,\r\n    borderRadius: 2,\r\n    borderColor: '#eeeeee',\r\n    borderStyle: 'dashed',\r\n    backgroundColor: '#fafafa',\r\n    color: '#bdbdbd',\r\n    outline: 'none',\r\n    transition: 'border .24s ease-in-out'\r\n  };\r\n  \r\nconst dropzoneStyleActive = {\r\n  borderColor: '#2196f3'\r\n};\r\n\r\nconst dropzoneStyleAccept = {\r\n  borderColor: '#00e676'\r\n};\r\n\r\nconst dropzoneStyleReject = {\r\n  borderColor: '#ff1744'\r\n};\r\n\r\nfunction PhotoUploader(props) {\r\n\r\n    const onDrop = useCallback(acceptedFiles => {\r\n        props.handleDroppedFiles(acceptedFiles);\r\n    });\r\n\r\n    const {\r\n      acceptedFiles,\r\n      getRootProps,\r\n      getInputProps,\r\n      isDragActive,\r\n      isDragAccept,\r\n      isDragReject\r\n    } = useDropzone({onDrop, accept: 'image/*'});\r\n    \r\n    const style = useMemo(() => ({\r\n      ...dropzoneStyle,\r\n      ...(isDragActive ? dropzoneStyleActive : {}),\r\n      ...(isDragAccept ? dropzoneStyleAccept : {}),\r\n      ...(isDragReject ? dropzoneStyleReject : {})\r\n    }), [\r\n      isDragActive,\r\n      isDragReject\r\n    ]);\r\n\r\n    const files = props.files.map((file, index) => (\r\n      <div key={file.path} className=\"row\">\r\n        <div className=\"col-md-6 align-self-center\">\r\n          {file.path} ({file.size} bytes)\r\n        </div>\r\n        <div className=\"col-md-6 text-md-right my-1\">\r\n        \r\n          <button className=\"btn btn-sm btn-success mx-1\" onClick={(event)=>{props.handleUploadFile(index)}} disabled={props.isUploadingPhoto}>Upload</button>\r\n          <button className=\"btn btn-sm btn-danger mx-1\" onClick={(event)=>{props.handleRemoveFile(index)}} disabled={props.isUploadingPhoto}>Remove</button>\r\n  \r\n        </div>\r\n      </div>\r\n    ));\r\n  \r\n    return (\r\n      <div className=\"row mt-1\">\r\n        <div className=\"col-lg-4 mt-3\">\r\n          <h4>Add Photos</h4>\r\n          <div {...getRootProps({style})}>\r\n            <input {...getInputProps()} />\r\n            <i className=\"fa fa-upload fa-3x mt-1\"></i>\r\n            <p className=\"my-1\">Drop files or click to select files</p>\r\n          </div>\r\n        </div>\r\n        {\r\n          props.files.length>0?\r\n          <div className=\"col-lg-8 mt-3\">\r\n            <h4>Files to Upload</h4>\r\n            {\r\n              props.isUploadingPhoto?<Loading text=\"Uploading. . .\"/>:null\r\n            }\r\n            <div>{files}</div>\r\n          </div>\r\n          :null\r\n        }\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default PhotoUploader;","import React, { Component, useMemo, useCallback } from 'react'\r\nimport styles from './PhotoEditorComponent.module.scss';\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport { connect } from 'react-redux';\r\nimport { uploadUserPhoto, setUserMainPhoto, deleteUserPhoto, setUserMainPhotoUrl, fetchAuthUser } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { Loading } from './LoadingComponent';\r\nimport PhotoUploader from './PhotoUploaderComponent';\r\n\r\n// const dropzoneStyle = {\r\n//     flex: 1,\r\n//     display: 'flex',\r\n//     flexDirection: 'column',\r\n//     alignItems: 'center',\r\n//     padding: '20px',\r\n//     borderWidth: 2,\r\n//     borderRadius: 2,\r\n//     borderColor: '#eeeeee',\r\n//     borderStyle: 'dashed',\r\n//     backgroundColor: '#fafafa',\r\n//     color: '#bdbdbd',\r\n//     outline: 'none',\r\n//     transition: 'border .24s ease-in-out'\r\n//   };\r\n  \r\n// const dropzoneStyleActive = {\r\n//   borderColor: '#2196f3'\r\n// };\r\n\r\n// const dropzoneStyleAccept = {\r\n//   borderColor: '#00e676'\r\n// };\r\n\r\n// const dropzoneStyleReject = {\r\n//   borderColor: '#ff1744'\r\n// };\r\n\r\n// function PhotoUploader(props) {\r\n\r\n//     const onDrop = useCallback(acceptedFiles => {\r\n//         props.handleDroppedFiles(acceptedFiles);\r\n//     });\r\n\r\n//     const {\r\n//       acceptedFiles,\r\n//       getRootProps,\r\n//       getInputProps,\r\n//       isDragActive,\r\n//       isDragAccept,\r\n//       isDragReject\r\n//     } = useDropzone({onDrop});\r\n    \r\n//     const style = useMemo(() => ({\r\n//       ...dropzoneStyle,\r\n//       ...(isDragActive ? dropzoneStyleActive : {}),\r\n//       ...(isDragAccept ? dropzoneStyleAccept : {}),\r\n//       ...(isDragReject ? dropzoneStyleReject : {})\r\n//     }), [\r\n//       isDragActive,\r\n//       isDragReject\r\n//     ]);\r\n\r\n//     const files = props.files.map((file, index) => (\r\n//       <div key={file.path} className=\"row\">\r\n//         <div className=\"col-md-6 align-self-center\">\r\n//           {file.path} ({file.size} bytes)\r\n//         </div>\r\n//         <div className=\"col-md-6 text-md-right my-1\">\r\n        \r\n//           <button className=\"btn btn-sm btn-success mx-1\" onClick={(event)=>{props.handleUploadFile(index)}} disabled={props.isUploadingPhoto}>Upload</button>\r\n//           <button className=\"btn btn-sm btn-danger mx-1\" onClick={(event)=>{props.handleRemoveFile(index)}} disabled={props.isUploadingPhoto}>Remove</button>\r\n  \r\n//         </div>\r\n//       </div>\r\n//     ));\r\n  \r\n//     return (\r\n//       <div className=\"row mt-3\">\r\n//         <div className=\"col-md-4 mt-2\">\r\n//           <h4>Add Photos</h4>\r\n//           <div {...getRootProps({style})}>\r\n//             <input {...getInputProps()} />\r\n//             <i className=\"fa fa-upload fa-3x mt-1\"></i>\r\n//             <p className=\"my-1\">Drop files or click to select files</p>\r\n//           </div>\r\n//         </div>\r\n//         {\r\n//           props.files.length>0?\r\n//           <div className=\"col-md-8 mt-2\">\r\n//             <h4>Files to Upload</h4>\r\n//             {\r\n//               props.isUploadingPhoto?<Loading text=\"Uploading. . .\"/>:null\r\n//             }\r\n//             <div>{files}</div>\r\n//           </div>\r\n//           :null\r\n//         }\r\n//       </div>\r\n//     );\r\n// }\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n      auth: state.auth\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  uploadUserPhoto: (userId, file, onSuccess, onError) => { dispatch(uploadUserPhoto(userId, file, onSuccess, onError)) },\r\n  setUserMainPhoto: (userId, photoId, onSuccess, onError) => { dispatch(setUserMainPhoto(userId, photoId, onSuccess, onError)) },\r\n  setUserMainPhotoUrl: (url) => { dispatch(setUserMainPhotoUrl(url)) },\r\n  fetchAuthUser: (id, onSuccess, onError) => { dispatch(fetchAuthUser(id, onSuccess, onError)) },\r\n  deleteUserPhoto: (userId, photoId, onSuccess, onError) => { dispatch(deleteUserPhoto(userId, photoId, onSuccess, onError)) }\r\n});\r\n\r\nclass PhotoEditor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n     \r\n        this.state = {\r\n            files: [],\r\n            isUploadingPhoto: false\r\n        };\r\n\r\n        this.handleDroppedFiles = this.handleDroppedFiles.bind(this);\r\n        this.handleUploadFile = this.handleUploadFile.bind(this);\r\n        this.handleRemoveFile = this.handleRemoveFile.bind(this);\r\n        this.setMainPhoto = this.setMainPhoto.bind(this);\r\n        this.handleDeletePhoto = this.handleDeletePhoto.bind(this);\r\n    }\r\n\r\n    handleDroppedFiles = (files=> {\r\n      console.log(\"PhotoEditor.handleDroppedFiles\",files);\r\n      this.setState({files});\r\n    });\r\n\r\n    handleUploadFile = (index=>{\r\n      this.setState({isUploadingPhoto: true});\r\n      const file = this.state.files[index]\r\n      console.log(\"PhotoEditor.handleUploadFile\",file);\r\n      this.props.uploadUserPhoto(this.props.auth.decodedToken.nameid, file,\r\n        (res)=>{\r\n          console.log(res);\r\n          const photo = {\r\n            id: res.id,\r\n            url: res.url,\r\n            description: res.description,\r\n            dateAdded: res.dateAdded,\r\n            isMain: res.isMain\r\n          };\r\n\r\n          this.props.handleUploadedPhoto(photo);\r\n\r\n          if(photo.isMain){\r\n            this.props.handleSetMainPhoto(photo.id);\r\n            this.props.fetchAuthUser(this.props.auth.decodedToken.nameid, \r\n              ()=>{},\r\n              (error)=>{\r\n                alertifyService.error(error.message);\r\n              });\r\n            // this.props.setUserMainPhotoUrl(photo.url);\r\n          }\r\n\r\n          this.handleRemoveFile(index);\r\n          // alertifyService.success(`Uploaded file ${file.path} successfully!`);\r\n          this.setState({isUploadingPhoto: false});\r\n        },\r\n        (error)=>{\r\n          alertifyService.error(error.message);\r\n          this.setState({isUploadingPhoto: false});\r\n        });\r\n    });\r\n\r\n    handleRemoveFile = (index=>{\r\n\r\n      var files = [...this.state.files];\r\n      files.splice(index,1);\r\n      this.setState({files: files})\r\n    });\r\n\r\n    setMainPhoto = (photoId)=>{\r\n      this.props.setUserMainPhoto(this.props.auth.decodedToken.nameid, photoId, \r\n        ()=>{\r\n\r\n          this.props.handleSetMainPhoto(photoId);\r\n          \r\n          this.props.fetchAuthUser(this.props.auth.decodedToken.nameid, \r\n            ()=>{},\r\n            (error)=>{\r\n              alertifyService.error(error.message);\r\n            });\r\n          // alertifyService.success(`Set photo ${photoId} as main photo successfully!`);\r\n        },\r\n        (error)=>{\r\n          alertifyService.error(error.message);\r\n        });\r\n    }\r\n\r\n    handleDeletePhoto = (photoId)=>{\r\n      alertifyService.confirm('Are you sure you want to delete this photo?', ()=>{\r\n        this.props.deleteUserPhoto(this.props.auth.decodedToken.nameid, photoId,\r\n          ()=>{\r\n            this.props.handleDeletedPhoto(photoId);\r\n            // alertifyService.success(`Deleted photo ${photoId} successfully!`);\r\n            this.props.fetchAuthUser(this.props.auth.decodedToken.nameid, \r\n              ()=>{},\r\n              (error)=>{\r\n                alertifyService.error(error.message);\r\n              });\r\n          },\r\n          (error)=>{\r\n            alertifyService.error(error.message);\r\n          })\r\n      });\r\n    }\r\n    \r\n    render() {\r\n        return(\r\n            <div className=\"container\">\r\n              {\r\n                  this.props.photos && this.props.photos.length>0?\r\n                  <div className=\"row mt-3\">\r\n                    {\r\n                        this.props.photos.map(photo=>{\r\n                            return(\r\n                                <div key={photo.id} className=\"col-sm-6 col-md-4 col-lg-3 my-1 text-center\">\r\n                                    <img src={photo.url} className={\"img-thumbnail p-1 \"+styles.imgThumbnail} alt=\"\" />\r\n                                    <div className=\"text-center mt-1\">\r\n                                        <button type=\"button\" className={\"mr-1 btn btn-sm \"+(photo.isMain?\"btn-success active\":\"btn-secondary\")} \r\n                                          onClick={(e)=>{this.setMainPhoto(photo.id)}}\r\n                                          disabled={photo.isMain}\r\n                                        >Main</button>\r\n                                        <button type=\"button\" className=\"btn btn-sm btn-danger\"\r\n                                          onClick={(e)=>{this.handleDeletePhoto(photo.id)}}\r\n                                        >\r\n                                            <i className=\"fas fa-trash-alt\"></i>\r\n                                        </button>\r\n                                    </div> \r\n                                </div>\r\n                            );\r\n                        })\r\n                    }\r\n                  </div>\r\n                  :null\r\n                }\r\n                <PhotoUploader \r\n                  files = {this.state.files}\r\n                  handleDroppedFiles = {this.handleDroppedFiles}\r\n                  handleUploadFile = {this.handleUploadFile}\r\n                  handleRemoveFile = {this.handleRemoveFile}\r\n                  isUploadingPhoto = {this.state.isUploadingPhoto}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PhotoEditor);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { fetchUser, updateUser } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport styles from './MemberEditComponent.module.scss';\r\nimport { Tabs, Tab } from 'react-bootstrap';\r\nimport { Control, LocalForm} from 'react-redux-form';\r\nimport { Prompt } from 'react-router-dom';\r\nimport PhotoEditor from './PhotoEditorComponent';\r\nimport ImgUser from '../shared/img/user.png';\r\nimport TimeAgo from 'react-timeago'\r\nimport { genderOptions } from \"../shared/global\";\r\nimport { Form, Field, useForm, FormSpy } from 'react-final-form'\r\nimport { required, minLength, maxLength, validDate } from '../shared/validators';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        auth: state.auth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchUser: (id, onSuccess, onError) => { dispatch(fetchUser(id, onSuccess, onError)); },\r\n    updateUser: (id, user, onSuccess, onError) => { dispatch(updateUser(id, user, onSuccess, onError)); }\r\n});\r\n\r\nclass MemberEdit extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: null,\r\n            // profileForm: {\r\n            //     dirty:false,\r\n            //     touched: {\r\n            //         introduction: false,\r\n            //         lookingFor: false,\r\n            //         interests: false,\r\n            //         city: false,\r\n            //         country: false\r\n            //     }\r\n            // }\r\n            profileForm: {\r\n                fields:{\r\n                    introduction: {\r\n                        value:''\r\n                    },\r\n                    gender: {\r\n                        value:''\r\n                    },\r\n                    dateOfBirth: {\r\n                        value:''\r\n                    },\r\n                    country: {\r\n                        value:''\r\n                    },\r\n                    city: {\r\n                        value:''\r\n                    }\r\n                },\r\n                valid: false,\r\n                touched: false,\r\n                dirty: false\r\n            }\r\n        }\r\n\r\n        this.handleInputChangeProfileForm = this.handleInputChangeProfileForm.bind(this);\r\n        this.handleBlurProfileForm = this.handleBlurProfileForm.bind(this);\r\n        this.handleSubmitProfileForm = this.handleSubmitProfileForm.bind(this);\r\n\r\n        this.handleBeforeunload = this.handleBeforeunload.bind(this);\r\n\r\n        this.handleUploadedPhoto = this.handleUploadedPhoto.bind(this);\r\n        this.handleSetMainPhoto = this.handleSetMainPhoto.bind(this);\r\n        this.handleDeletedPhoto = this.handleDeletedPhoto.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(this.props.fetchUser(\r\n            this.props.auth.decodedToken.nameid,\r\n            (user)=>{   \r\n                // alertifyService.success('Fetched your profile successfully!');\r\n\r\n                let profileForm = this.state.profileForm;\r\n                profileForm.fields.introduction.value = user.introduction||\"\";\r\n                profileForm.fields.gender.value = user.gender||\"\";\r\n                profileForm.fields.dateOfBirth.value = user.dateOfBirth||\"\";\r\n                profileForm.fields.country.value = user.country||\"\";\r\n                profileForm.fields.city.value = user.city||\"\";\r\n\r\n                this.setState({\r\n                    user: user\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n\r\n        window.addEventListener(\"beforeunload\", this.handleBeforeunload);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('beforeunload', this.handleBeforeunload);\r\n    }\r\n\r\n    handleBeforeunload(event) {\r\n        if(this.state.profileForm.dirty){\r\n            event.preventDefault();    \r\n            return (event || window.event).returnValue = 'Are you sure you want to continue? Any unsaved changes will be lost!';\r\n        }       \r\n    }\r\n\r\n    handleUploadedPhoto(photo) {\r\n\r\n        // var photos = [...this.state.user.photos];\r\n\r\n        // console.log(photo);\r\n        // photos.push(photo);\r\n\r\n        // this.setState({\r\n        //     user: {...this.state.user, photos: photos}\r\n        // });\r\n\r\n        this.props.fetchUser(\r\n            this.props.auth.decodedToken.nameid,\r\n            (user)=>{   \r\n                this.setState({\r\n                    user: user\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    handleSetMainPhoto(photoId) {\r\n\r\n        this.props.fetchUser(\r\n            this.props.auth.decodedToken.nameid,\r\n            (user)=>{   \r\n                this.setState({\r\n                    user: user\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n\r\n        // var photos = [...this.state.user.photos];\r\n\r\n        // var oldMainPhoto = photos.find(p=>p.isMain==true);\r\n        // var newMainPhoto = photos.find(p=>p.id==photoId);\r\n        \r\n        // newMainPhoto.isMain = true;\r\n\r\n        // if(oldMainPhoto.id!=newMainPhoto.id){\r\n        //     oldMainPhoto.isMain = false;\r\n        // }\r\n\r\n        // this.setState({\r\n        //     user: {...this.state.user, photos: photos, photoUrl: newMainPhoto.url}\r\n        // });\r\n    }\r\n\r\n    handleDeletedPhoto(photoId) {\r\n\r\n        // var photos = [...this.state.user.photos];\r\n        // console.log(photos.findIndex(p=>p.id==photoId));\r\n        // photos.splice(photos.findIndex(p=>p.id==photoId), 1);\r\n\r\n        // this.setState({\r\n        //     user: {...this.state.user, photos: photos}\r\n        // });\r\n\r\n        this.props.fetchUser(\r\n            this.props.auth.decodedToken.nameid,\r\n            (user)=>{   \r\n                this.setState({\r\n                    user: user\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    handleInputChangeProfileForm(event){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let form = this.state.profileForm;\r\n        form.fields[name].value = value;\r\n        form.dirty = true;\r\n\r\n        form = this.validateProfileForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    handleBlurProfileForm = (event) => {\r\n\r\n        const target = event.target;\r\n        const name = target.name;\r\n        console.log(\"MemberEditComponent.handleBlurProfileForm\", name);\r\n        let form = this.state.profileForm;\r\n        form.fields[name].touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateProfileForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    validateProfileForm(form){\r\n\r\n        for (let key in form.fields) {\r\n            if(!Array.isArray(form.fields[key])){\r\n                form.fields[key].error = null;\r\n            }\r\n            else{\r\n                form.fields[key].forEach(element => {\r\n                    element.error = null;\r\n                });\r\n            }\r\n\r\n        }\r\n        \r\n        form.valid = true;\r\n\r\n        // if (!required(form.fields.introduction.value)){\r\n        //     form.valid = false;      \r\n        //     form.fields.introduction.error = 'Introduction is required.';\r\n        // }\r\n    \r\n        // if (!required(form.fields.gender.value)){\r\n        //     form.valid = false;\r\n        //     form.fields.gender.error = 'Gender is required.';      \r\n        // }\r\n        console.log(form);\r\n        if (required(form.fields.dateOfBirth.value) && !validDate(form.fields.dateOfBirth.value)){\r\n            form.valid = false;\r\n            form.fields.dateOfBirth.error = 'Date of birth should be in yyyy-mm-dd format.';      \r\n        }\r\n       \r\n        return form;\r\n    }\r\n\r\n    handleSubmitProfileForm(event) {\r\n        event.preventDefault();\r\n        this.props.updateUser(this.props.auth.decodedToken.nameid,\r\n            {\r\n                introduction: this.state.profileForm.fields.introduction.value,\r\n                gender: this.state.profileForm.fields.gender.value,\r\n                dateOfBirth: this.state.profileForm.fields.dateOfBirth.value,\r\n                country: this.state.profileForm.fields.country.value,\r\n                city: this.state.profileForm.fields.city.value\r\n            },\r\n            ()=>{\r\n                // alertifyService.success('Updated your profile successfully!');\r\n                let profileForm = this.state.profileForm;\r\n                profileForm.touched = false;\r\n                profileForm.dirty = false;\r\n                this.setState({\r\n                    profileForm: profileForm\r\n                });\r\n            },\r\n            error=>{\r\n                alertifyService.error(error.message);\r\n            });\r\n    }\r\n\r\n    // handleBlurProfileForm = (field) => (evt) => {\r\n    //     this.setState({\r\n    //         profileForm: {...this.state.profileForm, touched: {...this.state.profileForm.touched, [field]: true} }\r\n    //     });\r\n    // }\r\n\r\n    showFormFieldError(name){\r\n        return this.state.profileForm.fields[name].error && this.state.profileForm.fields[name].touched\r\n    }\r\n\r\n\r\n    render() { \r\n\r\n        // const { form, handleSubmit, values, pristine, submitting } = useForm();\r\n\r\n        return(     \r\n            <div className=\"container mt-4\">\r\n               \r\n                    <Prompt\r\n                        when={this.state.profileForm.dirty}\r\n                        message=\"Are you sure you want to continue? Any unsaved changes will be lost!\"\r\n                    />\r\n             \r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <h1 className=\"text-left\">\r\n                            Edit Profile\r\n                        </h1>\r\n                    </div>\r\n                    <div className=\"col-md-8\">\r\n              \r\n                        {\r\n                            this.state.profileForm.dirty?\r\n                            <div className=\"alert alert-info text-left\">\r\n                                <strong>Information:</strong> You have made changes. Any unsaved changes will be lost!\r\n                            </div>\r\n                            :\r\n                            null\r\n                        }\r\n            \r\n                    </div>                   \r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <div className=\"card\">\r\n                            <div className=\"p-3\">\r\n                            <img className=\"card-img-top img-thumbnail\" src={this.state.user?this.state.user.photoUrl||ImgUser:ImgUser} alt={this.state.user?this.state.user.knownAs:''}/>\r\n                            </div>\r\n                            <div className={\"card-body \"+styles.cardBody}>\r\n                                {/* <div className=\"text-left\">\r\n                                    <strong>Location:</strong>\r\n                                    <p>{this.state.user?this.state.user.city:''}, {this.state.user?this.state.user.country:''}</p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Age:</strong>\r\n                                    <p>{this.state.user?this.state.user.age:''}</p>\r\n                                </div> */}\r\n                                <div className=\"text-left\">\r\n                                    <strong>Last Active At:</strong>\r\n                                    <p>{this.state.user?<TimeAgo date={this.state.user.lastActive} live={false}/>:null}</p>\r\n                                    {/* <p>{this.state.user?this.state.user.lastActive:''}</p> */}\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Register At:</strong>\r\n                                    {/* <p>{this.state.user?this.state.user.created:''}</p> */}\r\n                                    <p>{this.state.user?(new Date(this.state.user.created)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'}):''}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className={\"card-footer \"+styles.cardFooter}>\r\n                                <button disabled={!this.state.profileForm.dirty} form=\"profile-form\" className=\"btn btn-success btn-block\">Save Changes</button>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"tab-panel\">\r\n                            <Tabs className=\"member-tabs\" defaultActiveKey=\"edit-profile\">\r\n                                <Tab className=\"text-left\" eventKey=\"edit-profile\" title=\"Edit Profile\">\r\n                                <form noValidate id=\"profile-form\" className=\"mt-3 mx-2\" onSubmit={this.handleSubmitProfileForm}>\r\n                                    <div className=\"form-group row text-left\">\r\n                                        <label className=\"col-sm-2 col-form-label font-weight-bold \">Introduction</label>\r\n                                        <div className=\"col-sm\">\r\n                                            <textarea name=\"introduction\" type=\"text\" className={\"form-control \"+(this.showFormFieldError('introduction')?'is-invalid':'')} placeholder=\"Write something about yourself...\"\r\n                                                value={this.state.profileForm.fields.introduction.value}\r\n                                                onChange={this.handleInputChangeProfileForm}\r\n                                                onBlur={this.handleBlurProfileForm}\r\n                                                // minLength={minTitleLength} maxLength={maxTitleLength}\r\n                                            />\r\n                                            <div className=\"invalid-feedback\">{this.showFormFieldError('introduction')?this.state.form.fields.introduction.error:''}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"form-group row text-left \">\r\n                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">Gender</label>\r\n                                        <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                           \r\n                                            <select name=\"gender\" className={\"form-control \"+(this.showFormFieldError('gender')?'is-invalid':'')} \r\n                                                value={this.state.profileForm.fields.gender.value}\r\n                                                onChange={this.handleInputChangeProfileForm}\r\n                                                onBlur={this.handleBlurProfileForm}\r\n                                            >\r\n                                            <option value=''></option>\r\n                                            {\r\n                                                \r\n                                                genderOptions.map(gender=>{\r\n                                                    return (\r\n                                                        <option key={gender.value} value={gender.value}>\r\n                                                            { gender.display }\r\n                                                        </option>\r\n                                                    );\r\n                                                })\r\n                                            }\r\n                                            </select>\r\n                                            <div className=\"invalid-feedback\">{this.showFormFieldError('gender')?this.state.form.fields.gender.error:''}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"form-group row text-left \">\r\n                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">Date of Birth</label>\r\n                                        <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                            <input name=\"dateOfBirth\" type=\"date\" className={\"form-control \"+(this.showFormFieldError('dateOfBirth')?'is-invalid':'')} \r\n                                                value={this.state.profileForm.fields.dateOfBirth.value}\r\n                                                onChange={this.handleInputChangeProfileForm}\r\n                                                onBlur={this.handleBlurProfileForm}\r\n                                            />\r\n                                           \r\n                                            <div className=\"invalid-feedback\">{this.showFormFieldError('dateOfBirth')?this.state.form.fields.dateOfBirth.error:''}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"form-group row text-left \">\r\n                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">Country</label>\r\n                                        <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                            <input name=\"country\" type=\"text\" className={\"form-control \"+(this.showFormFieldError('country')?'is-invalid':'')} \r\n                                                value={this.state.profileForm.fields.country.value}\r\n                                                onChange={this.handleInputChangeProfileForm}\r\n                                                onBlur={this.handleBlurProfileForm}\r\n                                            />\r\n                                           \r\n                                            <div className=\"invalid-feedback\">{this.showFormFieldError('country')?this.state.form.fields.country.error:''}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"form-group row text-left \">\r\n                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">City</label>\r\n                                        <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                            <input name=\"city\" type=\"text\" className={\"form-control \"+(this.showFormFieldError('city')?'is-invalid':'')} \r\n                                                value={this.state.profileForm.fields.city.value}\r\n                                                onChange={this.handleInputChangeProfileForm}\r\n                                                onBlur={this.handleBlurProfileForm}\r\n                                            />\r\n                                           \r\n                                            <div className=\"invalid-feedback\">{this.showFormFieldError('city')?this.state.form.fields.city.error:''}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                \r\n                                </form>\r\n                                    {/* <Form\r\n                                        onSubmit={this.handleSubmitProfileForm}\r\n                                        validate={values => {\r\n                                          const errors = {};\r\n                                          if (!required(values.introduction)) {\r\n                                            errors.introduction = \"Introduction is required.\";\r\n                                          }\r\n\r\n                                          if (!required(values.gender)) {\r\n                                            errors.gender = \"Gender is required.\";\r\n                                          }\r\n\r\n                                          if (!required(values.dateOfBirth)) {\r\n                                            errors.dateOfBirth = \"Date of birth is required.\";\r\n                                          }\r\n\r\n                                          return errors;\r\n                                        }}\r\n                                        render={({ handleSubmit, reset, submitting}) => (\r\n                                            <form id=\"profile-form\" className=\"mt-3 mx-2\" onSubmit={handleSubmit}>\r\n                                              <Field name=\"introduction\">\r\n                                                {({ input, meta }) => (\r\n                                                    <div className=\"form-group row text-left \">\r\n                                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">Introduction</label>\r\n                                                        <div className=\"col-sm\">\r\n                                                            <textarea {...input} type=\"text\" className={\"form-control \"+(meta.touched&&meta.error?'is-invalid':'')} placeholder=\"Write something about yourself...\"/>\r\n                                                            <div className=\"invalid-feedback\">{meta.touched&&meta.error?meta.error:''}</div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                              </Field>\r\n                                              <Field name=\"gender\">\r\n                                                {({ input, meta }) => (\r\n                                                    <div className=\"form-group row text-left\">\r\n                                                        <label className=\"col-sm-2 col-form-label font-weight-bold\">Gender</label>\r\n                                                        <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                            <select {...input} className={\"form-control \"+(meta.touched&&meta.error?'is-invalid':'')}>\r\n                                                            <option disabled value='' style={{display:\"none\"}}></option>\r\n                                                            {\r\n                                                                    genderOptions.map(gender=>{\r\n                                                                    return (\r\n                                                                        <option key={gender.value} value={gender.value}>\r\n                                                                            { gender.display }\r\n                                                                        </option>\r\n                                                                    );\r\n                                                                })\r\n                                                            }\r\n                                                            </select>\r\n                                                            <div className=\"invalid-feedback\">{meta.touched&&meta.error?meta.error:''}</div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                              </Field>\r\n                                              <Field name=\"dateOfBirth\">\r\n                                                    {({ input, meta }) => (\r\n                                                        <div className=\"form-group row text-left\">\r\n                                                           <label className=\"col-sm-2 col-form-label font-weight-bold\">Date of Birth</label>\r\n                                                           <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                               <input {...input} type=\"date\" className={\"form-control \"+(meta.touched&&meta.error?'is-invalid':'')} />\r\n                                                               <div className=\"invalid-feedback\">{meta.touched&&meta.error?meta.error:''}</div>\r\n                                                           </div>\r\n                                                       </div>\r\n                                                    )}\r\n                                              </Field>\r\n                                              <Field name=\"country\">\r\n                                                    {({ input, meta }) => (\r\n                                                        <div className=\"form-group row text-left\">\r\n                                                           <label className=\"col-sm-2 col-form-label font-weight-bold\">Country</label>\r\n                                                           <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                               <input {...input} type=\"text\" className={\"form-control \"+(meta.touched&&meta.error?'is-invalid':'')} />\r\n                                                               <div className=\"invalid-feedback\">{meta.touched&&meta.error?meta.error:''}</div>\r\n                                                           </div>\r\n                                                       </div>\r\n                                                    )}\r\n                                              </Field>\r\n                                              <Field name=\"city\">\r\n                                                    {({ input, meta }) => (\r\n                                                        <div className=\"form-group row text-left\">\r\n                                                           <label className=\"col-sm-2 col-form-label font-weight-bold\">City</label>\r\n                                                           <div className=\"col-sm col-lg-5 col-md-6\">\r\n                                                               <input {...input} type=\"text\" className={\"form-control \"+(meta.touched&&meta.error?'is-invalid':'')} />\r\n                                                               <div className=\"invalid-feedback\">{meta.touched&&meta.error?meta.error:''}</div>\r\n                                                           </div>\r\n                                                       </div>\r\n                                                    )}\r\n                                              </Field>\r\n                                            </form>\r\n                                          )}\r\n                                    >\r\n\r\n                                    </Form> */}\r\n                                   \r\n                                </Tab>\r\n                                <Tab className=\"text-left\" eventKey=\"edit-photos\" title=\"Edit Photos\">\r\n                                    <PhotoEditor\r\n                                        photos={this.state.user?this.state.user.photos:null}\r\n                                        handleUploadedPhoto={this.handleUploadedPhoto}\r\n                                        handleSetMainPhoto={this.handleSetMainPhoto}\r\n                                        handleDeletedPhoto={this.handleDeletedPhoto}\r\n                                    />\r\n                                </Tab>                               \r\n                            </Tabs>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MemberEdit);","import React, { Component } from 'react'\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { fetchMessages, deleteMessage } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport styles from './MessagesComponent.module.scss';\r\nimport { withRouter } from 'react-router-dom';\r\nimport TimeAgo from 'react-timeago'\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchMessages: (id, pageNumber, pageSize, messageContainer, onSuccess, onError) => { dispatch(fetchMessages(id, pageNumber, pageSize, messageContainer, onSuccess, onError)); },\r\n    deleteMessage: (id, userId, onSuccess, onError) => { dispatch(deleteMessage(id, userId, onSuccess, onError)); }\r\n});\r\n\r\nclass Messages extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            messages: [],\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            },\r\n            messageContainer: 'Unread'\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.handleChangeMessageContainer = this.handleChangeMessageContainer.bind(this);\r\n        this.deleteMessage = this.deleteMessage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n           this.loadMessages(this.state.pagination.currentPage);\r\n        },1);\r\n    }\r\n\r\n    loadMessages(pageIndex){\r\n        this.props.fetchMessages(\r\n            this.props.authUser.id,\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.messageContainer,\r\n            (messages, pagination)=>{\r\n            \r\n                // alertifyService.success('Fetched messages successfully!');\r\n                \r\n                this.setState({\r\n                    messages: messages,\r\n                    pagination:pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadMessages(pageIndex);\r\n    }\r\n\r\n    handleChangeMessageContainer(value){\r\n\r\n        this.setState({\r\n            messageContainer: value\r\n        });\r\n        \r\n        setTimeout(()=>{\r\n            this.loadMessages(this.state.pagination.currentPage);\r\n         },1);\r\n    }\r\n\r\n    deleteMessage(id){\r\n        alertifyService.confirm(\"Are you sure you want to delete this message\",\r\n            ()=>{\r\n                this.props.deleteMessage(id, this.props.authUser.id, \r\n                    ()=>{\r\n                        // let messages = this.state.messages;\r\n                        // messages.splice(messages.findIndex(m => m.id==id), 1);\r\n                        // this.setState({\r\n                        //     messages:messages\r\n                        // });\r\n                        this.loadMessages(this.state.pagination.currentPage);\r\n                        // alertifyService.success('Message has been deleted');\r\n                    },\r\n                    (error)=>{\r\n                        alertifyService.error(error.message);\r\n                    });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"container mt-5\">\r\n                    <div className=\"row\">\r\n                        <div className=\"btn-group\">\r\n                            <button className={\"btn btn-primary \"+(this.state.messageContainer==\"Unread\"?\"active\":\"\")} \r\n                                onClick={(e)=>{this.handleChangeMessageContainer(\"Unread\")}}\r\n                            >\r\n                                <i className=\"fa fa-envelope\"></i> Unread\r\n                            </button>\r\n                            <button className={\"btn btn-primary \"+(this.state.messageContainer==\"Inbox\"?\"active\":\"\")} \r\n                                onClick={(e)=>{this.handleChangeMessageContainer(\"Inbox\")}}\r\n                            >\r\n                                <i className=\"fa fa-envelope-open\"></i> Inbox\r\n                            </button>\r\n                            <button className={\"btn btn-primary \"+(this.state.messageContainer==\"Outbox\"?\"active\":\"\")} \r\n                                onClick={(e)=>{this.handleChangeMessageContainer(\"Outbox\")}}\r\n                            >\r\n                                <i className=\"fa fa-paper-plane\"></i> Outbox\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {\r\n                        this.state.messages.length <= 0?\r\n                        <div className=\"row\">\r\n                            <h3 className=\"my-2\">No messages</h3>\r\n                        </div>\r\n                        : \r\n                        <div className=\"row\" >\r\n                            <table className={\"table table-hover \"+styles.table} style={{cursor: \"pointer\"}}>\r\n                                <tbody>\r\n                                <tr>\r\n                                    <th className=\"text-left\" style={{width: \"30%\"}}>Message</th>\r\n                                    <th className=\"text-left\" style={{width: \"25%\"}}>{this.state.messageContainer=='Outbox'?'To':'From'}</th>\r\n                                    <th className=\"text-left\" style={{width: \"25%\"}}>{this.state.messageContainer=='Outbox'?'Sent':'Received'}</th>\r\n                                    <th className=\"text-left\" style={{width: \"20%\"}}></th>\r\n                                </tr>\r\n                    \r\n                                {\r\n                                    this.state.messages.map(message=>{\r\n                                        return (\r\n                                        <tr key={message.id} onClick={(e)=>{this.props.history.push(\"/members/\"+(this.state.messageContainer=='Outbox'?message.recipientId:message.senderId)+\"?tab=messages\")}}>\r\n                                            <td className={\"text-left \"+styles.td}>{message.content}</td>\r\n                                            <td className={\"text-left \"+styles.td}>\r\n                                                {\r\n                                                    this.state.messageContainer=='Outbox'?\r\n                                                    <div>\r\n                                                        <img src={message.recipientPhotoUrl} className={\"img-circle rounded-circle mr-2 \"+styles.imgCircle}/>\r\n                                                        <strong>{message.recipientKnownAs}</strong>\r\n                                                    </div>\r\n                                                    :\r\n                                                    <div>\r\n                                                        <img src={message.senderPhotoUrl} className={\"img-circle rounded-circle mr-2 \"+styles.imgCircle}/>\r\n                                                        <strong>{message.senderKnownAs}</strong>\r\n                                                    </div>\r\n                                                }\r\n                                            </td>\r\n                                            <td className={\"text-left \"+styles.td}><TimeAgo date={message.messageSent} live={false}/></td>\r\n                                            <td className={\"text-left \"+styles.td}>\r\n                                                <button className=\"btn btn-danger\" \r\n                                                    onClick={(e)=>{\r\n                                                        e.stopPropagation();\r\n                                                        this.deleteMessage(message.id);\r\n                                                    }}\r\n                                                >Delete</button>\r\n                                            </td>\r\n                                        </tr>\r\n                                        );\r\n                                    })\r\n                                }\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    }\r\n                  \r\n                  <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n            </div>\r\n\r\n  \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Messages));","import React, { Component, useCallback } from 'react'\r\nimport { createPost, fetchTags } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions, defaultTags } from \"../shared/global\";\r\nimport TagsInput from 'react-tagsinput'\r\nimport 'react-tagsinput/react-tagsinput.css' // If using WebPack and style-loader.\r\n\r\nimport Autosuggest from 'react-autosuggest'\r\nimport './CreatePostComponent.css';\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport { required, minLength, maxLength } from '../shared/validators';\r\nimport styles from './CreatePostComponent.module.scss';\r\n\r\n// function states () {\r\n//     return [\r\n//       {name: 'Web Development'},\r\n//       {name: 'Machine Learning'},\r\n//       {name: 'Game Development'},\r\n//       {name: 'Virtual Reality'}\r\n//     ]\r\n//   }\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchTags: (tagParams, onSuccess, onError) => { dispatch(fetchTags(tagParams, onSuccess, onError)) }\r\n    // createPost: (title, description, category, tags, links, images, onSuccess, onError) => { dispatch(createPost(title, description, category, tags, links, images, onSuccess, onError)) }\r\n});\r\n\r\nconst minTitleLength = 4;\r\nconst maxTitleLength = 100;\r\nconst minDescriptionLength = 20;\r\nconst maxDescriptionLength = 3000;\r\nconst maxTagNumber = 5;\r\nconst maxImageNumber = 5;\r\n\r\nclass PostForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            form: {\r\n                fields:{\r\n                    title: {\r\n                        value:''\r\n                    },\r\n                    description: {\r\n                        value:''\r\n                    },\r\n                    category: {\r\n                        value:''\r\n                    },\r\n                    links: [\r\n                        {\r\n                            value:''\r\n                        }\r\n                    ],\r\n                    tags: {\r\n                        value:[]\r\n                    },\r\n                    images: {\r\n                        value:[]\r\n                    }\r\n                },\r\n                mainImage:0,\r\n                isUploadingImage: false,\r\n                valid: false,\r\n                touched: false\r\n            },\r\n            suggestedTags: defaultTags.map(tag=>{return {name: tag}})\r\n        }\r\n\r\n        this.handleInputChangeTags = this.handleInputChangeTags.bind(this);\r\n        this.handleFormArrayFieldChange = this.handleFormArrayFieldChange.bind(this);\r\n        this.handleFormArrayFieldBlur = this.handleFormArrayFieldBlur.bind(this);\r\n        this.onClickAddLinkButton = this.onClickAddLinkButton.bind(this);\r\n        this.onClickRemoveLinkButton = this.onClickRemoveLinkButton.bind(this);\r\n\r\n        this.onInputAcceptedImage = this.onInputAcceptedImage.bind(this);\r\n        this.onInputRejectedImage = this.onInputRejectedImage.bind(this);\r\n        this.onImageFileDialogCancel = this.onImageFileDialogCancel.bind(this);\r\n        // this.handleUploadFile = this.handleUploadFile.bind(this);\r\n        this.handleRemoveImage = this.handleRemoveImage.bind(this);\r\n\r\n        this.tagsInputProps = {\r\n            className: 'react-tagsinput-input form-control',\r\n            placeholder: 'Type a tag and press Enter'\r\n        };\r\n\r\n        this.handleInputChangeForm = this.handleInputChangeForm.bind(this);\r\n        this.handleBlurForm = this.handleBlurForm.bind(this);\r\n        this.handleSubmitForm = this.handleSubmitForm.bind(this);\r\n        this.validateForm = this.validateForm.bind(this);\r\n\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n        if(this.props.post!=null){\r\n            let form = this.state.form;\r\n            form.fields.title.value = this.props.post.title;\r\n            \r\n            form.fields.description.value = this.props.post.description;\r\n\r\n            form.fields.category.value = this.props.post.category;\r\n            \r\n            form.fields.links = this.props.post.links.map(link=>{return {value:link}});\r\n            \r\n            form.fields.tags.value = this.props.post.tags.map(tag=>tag.toTitleCase());\r\n            \r\n            form.fields.images.value = this.props.post.postImages.map(\r\n                image=>{\r\n                    return {\r\n                        id: image.id,\r\n                        src: image.url\r\n                    }\r\n                });\r\n\r\n            form.mainImage = this.props.post.postImages.findIndex(image=>image.isMain);\r\n            \r\n            this.setState({form:form});\r\n        }\r\n\r\n        setTimeout(this.props.fetchTags(\r\n            {\r\n                orderBy:\"count\",\r\n                minCount: 0\r\n            },\r\n            (tags)=>{                    \r\n                // alertifyService.success('Fetched tags successfully!'); \r\n                tags = tags.map(tag=>{return {name:tag.value}});\r\n                let suggestedTags = this.state.suggestedTags;\r\n                for(let i=0; i<suggestedTags.length; i++){\r\n                    if(tags.findIndex(tag=>tag.name==suggestedTags[i].name)==-1){\r\n                        tags.push(suggestedTags[i]);\r\n                    }\r\n                }\r\n                this.setState({\r\n                    suggestedTags: tags\r\n                });\r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n    }\r\n\r\n    handleInputChangeTags(tags){\r\n        tags = tags.map(tag=>tag.toTitleCase());\r\n\r\n        if((new Set(tags)).size !== tags.length){\r\n            alertifyService.error(\"Tags cannot be duplicated!\");\r\n            return;\r\n        }\r\n\r\n        let form = this.state.form;\r\n        form.fields.tags.value = tags;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    handleFormArrayFieldChange(event, index){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name][index].value = value;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    handleFormArrayFieldBlur(event, index){\r\n        const target = event.target;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name][index].touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    onClickAddLinkButton(){\r\n        let form = this.state.form;\r\n        form.fields.links.push({value:\"\"});\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    onClickRemoveLinkButton(index, event){\r\n        event.preventDefault();\r\n\r\n        let form = this.state.form;\r\n        form.fields.links.splice(index,1);\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    showFormFieldError(name){\r\n        return this.state.form.fields[name].error && this.state.form.fields[name].touched\r\n    }\r\n\r\n    showFormArrayFieldError(name, index){\r\n        return this.state.form.fields[name][index].error && this.state.form.fields[name][index].touched\r\n    }\r\n\r\n    onInputAcceptedImage = (acceptedFiles => {\r\n        // let form = this.state.form;\r\n        // form.fields.imagesToUpload.value = acceptedFiles;\r\n        // this.setState({\r\n        //     form: form\r\n        // });\r\n\r\n        acceptedFiles.forEach(acceptedFile => {\r\n            let form = this.state.form;\r\n            let index = form.fields.images.value.length;\r\n            // acceptedFile.isMain = index==0;\r\n            form.fields.images.value.push(acceptedFile);\r\n            this.setState({\r\n                form: form\r\n            });\r\n\r\n            let reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                let form = this.state.form;\r\n                form.fields.images.value[index].src=e.target.result;\r\n                form.fields.images.touched = true;\r\n                form = this.validateForm(form);\r\n                this.setState({\r\n                    form: form\r\n                });\r\n                \r\n            };\r\n\r\n            reader.readAsDataURL(acceptedFile);\r\n        });\r\n    });\r\n  \r\n    onInputRejectedImage = (rejectedFiles => {\r\n        console.log(\"CreatePostComponent.onDropRejected\", rejectedFiles);\r\n        rejectedFiles.forEach(rejectedFile => {\r\n            alertifyService.error(`\"${rejectedFile.name}\" is not a valid image file!`)\r\n        });\r\n\r\n        let form = this.state.form;\r\n        form.fields.images.touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    });\r\n\r\n    onImageFileDialogCancel(args){\r\n        let form = this.state.form;\r\n        form.fields.images.touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n\r\n    }\r\n    // handleUploadFile = (index=>{\r\n    //     console.log(\"CreatePostComponent.handleUploadFile\", index);\r\n        \r\n    //     this.setState({\r\n    //         form: {...this.state.form, isUploadingImage:true}\r\n    //     });\r\n\r\n    //     const file = this.state.files[index];\r\n    //     this.props.uploadPostImage(file,\r\n    //       (res)=>{\r\n    //         console.log(res);\r\n    //         // const photo = {\r\n    //         //   id: res.id,\r\n    //         //   url: res.url,\r\n    //         //   description: res.description,\r\n    //         //   dateAdded: res.dateAdded,\r\n    //         //   isMain: res.isMain\r\n    //         // };\r\n  \r\n    //         // console.log(photo);\r\n    //         // this.props.handleUploadedPhoto(photo);\r\n  \r\n    //         // if(photo.isMain){\r\n    //         //   this.props.handleSetMainPhoto(photo.id);\r\n    //         //   this.props.setUserMainPhotoUrl(photo.url);\r\n    //         // }\r\n  \r\n    //         // this.handleRemoveFile(index);\r\n    //         alertifyService.success(`Uploaded file ${file.path} successfully!`);\r\n    //         this.setState({\r\n    //             form: {...this.state.form, isUploadingImage:false}\r\n    //         });\r\n    //       },\r\n    //       (error)=>{\r\n    //         alertifyService.error(error.message);\r\n    //         this.setState({\r\n    //             form: {...this.state.form, isUploadingImage:false}\r\n    //         });\r\n    //       });\r\n    // });\r\n  \r\n    handleRemoveImage = (index=>{\r\n        console.log(\"CreatePostComponent.handleRemoveFile\", index);\r\n        let form = this.state.form;\r\n        form.fields.images.value.splice(index,1);\r\n        if(form.mainImage>index){\r\n            form.mainImage--;\r\n        }\r\n        else if(form.mainImage==index){\r\n            form.mainImage = 0;\r\n        }\r\n\r\n        form = this.validateForm(form);\r\n        this.setState({\r\n            form: form\r\n        });\r\n    });\r\n  \r\n    tagsInputRenderLayout (tagComponents, inputComponent) {\r\n        return (\r\n          <span>\r\n            {inputComponent}\r\n            {tagComponents}\r\n           \r\n          </span>\r\n        )\r\n    }\r\n\r\n    autocompleteRenderInput ({addTag, ...props}) {\r\n\r\n        const handleOnChange = (e, {newValue, method}) => {\r\n          if (method === 'enter') {\r\n            e.preventDefault()\r\n          } else {\r\n            props.onChange(e)\r\n          }\r\n        }\r\n\r\n        const inputValue = (props.value && props.value.trim().toLowerCase()) || '';\r\n        const inputLength = inputValue.length;\r\n\r\n        var suggestions = this.state.suggestedTags.filter((tag) => {\r\n          return tag.name.slice(0, inputLength) === inputValue\r\n        });\r\n  \r\n        for(let i=0; i<suggestions.length; i++){\r\n            suggestions[i] = { name: suggestions[i].name.toTitleCase() }\r\n        }\r\n\r\n        return (\r\n            <Autosuggest\r\n                ref={props.ref}\r\n                suggestions={suggestions}\r\n                shouldRenderSuggestions={(value) => value && value.trim().length > 0}\r\n                getSuggestionValue={(suggestion) => suggestion.name}\r\n                renderSuggestion={(suggestion) => <span>{suggestion.name}</span>}\r\n                inputProps={{...props, onChange: handleOnChange}}\r\n                onSuggestionSelected={(e, {suggestion}) => {\r\n                addTag(suggestion.name)\r\n                }}\r\n                onSuggestionsClearRequested={() => {}}\r\n                onSuggestionsFetchRequested={() => {}}\r\n            />\r\n            \r\n        )\r\n    }\r\n\r\n    setMainImage = (index)=>{\r\n        this.setState({\r\n            form: {...this.state.form, mainImage:index}\r\n        });\r\n    }\r\n\r\n    handleInputChangeForm(event){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].value = value;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n    \r\n    handleBlurForm = (event) => {\r\n        console.log(\"CreatePostComponent.handleBlurForm\");\r\n\r\n        const target = event.target;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    validateForm(form){\r\n\r\n        for (let key in form.fields) {\r\n            if(!Array.isArray(form.fields[key])){\r\n                form.fields[key].error = null;\r\n            }\r\n            else{\r\n                form.fields[key].forEach(element => {\r\n                    element.error = null;\r\n                });\r\n            }\r\n\r\n        }\r\n        \r\n        form.valid = true;\r\n\r\n        if (!required(form.fields.title.value)){\r\n            form.valid = false;      \r\n            form.fields.title.error = 'Title is required.';\r\n        }\r\n        else if(!minLength(minTitleLength)(form.fields.title.value) || !maxLength(maxTitleLength)(form.fields.title.value)){\r\n            form.valid = false;      \r\n            form.fields.title.error = `Title should be between ${minTitleLength} to ${maxTitleLength} characters.`;\r\n        }\r\n    \r\n        if (!required(form.fields.description.value)){\r\n            form.valid = false;\r\n            form.fields.description.error = 'Description is required.';      \r\n        }\r\n        else if(!minLength(minDescriptionLength)(form.fields.description.value) || !maxLength(maxDescriptionLength)(form.fields.description.value)){\r\n            form.valid = false;      \r\n            form.fields.description.error = `Description should be between ${minDescriptionLength} to ${maxDescriptionLength} characters.`;\r\n        }\r\n\r\n        if (!required(form.fields.category.value)){\r\n            form.valid = false;\r\n            form.fields.category.error = 'Please choose the resource category.';\r\n        }\r\n        \r\n        if (!required(form.fields.tags.value)){\r\n            form.valid = false;\r\n            form.fields.tags.error = 'Please add at least one tag.';\r\n        }\r\n        else if(form.fields.tags.value.length>maxTagNumber){\r\n            form.valid = false;\r\n            form.fields.tags.error = `At most ${maxTagNumber} tags can be added.`;\r\n        }\r\n\r\n        for(let i=0; i<form.fields.links.length; i++){\r\n            if (!required(form.fields.links[i].value)){\r\n                form.valid = false;\r\n                form.fields.links[i].error = 'Empty link is not allowed.';\r\n            }\r\n        }\r\n\r\n        if (!required(form.fields.images.value)){\r\n            form.valid = false;\r\n            form.fields.images.error = 'Please upload at least one image.';\r\n        }\r\n        else if(form.fields.images.value.length>maxImageNumber){\r\n            form.valid = false;\r\n            form.fields.images.error = `At most ${maxImageNumber} images can be added.`;\r\n        }\r\n       \r\n        return form;\r\n    }\r\n\r\n    handleSubmitForm(event) {\r\n        event.preventDefault();\r\n        \r\n        let form = this.state.form;\r\n\r\n        if(form.touched){\r\n            if(!form.valid){\r\n               \r\n                for (let key in form.fields) {\r\n                    \r\n                    if(!Array.isArray(form.fields[key])){\r\n                        form.fields[key].touched = true;\r\n                    }\r\n                    else{\r\n                        form.fields[key].forEach(element => {\r\n                            element.touched = true;\r\n                        });\r\n                    }\r\n                }\r\n                form.touched = true;\r\n\r\n                form = this.validateForm(form);\r\n\r\n                this.setState({\r\n                    form\r\n                });\r\n    \r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n        else{\r\n            \r\n            for (let key in form.fields) {\r\n                    \r\n                if(!Array.isArray(form.fields[key])){\r\n                    form.fields[key].touched = true;\r\n                }\r\n                else{\r\n                    form.fields[key].forEach(element => {\r\n                        element.touched = true;\r\n                    });\r\n                }\r\n            }\r\n            form.touched = true;\r\n\r\n            form = this.validateForm(form);\r\n\r\n            this.setState({\r\n                form\r\n            });\r\n\r\n            if(!form.valid){\r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        let encodedLinkValues = this.state.form.fields.links.map(link=>{\r\n            return encodeURIComponent(link.value);\r\n        });\r\n\r\n        console.log(encodedLinkValues);\r\n\r\n        this.props.onSubmitPost(\r\n            this.state.form.fields.title.value,\r\n            this.state.form.fields.description.value,\r\n            this.state.form.fields.category.value,\r\n            this.state.form.fields.tags.value.map(tag=>tag.toLowerCase()).join(','),\r\n            encodedLinkValues.join(','),\r\n            this.state.form.fields.images.value,\r\n            this.state.form.mainImage\r\n        );\r\n        // this.props.createPost(\r\n        //     this.state.form.fields.title.value,\r\n        //     this.state.form.fields.description.value,\r\n        //     this.state.form.fields.category.value,\r\n        //     this.state.form.fields.tags.value.join('|'),\r\n        //     encodedLinkValues.join(','),\r\n        //     this.state.form.fields.images.value,\r\n        //     this.state.form.mainImage,\r\n        //     (user)=>{\r\n        //         alertifyService.success(\"Created post successfully!\");\r\n        //     },\r\n        //     (error)=>{\r\n        //         alertifyService.error(error.message);\r\n        //     }\r\n        // )\r\n        \r\n    }\r\n\r\n    render() {\r\n        return(\r\n       \r\n                        <form id=\"post-form\" noValidate onSubmit={this.handleSubmitForm}>\r\n                            <div className=\"form-group row text-left\">\r\n                                <label className=\"col-sm-2 col-form-label font-weight-bold \">Title</label>\r\n                                <div className=\"col-sm\">\r\n                                    <input name=\"title\" type=\"text\" className={\"form-control \"+(this.showFormFieldError('title')?'is-invalid':'')} placeholder=\"Name of the Study Resource\"\r\n                                        value={this.state.form.fields.title.value}\r\n                                        onChange={this.handleInputChangeForm}\r\n                                        onBlur={this.handleBlurForm}\r\n                                        minLength={minTitleLength}\r\n                                    />\r\n                                    <div className=\"invalid-feedback\">{this.showFormFieldError('title')?this.state.form.fields.title.error:''}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group row text-left \">\r\n                                <label className=\"col-sm-2 col-form-label font-weight-bold\">Description</label>\r\n                                <div className=\"col-sm\">\r\n                                    <textarea name=\"description\" type=\"text\" className={\"form-control \"+(this.showFormFieldError('description')?'is-invalid':'')} placeholder=\"Description of the Study Resource\"\r\n                                        value={this.state.form.fields.description.value}\r\n                                        onChange={this.handleInputChangeForm}\r\n                                        onBlur={this.handleBlurForm}\r\n                                        minLength={minDescriptionLength}\r\n                                    />\r\n                                    <div className=\"invalid-feedback\">{this.showFormFieldError('description')?this.state.form.fields.description.error:''}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group row text-left \">\r\n                                <label className=\"col-sm-2 col-form-label font-weight-bold\">Category</label>\r\n                                <div className=\"col-sm col-lg-4 col-md-6\">\r\n                                    {/* <textarea type=\"text\" className=\"form-control\" placeholder=\"Description of the Study Resource\"/> */}\r\n                                    <select name=\"category\" className={\"form-control \"+(this.showFormFieldError('category')?'is-invalid':'')} \r\n                                        value={this.state.form.fields.category.value}\r\n                                        onChange={this.handleInputChangeForm}\r\n                                        onBlur={this.handleBlurForm}\r\n                                    >\r\n                                    <option disabled value='' style={{display:\"none\"}}></option>\r\n                                    {\r\n                                        \r\n                                        postCategoryOptions.map(category=>{\r\n                                            return (\r\n                                                <option key={category.value} value={category.value}>\r\n                                                    { category.display }\r\n                                                </option>\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                    </select>\r\n                                    <div className=\"invalid-feedback\">{this.showFormFieldError('category')?this.state.form.fields.category.error:''}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group row text-left \">\r\n                                <label className=\"col-sm-2 col-form-label font-weight-bold\">Tags</label>\r\n                                <div className=\"col-sm\">\r\n                                    <TagsInput className={\"text-left\"} \r\n                                    inputProps={{\r\n                                        className: 'react-tagsinput-input form-control '+(this.showFormFieldError('tags')?'is-invalid':''),\r\n                                        name: \"tags\",\r\n                                        onBlur: this.handleBlurForm,\r\n                                        placeholder: this.state.form.fields.tags.value.length<maxTagNumber?'Type a tag and press Enter':`At most ${maxTagNumber} tags can be added.`,\r\n                                        disabled:this.state.form.fields.tags.value.length>=maxTagNumber\r\n                                    }} \r\n                                    \r\n                                    renderInput={this.autocompleteRenderInput.bind(this)} \r\n                                    renderLayout={this.tagsInputRenderLayout} \r\n                                    value={this.state.form.fields.tags.value}\r\n                                    onChange={this.handleInputChangeTags} />\r\n                                    <div className=\"invalid-feedback\" style={{display:\"block\"}}>{this.showFormFieldError('tags')?this.state.form.fields.tags.error:''}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group row text-left \">\r\n                                <label className=\"col-sm-2 col-form-label font-weight-bold\">Links</label>\r\n                                <div className=\"col-sm-10\">\r\n                                    {\r\n                                        this.state.form.fields.links.map((link, index)=>{\r\n                                            return (\r\n                                                <div key={index} className=\"input-group mb-2\">\r\n                                                    <input name='links' type=\"text\" className={\"form-control \"+(this.showFormArrayFieldError('links',index)?'is-invalid':'')} placeholder=\"http://example.com\" \r\n                                                        value={link.value} \r\n                                                        onChange={(event)=>this.handleFormArrayFieldChange(event, index)}\r\n                                                        onBlur={(event)=>this.handleFormArrayFieldBlur(event, index)}\r\n                                                    />\r\n                                                    {\r\n                                                        this.state.form.fields.links.length>1?\r\n                                                        <div className=\"input-group-append\">\r\n                                                            <button className=\"btn btn-danger\" onClick={(event)=>{this.onClickRemoveLinkButton(index,event)}}>\r\n                                                            <span className=\"fas fa-minus mr-2\"></span>\r\n                                                            Remove\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        :null\r\n                                                    }\r\n                                                    <div className=\"invalid-feedback\" >{this.showFormArrayFieldError('links',index)?this.state.form.fields.links[index].error:''}</div>\r\n                                                </div>\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                    \r\n                                </div>\r\n                                <div className=\"col-sm text-right\">\r\n                                    <button className=\"btn btn-primary\" type=\"button\" onClick={this.onClickAddLinkButton}>\r\n                                        <span className=\"fas fa-plus mr-1\"></span>\r\n                                        Add a new link\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"form-group row\">\r\n                                <label className=\"col-sm-2 col-form-label text-left font-weight-bold\">Images</label>\r\n                                <div className=\"col-sm text-left\">\r\n                                    <div className=\"mx-0 px-0 col-sm-12 col-md-6 col-lg-4 mb-2\">\r\n                                        <Dropzone onFileDialogCancel={this.onImageFileDialogCancel} onDropAccepted={this.onInputAcceptedImage} onDropRejected={this.onInputRejectedImage} accept=\"image/*\" noDrag>\r\n                                            {({getRootProps, getInputProps}) => (\r\n                                            <label htmlFor=\"input-image\" {...getRootProps({tabIndex:null, className: styles.labelInputImage+\" \"+(this.showFormFieldError('images')?styles.isInvalid:\"\")})}>                            \r\n                                                <input id=\"input-image\" {...getInputProps({\r\n                                                    // name:\"images\",\r\n                                                    // onBlur:this.handleBlurForm\r\n                                                })} />\r\n                                                <span className=\"fas fa-upload mr-1\"></span> Upload Images\r\n                                            </label>                                                   \r\n                                            )}\r\n                                        </Dropzone>\r\n                                        <div className=\"invalid-feedback\" style={{display:\"block\"}}>{this.showFormFieldError('images')?this.state.form.fields.images.error:''}</div>\r\n                                    </div>\r\n                                    <div className=\"row mx-0 px-0 mb-2\">\r\n                                    {\r\n                                        this.state.form.fields.images.value.map((image,index)=>{\r\n                                            return(                          \r\n                                                image.src!=null?\r\n                                                <div key={index} className=\"col-sm-6 col-md-4 col-lg-3 mb-4 text-center\">\r\n                                                    <img src={image.src} className={styles.imgThumbnail} alt=\"\" />\r\n                                                    <div className=\"text-center mt-1\">\r\n                                                        <button type=\"button\" className={\"mr-1 btn btn-sm \"+(index==this.state.form.mainImage?\"btn-success active\":\"btn-secondary\")} \r\n                                                            onClick={(e)=>{this.setMainImage(index)}}\r\n                                                            disabled={index==this.state.form.mainImage}\r\n                                                        >Cover</button>\r\n                                                        <button type=\"button\" className=\"btn btn-sm btn-danger\"\r\n                                                            onClick={(e)=>{this.handleRemoveImage(index)}}\r\n                                                        >\r\n                                                            <i className=\"fas fa-trash-alt\"></i>\r\n                                                        </button>\r\n                                                    </div> \r\n                                                </div>\r\n                                                :null\r\n                                            );\r\n                                        })\r\n                                    }\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                \r\n                            </div>\r\n\r\n                            {/* <div className=\"form-group text-left row \">\r\n                                <div className=\"offset-md-2 col\">\r\n                                    <button className=\"btn btn-success btn-lg\" type=\"submit\" >\r\n                                        Submit\r\n                                    </button>\r\n                                </div>\r\n                            </div> */}\r\n                        </form>\r\n   \r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PostForm);","import React, { Component, useCallback } from 'react'\r\nimport {createPost, fetchAuthUser } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions } from \"../shared/global\";\r\nimport TagsInput from 'react-tagsinput'\r\nimport 'react-tagsinput/react-tagsinput.css' // If using WebPack and style-loader.\r\n\r\nimport Autosuggest from 'react-autosuggest'\r\nimport './CreatePostComponent.css';\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport { required, minLength, maxLength } from '../shared/validators';\r\nimport styles from './CreatePostComponent.module.scss';\r\nimport PostForm from \"./PostFormComponent\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction states () {\r\n    return [\r\n      {name: 'Web Development'},\r\n      {name: 'Machine Learning'},\r\n      {name: 'Game Development'},\r\n      {name: 'Virtual Reality'}\r\n    ]\r\n  }\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchAuthUser: (id, onSuccess, onError) => { dispatch(fetchAuthUser(id, onSuccess, onError)) },\r\n    createPost: (title, description, category, tags, links, images, mainImage, onSuccess, onError) => { dispatch(createPost(title, description, category, tags, links, images, mainImage, onSuccess, onError)) }\r\n});\r\n\r\nconst minTitleLength = 4;\r\nconst maxTitleLength = 100;\r\nconst minDescriptionLength = 20;\r\nconst maxDescriptionLength = 800;\r\nconst maxTagNumber = 5;\r\n\r\nclass CreatePost extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            \r\n        }\r\n\r\n        this.onSubmitPost = this.onSubmitPost.bind(this);\r\n    }\r\n\r\n    onSubmitPost(\r\n        title,\r\n        description,\r\n        category,\r\n        tags,\r\n        encodedLinks,\r\n        images,\r\n        mainImage\r\n    ){\r\n        this.props.createPost(\r\n            title,\r\n            description,\r\n            category,\r\n            tags,\r\n            encodedLinks,\r\n            images,\r\n            mainImage,\r\n            (post)=>{\r\n                // alertifyService.success(\"Created post successfully!\");\r\n                this.props.history.push(`/posts/${post.id}`);\r\n                this.props.fetchAuthUser(this.props.authUser.id,\r\n                    (user)=>{\r\n                        // alertifyService.success(\"Fetched auth user successfully!\");\r\n                        \r\n                    },\r\n                    (error)=>{\r\n                        alertifyService.error(error.message);\r\n                    });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"container mt-4\">\r\n                <h1 className=\"mb-4 text-left\">\r\n                    Create New Post\r\n                </h1>\r\n                <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                        <PostForm\r\n                            onSubmitPost={this.onSubmitPost}\r\n                        />\r\n                        <div className=\"text-left row \">\r\n                            <div className=\"offset-md-2 col\">\r\n                                <button className=\"btn btn-success btn-lg\" type=\"submit\" form=\"post-form\">\r\n                                    Submit\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreatePost));","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { fetchPost, likePost, cancelLikedPost, dislikePost, cancelDislikedPost } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\n// import styles from './MemberDetailsComponent.module.scss';\r\n// import { Tabs, Tab } from 'react-bootstrap';\r\nimport ImageGallery from 'react-image-gallery';\r\n// import ImgUser from '../../shared/img/user.png';\r\nimport TimeAgo from 'react-timeago'\r\n// import MemberMessages from './member/MemberMessagesComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport queryString from 'query-string';\r\n// import './MemberDetailsComponent.scss';\r\nimport './PostDetailsComponent.css';\r\nimport ImgUser from '../shared/img/user.png';\r\nimport styles from './PostDetailsComponent.module.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuthenticated: state.auth.isAuthenticated,\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchPost: (id, onSuccess, onError) => { dispatch(fetchPost(id, onSuccess, onError)); },\r\n    likePost: (userId, postId, onSuccess, onError) => { dispatch(likePost(userId, postId, onSuccess, onError)); },\r\n    cancelLikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelLikedPost(userId, postId, onSuccess, onError)); },\r\n    dislikePost: (userId, postId, onSuccess, onError) => { dispatch(dislikePost(userId, postId, onSuccess, onError)); },\r\n    cancelDislikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelDislikedPost(userId, postId, onSuccess, onError)); }\r\n});\r\n\r\nclass PostDetails extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // let initTab = queryString.parse(this.props.location.search).tab;\r\n      \r\n        this.state = {\r\n            post:null\r\n        }\r\n\r\n        this.onClickLikeButton = this.onClickLikeButton.bind(this);\r\n        this.onClickDislikeButton = this.onClickDislikeButton.bind(this);\r\n        this.onClickEditButton = this.onClickEditButton.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(this.props.fetchPost(\r\n            this.props.match.params.id,\r\n            (post)=>{                    \r\n                // alertifyService.success('Fetched post '+this.props.match.params.id+' successfully!');     \r\n\r\n                post.tags = post.tags;\r\n                let links = post.links.split(',');\r\n                for(let i=0;i<links.length; i++){\r\n                    links[i] = decodeURIComponent(links[i]);\r\n                }\r\n                post.links = links;\r\n                this.setState({\r\n                    post: post\r\n                });\r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n    }\r\n\r\n    fetchPost(){\r\n        this.props.fetchPost(\r\n            this.props.match.params.id,\r\n            (post)=>{                    \r\n                // alertifyService.success('Fetched post '+this.props.match.params.id+' successfully!');\r\n\r\n                post.tags = post.tags;\r\n                let links = post.links.split(',');\r\n                for(let i=0;i<links.length; i++){\r\n                    links[i] = decodeURIComponent(links[i]);\r\n                }\r\n                post.links = links;\r\n                this.setState({\r\n                    post: post\r\n                });\r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    onClickLikeButton(event){\r\n\r\n        if(!this.isPostLiked()){\r\n            this.props.likePost(\r\n                this.props.authUser.id,\r\n                this.props.match.params.id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Liked post successfully!');\r\n                    this.fetchPost();\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelLikedPost(\r\n                this.props.authUser.id,\r\n                this.props.match.params.id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Cancel liked post successfully!');\r\n                    this.fetchPost();\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    isPostLiked(){\r\n        return this.state.post!=null&&this.state.post.likers.findIndex(p=>p.likerId == this.props.authUser.id)!=-1;\r\n    }\r\n\r\n    isPostDisliked(){\r\n        return this.state.post!=null&&this.state.post.dislikers.findIndex(p=>p.dislikerId == this.props.authUser.id)!=-1;\r\n    }\r\n\r\n    onClickDislikeButton(event){\r\n        if(!this.isPostDisliked()){\r\n            this.props.dislikePost(\r\n                this.props.authUser.id,\r\n                this.props.match.params.id,\r\n                (res)=>{\r\n                    // alertifyService.success('Disliked post successfully!');\r\n                    this.fetchPost();\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelDislikedPost(\r\n                this.props.authUser.id,\r\n                this.props.match.params.id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Cancel disliked post successfully!');\r\n                    this.fetchPost();\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    onClickEditButton(event){\r\n        this.props.history.push(`/posts/${this.props.match.params.id}/edit`);\r\n    }\r\n\r\n    render() {\r\n        // const postImages = [{\r\n        //         original: \"http://res.cloudinary.com/atom0520/image/upload/v1559884265/glewuxjd8rwve3ymc5eh.png\",\r\n        //         thumbnail: \"http://res.cloudinary.com/atom0520/image/upload/v1559884265/glewuxjd8rwve3ymc5eh.png\"\r\n        //     },\r\n        //     {\r\n        //         original: \"http://res.cloudinary.com/atom0520/image/upload/v1559884395/necu38bdkvdfgrs5gwaf.png\",\r\n        //         thumbnail: \"http://res.cloudinary.com/atom0520/image/upload/v1559884395/necu38bdkvdfgrs5gwaf.png\"\r\n        //     },\r\n        //     {\r\n        //         original: \"http://res.cloudinary.com/atom0520/image/upload/v1559884403/u7uvux74wx0ezfumxyqj.png\",\r\n        //         thumbnail: \"http://res.cloudinary.com/atom0520/image/upload/v1559884403/u7uvux74wx0ezfumxyqj.png\"\r\n        //     }];\r\n        const postImages = this.state.post? this.state.post.postImages.map((postImage)=>{\r\n            return  {\r\n                original: postImage.url,\r\n                thumbnail: postImage.url\r\n            };\r\n        }):null;\r\n        \r\n        return(\r\n            <div className=\"container mt-4 pt-3 mb-4 post-details-component\">\r\n                {/* <h1 className=\"mb-4 text-left\">\r\n                    Post Details\r\n                </h1> */}\r\n                {/* <div className=\"row\">\r\n                    <h1>\r\n                        {this.state.post? this.state.post.knownAs: ''}'s Profile\r\n                    </h1>\r\n                </div> */}\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-3\">\r\n                        <div className=\"card\">\r\n                            <div className=\"card-body\">\r\n                                <div className=\"text-left\">\r\n                                    <strong>Author:</strong>\r\n                                    <p>\r\n                                    {\r\n                                        this.state.post?\r\n                                        <Link to={\"/members/\"+this.state.post.author.id} className=\"navbar-brand\">\r\n                                            <span className=\"mr-2\">\r\n                                                <img className={styles.imgAuthor} src={this.state.post?(this.state.post.author.photoUrl || ImgUser):''} alt=\"\"/>\r\n                                            </span>\r\n                                            {\r\n                                                this.state.post?\r\n                                                this.state.post.author.username\r\n                                                :null\r\n                                            }\r\n                                        </Link>\r\n                                        :null\r\n                                    }\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Created At:</strong>\r\n                                    <p>\r\n                                    {\r\n                                        this.state.post?\r\n                                        (new Date(this.state.post.created)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'})\r\n                                        :''\r\n                                    }\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong>Last Updated At:</strong>\r\n                                    <p>\r\n                                    {\r\n                                        this.state.post?\r\n                                        (new Date(this.state.post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric'})\r\n                                        :''\r\n                                    }\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong><i className=\"far fa-thumbs-up\"></i> Likes:</strong>\r\n                                    <p>\r\n                                    {\r\n                                        this.state.post?\r\n                                        this.state.post.likers.length\r\n                                        :''\r\n                                    }\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <strong><i className=\"far fa-thumbs-down\"></i> Dislikes:</strong>\r\n                                    <p>\r\n                                    {\r\n                                        this.state.post?\r\n                                        this.state.post.dislikers.length\r\n                                        :''\r\n                                    }\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            {\r\n                                this.props.isAuthenticated?\r\n                                <div className=\"card-footer \">\r\n                                    <button className={\"btn mx-1 \"+\r\n                                    (this.isPostLiked()?\"btn-success\":\"btn-outline-secondary\")}\r\n                                        onClick={this.onClickLikeButton}\r\n                                    >\r\n                                    <i className=\"far fa-thumbs-up\"></i> Like\r\n                                    </button>\r\n                                    <button className={\"btn mx-1 \"+\r\n                                    (this.isPostDisliked()?\"btn-danger\":\"btn-outline-secondary\")}\r\n                                        onClick={this.onClickDislikeButton}\r\n                                    >\r\n                                    <i className=\"far fa-thumbs-down\"></i> Dislike</button>                           \r\n                                </div>\r\n                                :null\r\n                            }\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div className=\"col-md-9\">\r\n                        <div className=\"card\">\r\n                            <div className=\"card-body\">\r\n\r\n                                    <div className=\"row text-left\">\r\n                                       \r\n                                        {/* <label className=\"col-lg-2 col-md-3 font-weight-bold \">Title</label> */}\r\n                                        <div className=\"col-sm\">\r\n                                            <h2>{this.state.post?this.state.post.title:''}</h2>\r\n                                            {/* <p>{this.state.post?this.state.post.title:''}</p> */}\r\n                                        </div>\r\n                                    </div>\r\n                                   \r\n                                    <div className=\"row text-left mb-2\">\r\n                                        {/* <label className=\"col-lg-2 col-md-3 font-weight-bold\">Category</label> */}\r\n                                        <div className=\"col-sm col-lg-4 col-md-6\">\r\n                                            <strong className=\"mr-1\">Category: </strong> {this.state.post?this.state.post.category.toUpperCase():''}\r\n                                            {/* <p>\r\n                                           \r\n                                            </p> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row text-left mb-4\">\r\n                                        {/* <label className=\"col-lg-2 col-md-3 font-weight-bold\">Tags</label> */}\r\n                                        <div className=\"col-sm\">\r\n                                            <strong className=\"mr-1\">Tags: </strong>\r\n                                            {\r\n                                                this.state.post?\r\n                                                this.state.post.tags.map(tag=>tag.toTitleCase()).join(\", \")\r\n                                                // this.state.post.tags.map((tag, index)=>{\r\n                                                //     return(\r\n                                                //         <span key={index} className=\"mr-2\">{tag}</span>\r\n                                                //     );\r\n                                                // })\r\n                                                :null\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                     <div className=\"row text-left mb-4\">\r\n                                        <label className=\"col-12 font-weight-bold\">Description</label>\r\n                                        <div className=\"col-sm\">\r\n                                            <p className={\"bg-light px-3 py-3 \"+styles.pDescription}>\r\n                                            {this.state.post?this.state.post.description:''}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row text-left mb-5\">\r\n                                        <label className=\"col-lg-2 col-md-3 font-weight-bold\">Links</label>\r\n                                        <div className=\"col-sm-10\">\r\n                                            {\r\n                                                this.state.post?\r\n                                                this.state.post.links.map((link, index)=>{\r\n                                                    return(\r\n                                                        <div className=\"mb-2\" key={index}>\r\n                                                            <a href={link} target=\"_blank\">{link}</a>\r\n                                                        </div>\r\n                                                    );\r\n                                                })\r\n                                                :null\r\n                                            }\r\n                                            {/* <div>\r\n                                            <a href=\"http://test1.com\">http://test1.com</a>\r\n                                            </div>\r\n                                            <div>\r\n                                            <a href=\"http://test2.com\">http://test2.com</a>\r\n                                            </div>\r\n                                            <div>\r\n                                            <a href=\"http://test3.com\">http://test3.com</a>\r\n                                            </div> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row text-left mt-4\">\r\n                                        <label className=\"col-lg-2 col-md-3 font-weight-bold\">Images</label>\r\n                                        <div className=\"col-sm-8 col-md-6 col-lg-4\">\r\n                                        {\r\n                                      \r\n                                            postImages?\r\n                                            <ImageGallery items={postImages} showPlayButton={false} showFullscreenButton={false} useBrowserFullscreen={false}/>\r\n                                            :null\r\n                                        }\r\n                                            \r\n                                        </div>\r\n                                    </div>\r\n                                    {\r\n                                        this.props.isAuthenticated && this.state.post!=null && this.state.post.author.id==this.props.authUser.id?\r\n                                        <div className=\"text-right mt-4 mt-sm-0\">\r\n                                            <button className={\"btn btn-block-xs-only btn-warning\"}\r\n                                                onClick={this.onClickEditButton}\r\n                                            >\r\n                                                <i className=\"fas fa-edit\"></i> Edit\r\n                                            </button>\r\n                                        </div>\r\n                                        :null\r\n                                    }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PostDetails));","import React, { Component } from 'react'\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { fetchPosts, likePost, cancelLikedPost, dislikePost, cancelDislikedPost } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions } from \"../shared/global\";\r\nimport styles from './PostsComponent.module.scss';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { maxPostListDescriptionDisplayLength } from '../shared/global';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuthenticated: state.auth.isAuthenticated,\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchPosts: (pageNumber, pageSize, postParams, onSuccess, onError) => { \r\n        dispatch(fetchPosts(pageNumber, pageSize, postParams, onSuccess, onError)); },\r\n    likePost: (userId, postId, onSuccess, onError) => { dispatch(likePost(userId, postId, onSuccess, onError)); },\r\n    cancelLikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelLikedPost(userId, postId, onSuccess, onError)); },\r\n    dislikePost: (userId, postId, onSuccess, onError) => { dispatch(dislikePost(userId, postId, onSuccess, onError)); },\r\n    cancelDislikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelDislikedPost(userId, postId, onSuccess, onError)); }\r\n});\r\n\r\nconst orderByOptions = [\r\n    {value:'relevance', display:'Most Relevant'}, \r\n    {value:'updated', display:'Updated Time'}, \r\n    {value:'created', display:'Created Time'}, \r\n    {value:'likes', display:'Most Liked'},\r\n    {value:'dislikes', display:'Most Disliked'}\r\n]\r\n\r\nclass Posts extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            posts: null,\r\n            postParams:{\r\n                category: this.props.location.state?this.props.location.state.category||\"\":\"\",\r\n                search: this.props.location.state?this.props.location.state.search||\"\":\"\",\r\n                orderBy: \"updated\"\r\n            },\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            }\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.handleLikePost = this.handleLikePost.bind(this);\r\n        this.onClickPost = this.onClickPost.bind(this);\r\n\r\n        this.handleInputChangePostParamsForm = this.handleInputChangePostParamsForm.bind(this);\r\n        this.handleSubmitPostParamsForm = this.handleSubmitPostParamsForm.bind(this);\r\n\r\n        this.onClickEditPostButton = this.onClickEditPostButton.bind(this);\r\n\r\n        console.log(this.props.location);\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n            this.loadPosts(this.state.pagination.currentPage);\r\n         }, 1);\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadPosts(pageIndex);\r\n    }\r\n\r\n    isPostLiked(postIndex){\r\n        return this.state.posts[postIndex].likers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleLikePost(postIndex){\r\n        if(!this.isPostLiked(postIndex)){\r\n            this.props.likePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].likers.push(this.props.authUser.id);\r\n\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelLikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Cancel liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                    \r\n                    \r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    isPostDisliked(postIndex){\r\n        return this.state.posts[postIndex].dislikers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleDislikePost(postIndex){\r\n        if(!this.isPostDisliked(postIndex)){\r\n            this.props.dislikePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Disliked post successfully!');\r\n\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].dislikers.push(this.props.authUser.id);\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelDislikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Cancel disliked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n    \r\n    onClickPost(postId){\r\n        this.props.history.push(`/posts/${postId}`);\r\n    }\r\n\r\n    onClickEditPostButton(postId){\r\n        this.props.history.push(`/posts/${postId}/edit`);\r\n    }\r\n\r\n    loadPosts(pageIndex){\r\n        this.props.fetchPosts(\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.postParams,\r\n            (posts, pagination)=>{\r\n                // alertifyService.success('Fetched posts successfully!');\r\n\r\n                this.setState({\r\n                    posts: posts,\r\n                    pagination: pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleInputChangePostParamsForm(event){\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            postParams: {...this.state.postParams, \r\n                [name]: value\r\n            }\r\n        });\r\n\r\n        if(name==\"category\" || name==\"orderBy\"){\r\n            setTimeout(()=>{\r\n            this.loadPosts(1);\r\n         }, 1);\r\n        }\r\n    }\r\n\r\n    handleSubmitPostParamsForm(event){\r\n        event.preventDefault();\r\n        this.loadPosts(1);\r\n    }\r\n\r\n    render() {\r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"container mt-4\">\r\n                    <div className=\"text-left mb-4\">\r\n                        <h2><i className=\"fas fa-search\"></i> Search Study Resources</h2>\r\n                    </div>\r\n                    <form className=\"row\" noValidate>   \r\n                       \r\n                        <div className=\"form-inline ml-3 mb-2\">\r\n                                <label className=\"mr-2\">Category</label>\r\n                                <select className=\"form-control\" style={{width: \"108px\"}} name=\"category\"\r\n                                    value={this.state.postParams.category}\r\n                                    onChange={this.handleInputChangePostParamsForm}\r\n                                >\r\n                                    <option key={\"all\"} value={\"\"}>\r\n                                        { \"All\" }\r\n                                    </option>\r\n                                {\r\n                                    postCategoryOptions.map(category=>{\r\n                                        return (\r\n                                            <option key={category.value} value={category.value}>\r\n                                                { category.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                                </select>\r\n                            </div>\r\n                  \r\n                     \r\n                  \r\n                        \r\n                        <div className=\"col-sm-12 col-lg mb-2\" >\r\n                    \r\n                        <div className=\"input-group \">\r\n                            <input className=\"form-control\"  type=\"text\" placeholder=\"Web Development\"\r\n                                value={this.state.postParams.search}\r\n                                onChange={this.handleInputChangePostParamsForm}\r\n                                name=\"search\"\r\n                            />\r\n                       \r\n                            <div className=\"input-group-append\">\r\n                             \r\n                                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmitPostParamsForm}>Search</button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        </div>\r\n                    \r\n                        <div className=\"form-inline ml-auto mb-2\">\r\n                            <label className=\"mr-2\">Order By</label>\r\n                            <select className=\"form-control\" style={{width: \"166px\"}} name=\"orderBy\"\r\n                                value={this.state.postParams.orderBy}\r\n                                onChange={this.handleInputChangePostParamsForm}\r\n                            >\r\n                                {\r\n                                    orderByOptions.map(orderBy=>{\r\n                                        return (\r\n                                            <option key={orderBy.value} value={orderBy.value}>\r\n                                                { orderBy.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n                        {/* <button type=\"submit\" className=\"btn btn-primary\" >Search</button> */}\r\n                        {/* <button type=\"button\" className=\"btn btn-info\" style={{marginLeft:\"10px\"}}\r\n                        >Reset Filter</button> */}\r\n                    \r\n                    </form>\r\n                    <br/>\r\n                    <div className=\"row mb-4\">                    \r\n                        {\r\n                            this.state.posts && this.state.posts.length?\r\n                            this.state.posts.map((post, index)=>{\r\n                                return(\r\n                                    <div key={post.id} className={\"col-12 p-4 border-bottom \"+(index==0?\"border-top \":\"\")+styles.divPost} onClick={()=>this.onClickPost(post.id)}>\r\n\r\n                                        <div className={\"row text-left\"} >\r\n                                            \r\n                                            {/* <div className=\"col-12 my-auto px-5 px-sm-2 col-sm-2\"> */}\r\n                                            <div className=\"my-auto text-center col-12 px-5 col-sm-2 px-sm-3\">\r\n                                                <img className={\" \"+styles.imgCardSide} src={post.mainPostImageUrl}></img>\r\n                                            </div>\r\n                                            {/* <div className=\"col pt-0 pt-sm-2\"> */}\r\n                                         \r\n                                            <div className=\"col col-sm-10 mt-3 mt-md-0\">\r\n                                                <h3 className=\"\">{post.title}</h3>\r\n                                                <div className=\"mb-2 text-secondary\">\r\n                                                    <span>Updated: {(new Date(post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})}</span>\r\n                                                </div>\r\n                                                <div className=\"mb-2\">\r\n                                                    <strong className=\"font-weight-bold\">Category: </strong> {post.category.toUpperCase()}\r\n                                                </div>\r\n                                                <div className=\"mb-3\">\r\n                                                    <strong className=\"font-weight-bold\">Tags: </strong> {post.tags.map(tag=>tag.toTitleCase()).join(\", \")}\r\n                                                </div>\r\n                                              \r\n                                                <div className={\"mb-4 \"}>{post.description.length<=maxPostListDescriptionDisplayLength?post.description.length:(post.description.substring(0,maxPostListDescriptionDisplayLength)+\"...\")}</div>\r\n                                                {\r\n                                                    this.props.isAuthenticated?\r\n                                                    <div className={\"row text-left\"} >\r\n                                                        <div className=\"col\">\r\n                                                            <button className={\"btn mr-2 \"+(post.likers.includes(this.props.authUser.id)?\"btn-success\":\"btn-outline-secondary\")}\r\n                                                                onClick={(e)=>{\r\n                                                                    e.stopPropagation(); \r\n                                                                    this.handleLikePost(index)}}\r\n                                                            >\r\n                                                                <i className=\"far fa-thumbs-up\"></i> Like · {post.likers.length}\r\n                                                            </button>\r\n                                                            <button className={\"btn \"+(post.dislikers.includes(this.props.authUser.id)?\"btn-danger\":\"btn-outline-secondary\")}\r\n                                                                onClick={(e)=>{\r\n                                                                    e.stopPropagation(); \r\n                                                                    this.handleDislikePost(index)}}\r\n                                                            >\r\n                                                                <i className=\"far fa-thumbs-down\"></i> Dislike · {post.dislikers.length}\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        {\r\n                                                            post.author.id==this.props.authUser.id?\r\n                                                            <div className=\"col-4 text-right\">\r\n                                                                <button className={\"btn btn-warning\"}\r\n                                                                    onClick={(e)=>{\r\n                                                                        e.stopPropagation();\r\n                                                                        this.onClickEditPostButton(post.id);\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <i className=\"fas fa-edit\"></i> Edit\r\n                                                                </button>\r\n                                                            </div>\r\n                                                            :null\r\n                                                        }\r\n                                                    </div>\r\n                                                    :\r\n                                                    <div className={\"row text-left\"} >\r\n                                                    <div className=\"col\">\r\n                                                        <button className={\"btn mr-2 btn-outline-secondary\"}\r\n                                                             onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.props.showModal(\"login\"); }}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-up\"></i> Like · {post.likers.length}\r\n                                                        </button>\r\n                                                        <button className={\"btn btn-outline-secondary\"}\r\n                                                            onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.props.showModal(\"login\"); }}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-down\"></i> Dislike · {post.dislikers.length}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                }\r\n                                                {/* <span className=\"ml-auto text-right\">\r\n                                                    \r\n                                                </span> */}\r\n                                                {/* <a href=\"#\" className=\"btn btn-primary\">Go somewhere</a> */}\r\n                                            </div>\r\n                                            {/* <div className=\"card-footer text-muted\">\r\n                                                2 days ago\r\n                                            </div> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    // <div key={post.id} className=\"col-lg-2 col-md-3 col-sm-6\">\r\n                                    //     {post.title}\r\n                                    // </div>\r\n                                );\r\n                            })\r\n                            :\r\n                            this.state.posts && this.state.posts.length==0?\r\n                            <h3 className=\"mx-auto text-secondary\">\r\n                                No relevant post yet.\r\n                            </h3>\r\n                            :null\r\n                        }                 \r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Posts));","import React, { Component, useCallback } from 'react'\r\nimport { fetchPost, updatePost } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions } from \"../shared/global\";\r\nimport TagsInput from 'react-tagsinput'\r\nimport 'react-tagsinput/react-tagsinput.css' // If using WebPack and style-loader.\r\n\r\nimport Autosuggest from 'react-autosuggest'\r\nimport './CreatePostComponent.css';\r\nimport Dropzone, {useDropzone} from 'react-dropzone';\r\nimport { required, minLength, maxLength } from '../shared/validators';\r\nimport styles from './CreatePostComponent.module.scss';\r\nimport PostForm from \"./PostFormComponent\";\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\n\r\nfunction states () {\r\n    return [\r\n      {name: 'Web Development'},\r\n      {name: 'Machine Learning'},\r\n      {name: 'Game Development'},\r\n      {name: 'Virtual Reality'}\r\n    ]\r\n  }\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchPost: (id, onSuccess, onError) => { dispatch(fetchPost(id, onSuccess, onError)); },\r\n    updatePost: (id, title, description, category, tags, links, deletedImages, addedImages, mainImage, onSuccess, onError) => \r\n    { dispatch(updatePost(id, title, description, category, tags, links, deletedImages, addedImages, mainImage, onSuccess, onError)) }\r\n});\r\n\r\nconst minTitleLength = 4;\r\nconst maxTitleLength = 100;\r\nconst minDescriptionLength = 20;\r\nconst maxDescriptionLength = 800;\r\nconst maxTagNumber = 5;\r\n\r\nclass EditPost extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            post: null\r\n        }\r\n\r\n        this.onSubmitPost = this.onSubmitPost.bind(this);\r\n        this.onClickCancelButton = this.onClickCancelButton.bind(this);\r\n\r\n        // console.log(this.props.match.params.id);\r\n        // console.log(this.props.authUser.posts);\r\n        // console.log(this.props.authUser.posts.includes(Number(this.props.match.params.id)));\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(!this.props.authUser.posts.includes(Number(this.props.match.params.id))){\r\n            return;\r\n        }\r\n        \r\n        setTimeout(this.props.fetchPost(\r\n            this.props.match.params.id,\r\n            (post)=>{                    \r\n                // alertifyService.success('Fetched post '+this.props.match.params.id+' successfully!');     \r\n\r\n                let links = post.links.split(',');\r\n                for(let i=0;i<links.length; i++){\r\n                    links[i] = decodeURIComponent(links[i]);\r\n                }\r\n                post.links = links;\r\n \r\n                this.setState({\r\n                    post: post\r\n                });\r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        ),1);\r\n    }\r\n\r\n    onClickCancelButton(event){\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    onSubmitPost(\r\n        title,\r\n        description,\r\n        category,\r\n        tags,\r\n        encodedLinks,\r\n        images,\r\n        mainImage\r\n    ){\r\n        \r\n        let deletedImages = [];\r\n        let addedImages = [];\r\n\r\n        this.state.post.postImages.forEach(postImage=>{\r\n            let index = images.findIndex(image=>image.id==postImage.id);\r\n            if(index==-1){\r\n                deletedImages.push(postImage.id);\r\n            }\r\n        });\r\n\r\n        images.forEach(image => {\r\n            if(image.path!=null){\r\n                addedImages.push(image);\r\n            }\r\n        });\r\n\r\n        let addedImageStartIndex = images.length - addedImages.length;\r\n\r\n        if(mainImage>=addedImageStartIndex)\r\n        {\r\n            mainImage = mainImage - addedImageStartIndex;\r\n        }\r\n        else{\r\n            mainImage = -images[mainImage].id;\r\n        }\r\n\r\n        this.props.updatePost(\r\n            this.props.match.params.id,\r\n            title,\r\n            description,\r\n            category,\r\n            tags,\r\n            encodedLinks,\r\n            deletedImages.join(\",\"),\r\n            addedImages,\r\n            mainImage,\r\n            (user)=>{\r\n                // alertifyService.success(\"Updated post successfully!\");\r\n                this.props.history.push(`/posts/${this.props.match.params.id}`);\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        )\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.authUser.posts.includes(Number(this.props.match.params.id))){\r\n            return <Redirect to={{ pathname: '/home' }} />;\r\n        }\r\n\r\n        return(\r\n            <div className=\"container mt-4\">\r\n                \r\n                <h1 className=\"mb-4 text-left\">\r\n                    Edit Post {this.props.match.params.id}\r\n                </h1>\r\n                <div className=\"card\">\r\n              \r\n                    <div className=\"card-body\">\r\n                    {\r\n                        this.state.post!=null?\r\n                        <React.Fragment>\r\n                            <PostForm\r\n                                post={this.state.post}\r\n                                onSubmitPost={this.onSubmitPost}\r\n                            />\r\n                            <div className=\"text-left row \">\r\n                                <div className=\"offset-md-2 col\">\r\n                                    <button className=\"btn btn-info btn-lg mr-3 \" type=\"submit\" form=\"post-form\">\r\n                                        Update\r\n                                    </button>\r\n                                    <button className=\"btn btn-secondary btn-lg\" onClick={this.onClickCancelButton}>\r\n                                        Cancel\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                        </React.Fragment>\r\n                        :null\r\n                    }\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(EditPost));","import React, { Component } from 'react'\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { fetchLikedPosts, likePost, cancelLikedPost, dislikePost, cancelDislikedPost } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions } from \"../shared/global\";\r\nimport styles from './PostsComponent.module.scss';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { maxPostListDescriptionDisplayLength } from '../shared/global';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchLikedPosts: (userId, pageNumber, pageSize, postParams, onSuccess, onError) => { \r\n        dispatch(fetchLikedPosts(userId, pageNumber, pageSize, postParams, onSuccess, onError)); },\r\n    likePost: (userId, postId, onSuccess, onError) => { dispatch(likePost(userId, postId, onSuccess, onError)); },\r\n    cancelLikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelLikedPost(userId, postId, onSuccess, onError)); },\r\n    dislikePost: (userId, postId, onSuccess, onError) => { dispatch(dislikePost(userId, postId, onSuccess, onError)); },\r\n    cancelDislikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelDislikedPost(userId, postId, onSuccess, onError)); }\r\n});\r\n\r\nconst orderByOptions = [\r\n    {value:'likedTime', display:'Liked Time'},\r\n    {value:'updated', display:'Updated Time'}\r\n]\r\n\r\nclass LikedPosts extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            posts: null,\r\n            postParams:{\r\n                category: \"\",\r\n                orderBy: \"likedTime\"\r\n            },\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            }\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.handleLikePost = this.handleLikePost.bind(this);\r\n        this.onClickPost = this.onClickPost.bind(this);\r\n\r\n        this.handleInputChangePostParamsForm = this.handleInputChangePostParamsForm.bind(this);\r\n        this.handleSubmitPostParamsForm = this.handleSubmitPostParamsForm.bind(this);\r\n\r\n        this.onClickEditPostButton = this.onClickEditPostButton.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n            this.loadPosts(this.state.pagination.currentPage);\r\n         }, 1);\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadPosts(pageIndex);\r\n    }\r\n\r\n    isPostLiked(postIndex){\r\n        return this.state.posts[postIndex].likers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleLikePost(postIndex){\r\n        \r\n        if(!this.isPostLiked(postIndex)){\r\n            this.props.likePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].likers.push(this.props.authUser.id);\r\n\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelLikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Cancel liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                    \r\n                    \r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    isPostDisliked(postIndex){\r\n        return this.state.posts[postIndex].dislikers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleDislikePost(postIndex){\r\n        if(!this.isPostDisliked(postIndex)){\r\n            this.props.dislikePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Disliked post successfully!');\r\n\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].dislikers.push(this.props.authUser.id);\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelDislikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Cancel disliked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n    \r\n    onClickPost(postId){\r\n        this.props.history.push(`/posts/${postId}`);\r\n    }\r\n\r\n    onClickEditPostButton(postId){\r\n        this.props.history.push(`/posts/${postId}/edit`);\r\n    }\r\n\r\n    loadPosts(pageIndex){\r\n        this.props.fetchLikedPosts(\r\n            this.props.authUser.id,\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.postParams,\r\n            (posts, pagination)=>{\r\n                // alertifyService.success('Fetched posts successfully!');\r\n     \r\n                this.setState({\r\n                    posts: posts,\r\n                    pagination: pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleInputChangePostParamsForm(event){\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n        console.log(name,value);\r\n\r\n        this.setState({\r\n            postParams: {...this.state.postParams, \r\n                [name]: value\r\n            }\r\n        });\r\n\r\n        if(name==\"category\" || name==\"orderBy\"){\r\n            setTimeout(()=>{\r\n            this.loadPosts(1);\r\n         }, 1);\r\n        }\r\n    }\r\n\r\n    handleSubmitPostParamsForm(event){\r\n        event.preventDefault();\r\n        this.loadPosts(1);\r\n    }\r\n\r\n    render() {\r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div>\r\n                <div className=\"container mt-4\">\r\n                    <div className=\"text-left mb-4\">\r\n                        <h2><i className=\"far fa-thumbs-up\"></i> Posts I Liked</h2>\r\n                    </div>\r\n                    <form className=\"row\" noValidate>   \r\n                       \r\n                        <div className=\"form-inline ml-3 mb-2\">\r\n                                <label className=\"mr-2\">Category</label>\r\n                                <select className=\"form-control\" style={{width: \"108px\"}} name=\"category\"\r\n                                    value={this.state.postParams.category}\r\n                                    onChange={this.handleInputChangePostParamsForm}\r\n                                >\r\n                                    <option key={\"all\"} value={\"\"}>\r\n                                        { \"All\" }\r\n                                    </option>\r\n                                {\r\n                                    postCategoryOptions.map(category=>{\r\n                                        return (\r\n                                            <option key={category.value} value={category.value}>\r\n                                                { category.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                                </select>\r\n                            </div>\r\n                  \r\n                     \r\n                  \r\n                        \r\n                        {/* <div className=\"col-sm-12 col-lg mb-2\" >\r\n                    \r\n                            <div className=\"input-group \">\r\n                                <input className=\"form-control\"  type=\"text\" placeholder=\"Web Development\"\r\n                                    value={this.state.postParams.search}\r\n                                    onChange={this.handleInputChangePostParamsForm}\r\n                                    name=\"search\"\r\n                                />\r\n                        \r\n                                <div className=\"input-group-append\">\r\n                                \r\n                                    <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmitPostParamsForm}>Search</button>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div> */}\r\n                    \r\n                        <div className=\"form-inline ml-auto mb-2\">\r\n                            <label className=\"mr-2\">Order By</label>\r\n                            <select className=\"form-control\" style={{width: \"166px\"}} name=\"orderBy\"\r\n                                value={this.state.postParams.orderBy}\r\n                                onChange={this.handleInputChangePostParamsForm}\r\n                            >\r\n                                {\r\n                                    orderByOptions.map(orderBy=>{\r\n                                        return (\r\n                                            <option key={orderBy.value} value={orderBy.value}>\r\n                                                { orderBy.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n                        {/* <button type=\"submit\" className=\"btn btn-primary\" >Search</button> */}\r\n                        {/* <button type=\"button\" className=\"btn btn-info\" style={{marginLeft:\"10px\"}}\r\n                        >Reset Filter</button> */}\r\n                    \r\n                    </form>\r\n                    <br/>\r\n                    <div className=\"row mb-4\">                    \r\n                        {\r\n                            this.state.posts && this.state.posts.length>0?\r\n                            this.state.posts.map((post, index)=>{\r\n                                return(\r\n                                    <div key={post.id} className={\"col-12 p-4 border-bottom \"+(index==0?\"border-top \":\"\")+styles.divPost} onClick={()=>this.onClickPost(post.id)}>\r\n\r\n                                        <div className={\"row text-left\"} >\r\n                                            \r\n                                            {/* <div className=\"col-12 my-auto px-5 px-sm-2 col-sm-2\"> */}\r\n                                            <div className=\"my-auto text-center col-12 px-5 col-sm-2 px-sm-3\">\r\n                                                <img className={\" \"+styles.imgCardSide} src={post.mainPostImageUrl}></img>\r\n                                            </div>\r\n                                            {/* <div className=\"col pt-0 pt-sm-2\"> */}\r\n                                         \r\n                                            <div className=\"col mt-3 mt-md-0\">\r\n                                                <h3 className=\"\">{post.title}</h3>\r\n                                                <div className=\"mb-2 text-secondary\">\r\n                                                    <span className=\"mr-2\">Liked: {(new Date(post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})},</span>\r\n                                                    <span>Updated: {(new Date(post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})}</span>\r\n                                                </div>\r\n                                                <div className=\"mb-2\">\r\n                                                    <strong className=\"font-weight-bold\">Category: </strong> {post.category.toUpperCase()}\r\n                                                </div>\r\n                                                <div className=\"mb-3\">\r\n                                                    <strong className=\"font-weight-bold\">Tags: </strong> {post.tags.join(\", \")}\r\n                                                </div>\r\n                                              \r\n                                               \r\n                                                <div className={\"mb-4 \"}>{post.description.length<=maxPostListDescriptionDisplayLength?post.description.length:(post.description.substring(0,maxPostListDescriptionDisplayLength)+\"...\")}</div>\r\n                                                <div className={\"row text-left\"} >\r\n                                                    <div className=\"col\">\r\n                                                        <button className={\"btn mr-2 \"+(post.likers.includes(this.props.authUser.id)?\"btn-success\":\"btn-secondary\")}\r\n                                                            onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.handleLikePost(index)}}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-up\"></i> Like · {post.likers.length}\r\n                                                        </button>\r\n                                                        <button className={\"btn \"+(post.dislikers.includes(this.props.authUser.id)?\"btn-danger\":\"btn-secondary\")}\r\n                                                            onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.handleDislikePost(index)}}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-down\"></i> Dislike · {post.dislikers.length}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                    {\r\n                                                        post.author.id==this.props.authUser.id?\r\n                                                        <div className=\"col-4 text-right\">\r\n                                                            <button className={\"btn btn-warning\"}\r\n                                                                onClick={(e)=>{\r\n                                                                    e.stopPropagation();\r\n                                                                    this.onClickEditPostButton(post.id);\r\n                                                                }}\r\n                                                            >\r\n                                                                <i className=\"fas fa-edit\"></i> Edit\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        :null\r\n                                                    }\r\n                                                </div>\r\n                                                {/* <span className=\"ml-auto text-right\">\r\n                                                    \r\n                                                </span> */}\r\n                                                {/* <a href=\"#\" className=\"btn btn-primary\">Go somewhere</a> */}\r\n                                            </div>\r\n                                            {/* <div className=\"card-footer text-muted\">\r\n                                                2 days ago\r\n                                            </div> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    // <div key={post.id} className=\"col-lg-2 col-md-3 col-sm-6\">\r\n                                    //     {post.title}\r\n                                    // </div>\r\n                                );\r\n                            })\r\n                            :\r\n                            this.state.posts && this.state.posts.length==0?\r\n                            <h3 className=\"mx-auto text-secondary\">\r\n                                You didn't like any post.\r\n                            </h3>\r\n                            :null\r\n                        }                 \r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LikedPosts));","import React, { Component } from 'react'\r\nimport { Pagination } from 'react-bootstrap';\r\nimport { fetchUserPosts, likePost, cancelLikedPost, dislikePost, cancelDislikedPost } from '../redux/ActionCreators';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { connect } from 'react-redux';\r\nimport { postCategoryOptions } from \"../shared/global\";\r\nimport styles from './PostsComponent.module.scss';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { maxPostListDescriptionDisplayLength } from '../shared/global';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authUser: state.auth.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchUserPosts: (userId, pageNumber, pageSize, postParams, onSuccess, onError) => { \r\n        dispatch(fetchUserPosts(userId, pageNumber, pageSize, postParams, onSuccess, onError)); },\r\n    likePost: (userId, postId, onSuccess, onError) => { dispatch(likePost(userId, postId, onSuccess, onError)); },\r\n    cancelLikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelLikedPost(userId, postId, onSuccess, onError)); },\r\n    dislikePost: (userId, postId, onSuccess, onError) => { dispatch(dislikePost(userId, postId, onSuccess, onError)); },\r\n    cancelDislikedPost: (userId, postId, onSuccess, onError) => { dispatch(cancelDislikedPost(userId, postId, onSuccess, onError)); }\r\n});\r\n\r\nconst orderByOptions = [\r\n    {value:'created', display:'Created Time'},\r\n    {value:'updated', display:'Updated Time'}\r\n]\r\n\r\nclass UserPosts extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            posts: null,\r\n            postParams:{\r\n                category: \"\",\r\n                orderBy: \"updated\"\r\n            },\r\n            pagination: {\r\n                currentPage: 1,\r\n                itemsPerPage: 5,\r\n                totalItems: 0,\r\n                totalPages: 0\r\n            }\r\n        };\r\n\r\n        this.handleChangePage = this.handleChangePage.bind(this);\r\n        this.handleLikePost = this.handleLikePost.bind(this);\r\n        this.onClickPost = this.onClickPost.bind(this);\r\n\r\n        this.handleInputChangePostParamsForm = this.handleInputChangePostParamsForm.bind(this);\r\n        this.handleSubmitPostParamsForm = this.handleSubmitPostParamsForm.bind(this);\r\n\r\n        this.onClickEditPostButton = this.onClickEditPostButton.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(()=>{\r\n            this.loadPosts(this.state.pagination.currentPage);\r\n         }, 1);\r\n    }\r\n\r\n    handleChangePage(pageIndex){\r\n        this.loadPosts(pageIndex);\r\n    }\r\n\r\n    isPostLiked(postIndex){\r\n        return this.state.posts[postIndex].likers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleLikePost(postIndex){\r\n        if(!this.isPostLiked(postIndex)){\r\n            this.props.likePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].likers.push(this.props.authUser.id);\r\n\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelLikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Cancel liked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                    \r\n                    \r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n\r\n    isPostDisliked(postIndex){\r\n        return this.state.posts[postIndex].dislikers.includes(this.props.authUser.id);\r\n    }\r\n\r\n    handleDislikePost(postIndex){\r\n\r\n        if(!this.isPostDisliked(postIndex)){\r\n            this.props.dislikePost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                    // alertifyService.success('Disliked post successfully!');\r\n\r\n                    let posts = this.state.posts;\r\n                    posts[postIndex].dislikers.push(this.props.authUser.id);\r\n                    \r\n                    let authUserLikerIndex = this.state.posts[postIndex].likers.indexOf(this.props.authUser.id);\r\n                    if(authUserLikerIndex!=-1){\r\n                        posts[postIndex].likers.splice(authUserLikerIndex,1);\r\n                    }\r\n\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }else{\r\n            this.props.cancelDislikedPost(\r\n                this.props.authUser.id,\r\n                this.state.posts[postIndex].id,\r\n                (res)=>{\r\n                \r\n                    // alertifyService.success('Cancel disliked post successfully!');\r\n                    let posts = this.state.posts;\r\n                    let authUserDislikerIndex = this.state.posts[postIndex].dislikers.indexOf(this.props.authUser.id);\r\n                    if(authUserDislikerIndex!=-1){\r\n                        posts[postIndex].dislikers.splice(authUserDislikerIndex,1);\r\n                    }\r\n                    this.setState({\r\n                        posts: posts\r\n                    });\r\n                },\r\n                (error)=>{\r\n                    alertifyService.error(error.message);\r\n                },\r\n            );\r\n        }\r\n    }\r\n    \r\n    onClickPost(postId){\r\n        this.props.history.push(`/posts/${postId}`);\r\n    }\r\n\r\n    onClickEditPostButton(postId){\r\n        this.props.history.push(`/posts/${postId}/edit`);\r\n    }\r\n\r\n    loadPosts(pageIndex){\r\n        this.props.fetchUserPosts(\r\n            this.props.match.params.id,\r\n            pageIndex,\r\n            this.state.pagination.itemsPerPage,\r\n            this.state.postParams,\r\n            (posts, pagination)=>{\r\n                // alertifyService.success('Fetched posts successfully!');\r\n\r\n                this.setState({\r\n                    posts: posts,\r\n                    pagination: pagination\r\n                });\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            },\r\n        );\r\n    }\r\n\r\n    handleInputChangePostParamsForm(event){\r\n\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            postParams: {...this.state.postParams, \r\n                [name]: value\r\n            }\r\n        });\r\n\r\n        if(name==\"category\" || name==\"orderBy\"){\r\n            setTimeout(()=>{\r\n            this.loadPosts(1);\r\n         }, 1);\r\n        }\r\n    }\r\n\r\n    handleSubmitPostParamsForm(event){\r\n        event.preventDefault();\r\n        this.loadPosts(1);\r\n    }\r\n\r\n    render() {\r\n        let paginationItems = [];\r\n        if(this.state.pagination){\r\n            for (let pageIndex = 1; pageIndex <= this.state.pagination.totalPages; pageIndex++) {\r\n                paginationItems.push(\r\n                    <Pagination.Item key={pageIndex} \r\n                        active={pageIndex === this.state.pagination.currentPage}\r\n                        onClick={(e)=>{this.handleChangePage(pageIndex)}}\r\n                    >\r\n                        {pageIndex}\r\n                    </Pagination.Item>,\r\n                );\r\n            }\r\n        }\r\n\r\n        return(\r\n            \r\n            <div>\r\n                <div className=\"container mt-4\">\r\n                    <div className=\"text-left mb-4\">\r\n                        <h2><i className=\"far fa-folder-open\"></i> {\r\n                            this.props.authUser.id==this.props.match.params.id?\r\n                            this.props.authUser.username\r\n                            :`User ${this.props.match.params.id}`\r\n                            }'s Posts</h2>\r\n                    </div>\r\n                    <form className=\"row\" noValidate>   \r\n                       \r\n                        <div className=\"form-inline ml-3 mb-2\">\r\n                                <label className=\"mr-2\">Category</label>\r\n                                <select className=\"form-control\" style={{width: \"108px\"}} name=\"category\"\r\n                                    value={this.state.postParams.category}\r\n                                    onChange={this.handleInputChangePostParamsForm}\r\n                                >\r\n                                    <option key={\"all\"} value={\"\"}>\r\n                                        { \"All\" }\r\n                                    </option>\r\n                                {\r\n                                    postCategoryOptions.map(category=>{\r\n                                        return (\r\n                                            <option key={category.value} value={category.value}>\r\n                                                { category.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                                </select>\r\n                            </div>\r\n                  \r\n                     \r\n                  \r\n                        \r\n                        {/* <div className=\"col-sm-12 col-lg mb-2\" >\r\n                    \r\n                            <div className=\"input-group \">\r\n                                <input className=\"form-control\"  type=\"text\" placeholder=\"Web Development\"\r\n                                    value={this.state.postParams.search}\r\n                                    onChange={this.handleInputChangePostParamsForm}\r\n                                    name=\"search\"\r\n                                />\r\n                        \r\n                                <div className=\"input-group-append\">\r\n                                \r\n                                    <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmitPostParamsForm}>Search</button>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div> */}\r\n                    \r\n                        <div className=\"form-inline ml-auto mb-2\">\r\n                            <label className=\"mr-2\">Order By</label>\r\n                            <select className=\"form-control\" style={{width: \"166px\"}} name=\"orderBy\"\r\n                                value={this.state.postParams.orderBy}\r\n                                onChange={this.handleInputChangePostParamsForm}\r\n                            >\r\n                                {\r\n                                    orderByOptions.map(orderBy=>{\r\n                                        return (\r\n                                            <option key={orderBy.value} value={orderBy.value}>\r\n                                                { orderBy.display }\r\n                                            </option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                        </div>\r\n                        {/* <button type=\"submit\" className=\"btn btn-primary\" >Search</button> */}\r\n                        {/* <button type=\"button\" className=\"btn btn-info\" style={{marginLeft:\"10px\"}}\r\n                        >Reset Filter</button> */}\r\n                    \r\n                    </form>\r\n                    <br/>\r\n                    <div className=\"row mb-4\">                    \r\n                        {\r\n                            this.state.posts&&this.state.posts.length?\r\n                            this.state.posts.map((post, index)=>{\r\n                                return(\r\n                                    <div key={post.id} className={\"col-12 p-4 border-bottom \"+(index==0?\"border-top \":\"\")+styles.divPost} onClick={()=>this.onClickPost(post.id)}>\r\n\r\n                                        <div className={\"row text-left\"} >\r\n                                            \r\n                                            {/* <div className=\"col-12 my-auto px-5 px-sm-2 col-sm-2\"> */}\r\n                                            <div className=\"my-auto text-center col-12 px-5 col-sm-2 px-sm-3\">\r\n                                                <img className={\" \"+styles.imgCardSide} src={post.mainPostImageUrl}></img>\r\n                                            </div>\r\n                                            {/* <div className=\"col pt-0 pt-sm-2\"> */}\r\n                                         \r\n                                            <div className=\"col mt-3 mt-md-0\">\r\n                                                <h3 className=\"\">{post.title}</h3>\r\n                                                <div className=\"mb-2 text-secondary\">\r\n                                                    <span className=\"mr-2\">Liked: {(new Date(post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})},</span>\r\n                                                    <span>Updated: {(new Date(post.updated)).toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric'})}</span>\r\n                                                </div>\r\n                                                <div className=\"mb-2\">\r\n                                                    <strong className=\"font-weight-bold\">Category: </strong> {post.category.toUpperCase()}\r\n                                                </div>\r\n                                                <div className=\"mb-3\">\r\n                                                    <strong className=\"font-weight-bold\">Tags: </strong> {post.tags.join(\", \")}\r\n                                                </div>\r\n                                              \r\n                                               \r\n                                                <div className={\"mb-4 \"}>{post.description.length<=maxPostListDescriptionDisplayLength?post.description.length:(post.description.substring(0,maxPostListDescriptionDisplayLength)+\"...\")}</div>\r\n                                                <div className={\"row text-left\"} >\r\n                                                    <div className=\"col\">\r\n                                                        <button className={\"btn mr-2 \"+(post.likers.includes(this.props.authUser.id)?\"btn-success\":\"btn-secondary\")}\r\n                                                            onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.handleLikePost(index)}}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-up\"></i> Like · {post.likers.length}\r\n                                                        </button>\r\n                                                        <button className={\"btn \"+(post.dislikers.includes(this.props.authUser.id)?\"btn-danger\":\"btn-secondary\")}\r\n                                                            onClick={(e)=>{\r\n                                                                e.stopPropagation(); \r\n                                                                this.handleDislikePost(index)}}\r\n                                                        >\r\n                                                            <i className=\"far fa-thumbs-down\"></i> Dislike · {post.dislikers.length}\r\n                                                        </button>\r\n                                                    </div>\r\n                                                    {\r\n                                                        post.author.id==this.props.authUser.id?\r\n                                                        <div className=\"col-4 text-right\">\r\n                                                            <button className={\"btn btn-warning\"}\r\n                                                                onClick={(e)=>{\r\n                                                                    e.stopPropagation();\r\n                                                                    this.onClickEditPostButton(post.id);\r\n                                                                }}\r\n                                                            >\r\n                                                                <i className=\"fas fa-edit\"></i> Edit\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        :null\r\n                                                    }\r\n                                                </div>\r\n                                                {/* <span className=\"ml-auto text-right\">\r\n                                                    \r\n                                                </span> */}\r\n                                                {/* <a href=\"#\" className=\"btn btn-primary\">Go somewhere</a> */}\r\n                                            </div>\r\n                                            {/* <div className=\"card-footer text-muted\">\r\n                                                2 days ago\r\n                                            </div> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    // <div key={post.id} className=\"col-lg-2 col-md-3 col-sm-6\">\r\n                                    //     {post.title}\r\n                                    // </div>\r\n                                );\r\n                            })\r\n                            :\r\n                            this.state.posts && this.state.posts.length==0?\r\n                            <h3 className=\"mx-auto text-secondary\">\r\n                                {\r\n                                    this.props.authUser.id==this.props.match.params.id?\r\n                                    \"You\"\r\n                                    :`User ${this.props.match.params.id}`\r\n                                } didn't create any post.\r\n                            </h3>\r\n                            :null\r\n                        }                 \r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-center\">\r\n                    <Pagination>\r\n                        <Pagination.First \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage!=1){\r\n                                    this.handleChangePage(1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        <Pagination.Prev \r\n                            onClick={(e)=>{                  \r\n                                if(this.state.pagination.currentPage>1){\r\n                                    this.handleChangePage(this.state.pagination.currentPage-1);\r\n                                }\r\n                            }}\r\n\r\n                            disabled={this.state.pagination.currentPage<=1}\r\n                        />\r\n                        {paginationItems}\r\n                        <Pagination.Next \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.currentPage+1);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                        <Pagination.Last \r\n                            onClick={(e)=>{\r\n                                if(this.state.pagination.currentPage<this.state.pagination.totalPages){\r\n                                    this.handleChangePage(this.state.pagination.totalPages);\r\n                                }\r\n                            }}\r\n                            disabled={this.state.pagination.currentPage>=this.state.pagination.totalPages}\r\n                        />\r\n                    </Pagination>\r\n                </div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(UserPosts));","import React, { Component } from 'react';\r\nimport { Control, LocalForm, Errors } from 'react-redux-form';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { required, minLength, maxLength, validDate } from '../shared/validators';\r\nimport { connect } from 'react-redux';\r\nimport { signupUser, loginUser } from '../redux/ActionCreators';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    signupUser: (creds, onSuccess, onError) => { dispatch(signupUser(creds, onSuccess, onError)) },\r\n    loginUser: (creds, onSuccess, onError) => { dispatch(loginUser(creds, onSuccess, onError)) }\r\n});\r\n\r\nclass Register extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            form: {\r\n                fields:{\r\n                    username: {\r\n                        value:''\r\n                    },\r\n                    dateOfBirth: {\r\n                        value:''\r\n                    },\r\n                    city: {\r\n                        value:''\r\n                    },\r\n                    country: {\r\n                        value:''\r\n                    },\r\n                    password: {\r\n                        value:'',\r\n                        visible:''\r\n                    },\r\n                    confirmPassword: {\r\n                        value:'',\r\n                        visible:''\r\n                    }\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            }\r\n        };\r\n        \r\n        this.handleInputChangeForm = this.handleInputChangeForm.bind(this);\r\n        this.handleSubmitForm = this.handleSubmitForm.bind(this);\r\n        this.handleBlurForm = this.handleBlurForm.bind(this);\r\n        this.togglePasswordVisibility = this.togglePasswordVisibility.bind(this);\r\n\r\n        console.log(window);\r\n    }\r\n\r\n    handleInputChangeForm(event){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].value = value;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n    \r\n    handleBlurForm = (event) => {\r\n        const target = event.target;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    togglePasswordVisibility(name){\r\n        let form = this.state.form;\r\n        form.fields[name].visible = !form.fields[name].visible;\r\n        this.setState({\r\n            form\r\n        });\r\n    }\r\n\r\n    validateForm(form){\r\n\r\n        for (let key in form.fields) {\r\n            form.fields[key].error = null;\r\n        }\r\n        \r\n        form.valid = true;\r\n\r\n        if (!required(form.fields.username.value)){\r\n            form.valid = false;      \r\n            form.fields.username.error = 'Username is required.';\r\n        }\r\n    \r\n        if (!required(form.fields.password.value)){\r\n            form.valid = false;\r\n            form.fields.password.error = 'Password is required.';      \r\n        }\r\n\r\n        if (!required(form.fields.confirmPassword.value)){\r\n            form.valid = false;\r\n            form.fields.confirmPassword.error = 'Please re-enter your password.';\r\n        }\r\n        else if (form.fields.password.value != form.fields.confirmPassword.value){\r\n            form.valid = false;\r\n            form.fields.confirmPassword.error = 'Password and confirmed password do not match.';\r\n        }\r\n\r\n        return form;\r\n    }\r\n\r\n    showFormFieldError(name){\r\n        return this.state.form.fields[name].error && this.state.form.fields[name].touched\r\n    }\r\n\r\n    handleSubmitForm(event) {\r\n        event.preventDefault();\r\n        \r\n        let form = this.state.form;\r\n\r\n        if(form.touched){\r\n            if(!form.valid){\r\n               \r\n                for (let key in form.fields) {\r\n                    form.fields[key].touched = true;\r\n                }\r\n                form.touched = true;\r\n\r\n                this.setState({\r\n                    form\r\n                });\r\n    \r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n        else{\r\n            \r\n            for (let key in form.fields) {\r\n                form.fields[key].touched = true;\r\n            }\r\n            form.touched = true;\r\n\r\n            form = this.validateForm(form);\r\n\r\n            this.setState({\r\n                form\r\n            });\r\n\r\n            if(!form.valid){\r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n       \r\n        let creds = {\r\n            username:this.state.form.fields.username.value, \r\n            password:this.state.form.fields.password.value\r\n        };\r\n        this.props.signupUser(\r\n            creds,\r\n            (user)=>{\r\n                // alertifyService.success(\"Registered user successfully!\");\r\n                this.props.close();\r\n                this.props.loginUser(creds,\r\n                    ()=>{\r\n                        // alertifyService.success(\"Logged in successfully!\");\r\n                    },\r\n                    (error)=>{\r\n                        alertifyService.error(error.message);\r\n                    }\r\n                );\r\n            },\r\n            (error)=>{\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n    }\r\n\r\n    render(){\r\n        // let {formErrors, formValid} = this.validateForm();\r\n\r\n        return(\r\n            <form className=\"\" noValidate onSubmit={this.handleSubmitForm}>\r\n                <h2 className=\"text-center text-primary my-2\">Sign Up</h2>\r\n                <hr className=\"mb-4\"/>\r\n\r\n                <div className=\"form-group\">\r\n                    <input name='username' type=\"text\" placeholder=\"Username\"\r\n                        className={\"form-control \"+(this.showFormFieldError('username')?'is-invalid':'')} \r\n                        autoComplete=\"new-username\"                        \r\n                        value={this.state.form.fields.username.value}\r\n                        onChange={this.handleInputChangeForm}\r\n                        onBlur={this.handleBlurForm}\r\n                        />\r\n                    <div className=\"invalid-feedback\">{this.showFormFieldError('username')?this.state.form.fields.username.error:''}</div>\r\n                </div>\r\n                {/* <div className=\"form-group\">\r\n                    <input name='dateOfBirth' type=\"date\" placeholder=\"Date of Birth\"\r\n                        className={\"form-control \"+(formErrors.dateOfBirth?'is-invalid':'')}                 \r\n                        value={this.state.form.fields.dateOfBirth.value}\r\n                        onChange={this.handleInputChangeForm}\r\n                        onBlur={this.handleBlurForm}\r\n                        />\r\n                    <div className=\"invalid-feedback\">{formErrors.dateOfBirth}</div>\r\n                </div> */}\r\n\r\n                {/* <div className=\"form-group\">\r\n                    <input name='city' type=\"text\" placeholder=\"City\"\r\n                        className={\"form-control \"+(formErrors.city?'is-invalid':'')}                 \r\n                        value={this.state.form.fields.city.value}\r\n                        onChange={this.handleInputChangeForm}\r\n                        onBlur={this.handleBlurForm}\r\n                        />\r\n                    <div className=\"invalid-feedback\">{formErrors.city}</div>\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                    <input name='country' type=\"text\" placeholder=\"Country\"\r\n                        className={\"form-control \"+(formErrors.country?'is-invalid':'')}                 \r\n                        value={this.state.form.fields.country.value}\r\n                        onChange={this.handleInputChangeForm}\r\n                        onBlur={this.handleBlurForm}\r\n                        />\r\n                    <div className=\"invalid-feedback\">{formErrors.country}</div>\r\n                </div> */}\r\n                <div className=\"form-group\">\r\n                    <div className=\"input-group\">\r\n                        <input name='password' type={this.state.form.fields.password.visible?\"text\":\"password\"} placeholder=\"Password\"\r\n                            className={\"form-control \"+(this.showFormFieldError('password')?'is-invalid':'')} \r\n                            autoComplete=\"new-password\"                            \r\n                            value={this.state.form.fields.password.value}\r\n                            onChange={this.handleInputChangeForm}\r\n                            onBlur={this.handleBlurForm}\r\n                        />\r\n                       \r\n                        <div className=\"input-group-append\">\r\n                            <span className=\"input-group-text\">\r\n                                <i className={this.state.form.fields.password.visible?\"fa fa-eye-slash\":\"fa fa-eye\"}\r\n                                    style={{cursor: \"pointer\"}}\r\n                                    onClick={()=>this.togglePasswordVisibility('password')}>\r\n                                </i>\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"invalid-feedback\">{this.showFormFieldError('password')?this.state.form.fields.password.error:''}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"input-group\">\r\n                        <input name='confirmPassword' type={this.state.form.fields.confirmPassword.visible?\"text\":\"password\"} placeholder=\"Confirm Password\"\r\n                            className={\"form-control \"+(this.showFormFieldError('confirmPassword')?'is-invalid':'')}\r\n                            value={this.state.form.fields.confirmPassword.value}\r\n                            onChange={this.handleInputChangeForm}\r\n                            onBlur={this.handleBlurForm}\r\n                        />\r\n                        \r\n                        <div className=\"input-group-append\">\r\n                            <span className=\"input-group-text\">\r\n                                <i className={this.state.form.fields.confirmPassword.visible?\"fa fa-eye-slash\":\"fa fa-eye\"} \r\n                                    style={{cursor: \"pointer\"}} \r\n                                    onClick={()=>this.togglePasswordVisibility('confirmPassword')}>\r\n                                </i>\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"invalid-feedback\">{this.showFormFieldError('confirmPassword')?this.state.form.fields.confirmPassword.error:''}</div>\r\n                    </div>     \r\n                </div>\r\n               \r\n                <div className=\"form-group text-center mt-4\">\r\n                    <button className=\"btn btn-success mr-2\" type=\"submit\" >Register</button>\r\n                    <button className=\"btn btn-secondary\" type=\"button\" onClick={this.props.close}>Cancel</button>\r\n                </div>\r\n            </form>\r\n\r\n        );\r\n    }\r\n  \r\n};\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(Register));","import React, { Component } from 'react';\r\nimport { Control, LocalForm, Errors } from 'react-redux-form';\r\nimport { alertifyService } from '../services/AlertifyService';\r\nimport { required, minLength, maxLength, validDate } from '../shared/validators';\r\nimport { connect } from 'react-redux';\r\nimport { loginUser } from '../redux/ActionCreators';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    loginUser: (creds, onSuccess, onError) => { dispatch(loginUser(creds, onSuccess, onError)) }\r\n});\r\n\r\nclass Login extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            form: {\r\n                fields:{\r\n                    username: {\r\n                        value:''\r\n                    },\r\n                    dateOfBirth: {\r\n                        value:''\r\n                    },\r\n                    city: {\r\n                        value:''\r\n                    },\r\n                    country: {\r\n                        value:''\r\n                    },\r\n                    password: {\r\n                        value:'',\r\n                        visible:''\r\n                    },\r\n                    confirmPassword: {\r\n                        value:'',\r\n                        visible:''\r\n                    }\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            }\r\n        };\r\n        \r\n        this.handleInputChangeForm = this.handleInputChangeForm.bind(this);\r\n        this.handleSubmitForm = this.handleSubmitForm.bind(this);\r\n        this.handleBlurForm = this.handleBlurForm.bind(this);\r\n        this.togglePasswordVisibility = this.togglePasswordVisibility.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount(){\r\n        console.log(\"RegisterComponent.componentDidMount\",this.props);\r\n    }\r\n\r\n\r\n    handleInputChangeForm(event){\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].value = value;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n    \r\n    handleBlurForm = (event) => {\r\n        const target = event.target;\r\n        const name = target.name;\r\n\r\n        let form = this.state.form;\r\n        form.fields[name].touched = true;\r\n        form.touched = true;\r\n\r\n        form = this.validateForm(form);\r\n\r\n        this.setState({\r\n            form: form\r\n        });\r\n    }\r\n\r\n    togglePasswordVisibility(name){\r\n        let form = this.state.form;\r\n        form.fields[name].visible = !form.fields[name].visible;\r\n        this.setState({\r\n            form\r\n        });\r\n    }\r\n\r\n    handleSubmitForm(event) {\r\n        event.preventDefault();\r\n\r\n        let form = this.state.form;\r\n\r\n        if(form.touched){\r\n            if(!form.valid){\r\n               \r\n                for (let key in form.fields) {\r\n                    form.fields[key].touched = true;\r\n                }\r\n                form.touched = true;\r\n\r\n                this.setState({\r\n                    form\r\n                });\r\n    \r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n        else{\r\n            \r\n            for (let key in form.fields) {\r\n                form.fields[key].touched = true;\r\n            }\r\n            form.touched = true;\r\n\r\n            form = this.validateForm(form);\r\n\r\n            this.setState({\r\n                form\r\n            });\r\n\r\n            if(!form.valid){\r\n                alertifyService.error('Please correct the errors on this form.');\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.props.loginUser(\r\n            {\r\n                username:this.state.form.fields.username.value, \r\n                password:this.state.form.fields.password.value\r\n            },\r\n            ()=>{\r\n                // alertifyService.success('Logged in successfully!');\r\n                // this.props.history.push('/posts');\r\n                this.props.close();                \r\n            },\r\n            (error)=>{\r\n\r\n                alertifyService.error(error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    validateForm(form){\r\n\r\n        for (let key in form.fields) {\r\n            form.fields[key].error = null;\r\n        }\r\n        \r\n        form.valid = true;\r\n\r\n        if (!required(form.fields.username.value)){\r\n            form.valid = false;      \r\n            form.fields.username.error = 'Username is required.';\r\n        }\r\n    \r\n        if (!required(form.fields.password.value)){\r\n            form.valid = false;\r\n            form.fields.password.error = 'Password is required.';      \r\n        }\r\n\r\n        return form;\r\n    }\r\n\r\n    showFormFieldError(name){\r\n        return this.state.form.fields[name].error && this.state.form.fields[name].touched\r\n    }\r\n\r\n    render(){\r\n        // let {formErrors, validForm} = this.validateForm();\r\n\r\n        return(\r\n            <form className=\"\" noValidate onSubmit={this.handleSubmitForm}>\r\n                <h2 className=\"text-center text-primary my-2\">Log In</h2>\r\n                <hr className=\"mb-4\"/>\r\n\r\n                <div className=\"form-group\">\r\n                    <label className=\"font-weight-bold\">Username</label>\r\n                    <input className={\"form-control \"+(this.showFormFieldError('username')?'is-invalid':'')} type=\"text\" placeholder=\"Username\"\r\n                        name='username'\r\n                        value={this.state.form.fields.username.value}\r\n                        onChange={this.handleInputChangeForm}\r\n                        onBlur={this.handleBlurForm}\r\n                        />\r\n                    <div className=\"invalid-feedback\">{this.showFormFieldError('username')?this.state.form.fields.username.error:''}</div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"font-weight-bold\">Password</label>\r\n                    <div className=\"input-group\">\r\n                        <input className={\"form-control \"+(this.showFormFieldError('password')?'is-invalid':'')} type={this.state.form.fields.password.visible?\"text\":\"password\"} placeholder=\"Password\"\r\n                            name='password'\r\n                            value={this.state.form.fields.password.value}\r\n                            onChange={this.handleInputChangeForm}\r\n                            onBlur={this.handleBlurForm}\r\n                            />\r\n                       \r\n                        <div className=\"input-group-append\">\r\n                            <span className=\"input-group-text\"><i className={this.state.form.fields.password.visible?\"fas fa-eye-slash\":\"fas fa-eye\"} style={{cursor: \"pointer\"}} onClick={()=>this.togglePasswordVisibility('password')}></i></span>\r\n                        </div>\r\n                        <div className=\"invalid-feedback\">{this.showFormFieldError('password')?this.state.form.fields.password.error:''}</div>\r\n                    </div>\r\n                </div>\r\n               \r\n                {/* <div class=\"custom-control custom-checkbox\">\r\n                    <input type=\"checkbox\" class=\"custom-control-input\" id=\"customCheck1\"/>\r\n                    <label class=\"custom-control-label\" for=\"customCheck1\">Remember Me</label>\r\n                    <div className=\"invalid-feedback\">asdasda</div>\r\n                </div> */}\r\n               \r\n                <div className=\"form-group text-center mt-4\">\r\n                    <button className=\"btn btn-info mr-2\" type=\"submit\" >Log In</button>\r\n                    <button className=\"btn btn-secondary\" type=\"button\" onClick={this.props.close}>Cancel</button>\r\n                </div>\r\n            </form>\r\n            \r\n        );\r\n    }\r\n  \r\n};\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(Login));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signupUser } from '../redux/ActionCreators';\r\nimport { Loading } from './LoadingComponent';\r\nimport Home from './HomeComponent';\r\nimport Header from './HeaderComponent';\r\nimport Footer from './FooterComponent';\r\nimport Lists from './ListsComponent';\r\nimport MemberList from './member/MemberListComponent';\r\nimport MemberDetails from './MemberDetailsComponent';\r\nimport MemberEdit from './MemberEditComponent';\r\nimport Messages from './MessagesComponent';\r\nimport CreatePost from './CreatePostComponent';\r\nimport PostDetails from './PostDetailsComponent';\r\nimport Posts from './PostsComponent';\r\nimport EditPost from './EditPostComponent';\r\nimport LikedPosts from './LikedPostsComponent';\r\nimport UserPosts from './UserPostsComponent';\r\nimport { Switch, Route, Redirect, withRouter } from 'react-router-dom';\r\nimport { Modal } from 'react-bootstrap';\r\nimport Register from './RegisterComponent';\r\nimport Login from './LoginComponent';\r\n// import { Modal } from 'react-bootstrap';\r\n// import Register from './RegisterComponent';\r\n// import Login from './LoginComponent';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuthenticated: state.auth.isAuthenticated\r\n        // authUserId: state.auth.decodedToken.nameid\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    \r\n});\r\n\r\n// const RenderValues = ({values, isLoading, errMess}) => {\r\n//     if(isLoading){\r\n//         return (\r\n//             <div className=\"row\">\r\n//                 <Loading/>\r\n//             </div>\r\n//         );\r\n//     }\r\n//     else if(errMess){\r\n//         return(\r\n//             <div className=\"row\">\r\n//                 <h4>{errMess}</h4>\r\n//             </div>\r\n//         );\r\n//     }\r\n//     else {\r\n       \r\n//         const valueItems = values.map((value)=>{\r\n//             console.log(value);\r\n//             return (\r\n//                 <div key={value.id} className=\"col-12\">\r\n//                     <p>Id: {value.id} Name: {value.name}</p>                \r\n//                 </div>\r\n//             );\r\n//         });\r\n//         return(\r\n//             <div className=\"row\">\r\n//                 {valueItems}\r\n//             </div>\r\n//         );\r\n//     }\r\n// } \r\n\r\nclass Main extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n     \r\n       \r\n        this.state = {\r\n            modal: {\r\n                show: false,\r\n                type: ''\r\n            }   \r\n        };\r\n\r\n        this.showModal = this.showModal.bind(this);\r\n        this.hideModal = this.hideModal.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(\"MainComponent.componentDidMount\");\r\n\r\n        // window.addEventListener(\"beforeunload\", this.keepOnPage);\r\n    \r\n    }\r\n\r\n    componentWillUnmount() {\r\n        console.log(\"MainComponent.componentWillUnmount\");\r\n        // window.removeEventListener('beforeunload', this.keepOnPage);\r\n    }\r\n\r\n    // componentDidUpdate(oldProps) {\r\n    //     if (this.props.location !== oldProps.location) {\r\n    //       this.onRouteChanged(oldProps.location, this.props.location);\r\n    //     }\r\n    // }\r\n\r\n    // keepOnPage(e) {\r\n    //     return (e || window.event).returnValue = 'Are you sure you want to close this page?';\r\n    // }\r\n    \r\n    // onRouteChanged(oldLocation, newLocation) {\r\n    // console.log(\"onRouteChanged!\");\r\n    // console.log(oldLocation);\r\n    // console.log(newLocation);\r\n    // }\r\n    \r\n    // showModal(type){\r\n    //     this.setState({\r\n    //         modal: {...this.state.modal, show:true, type:type}\r\n    //     });\r\n    // }\r\n\r\n    // hideModal(){\r\n    //     console.log(\"HeaderComponent.hideModal\");\r\n    //     this.setState({\r\n    //         modal: {...this.state.modal, show:false}\r\n    //     });\r\n    // }\r\n    showModal(type){\r\n        this.setState({\r\n            modal: {...this.state.modal, show:true, type:type}\r\n        });\r\n    }\r\n\r\n    hideModal(){\r\n        console.log(\"MainComponent.hideModal\");\r\n        this.setState({\r\n            modal: {...this.state.modal, show:false}\r\n        });\r\n    }\r\n\r\n    render(){\r\n        console.log(\"render main component\");\r\n        const AuthGuardedRoute = ({ render, ...rest }) => (\r\n            <Route {...rest} render={\r\n                this.props.isAuthenticated? render\r\n                : (props)=><Redirect to={{ pathname: '/home', state: { from: props.location } }} />\r\n            } />\r\n          );\r\n\r\n        return (\r\n            <div className=\"Main\">\r\n                <Header showModal={this.showModal}/>\r\n                {/* <Header history={this.props.history}/> */}\r\n                <Switch>\r\n\r\n                    <Route path=\"/home\" component={() => <Home \r\n                            signupUser={this.props.signupUser} />}\r\n                    />\r\n\r\n                    <Route exact path=\"/search\" render={(props) => <Posts showModal={this.showModal}/>}  />\r\n                    <Route exact path=\"/posts/:id\" render={(props) => <PostDetails />} />\r\n                    <AuthGuardedRoute path=\"/posts/:id/edit\" render={(props) => <EditPost />} />\r\n                    <AuthGuardedRoute path=\"/likedPosts\" render={(props) => <LikedPosts/>} />\r\n                    <AuthGuardedRoute path=\"/userPosts/:id\" render={(props) => <UserPosts/>} />\r\n                    {/* <AuthGuardedRoute exact path=\"/members\" render={(props) => <MemberList/>} /> */}\r\n                    <Route path=\"/members/:id\" render={(props) => <MemberDetails />} />\r\n                    <AuthGuardedRoute path=\"/member/edit\" render={(props) => <MemberEdit/>} />\r\n                    <AuthGuardedRoute path=\"/messages\" render={(props) => <Messages/>} />            \r\n                    <AuthGuardedRoute path=\"/lists\" render={(props) => <Lists/>} />\r\n                    <AuthGuardedRoute path=\"/createPost\" render={(props) => <CreatePost/>} />\r\n\r\n                    <Redirect to=\"/home\" />\r\n                </Switch>\r\n                {/* <Footer/> */}\r\n   \r\n                {/* <div className=\"container\">\r\n                    <h1 className=\"my-4\">Dating App</h1>\r\n\r\n                    <RenderValues\r\n                        values={this.props.values.values}\r\n                        isLoading={this.props.values.isLoading}\r\n                        errMess={this.props.values.errMess}\r\n                    />     \r\n                </div> */}\r\n                <Modal\r\n                    show={this.state.modal.show}\r\n                    onHide={this.hideModal}\r\n                    animation={true}\r\n                    backdrop={'static'}\r\n                    centered\r\n                    scrollable={true}\r\n                >\r\n                    {/* <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Modal heading\r\n                    </Modal.Title>\r\n                    </Modal.Header> */}\r\n                    <Modal.Body className=\"mx-4\">\r\n                        {\r\n                            this.state.modal.type=='login'?\r\n                            <Login close={this.hideModal}/>\r\n                            :null\r\n                        }\r\n                        {\r\n                            this.state.modal.type=='register'?\r\n                            <Register close={this.hideModal}/>\r\n                            : null\r\n                        }\r\n                       \r\n                    </Modal.Body>\r\n                    {/* <Modal.Footer>\r\n                    <Button onClick={() => this.setState({ showLoginModal: false })}>Close</Button>\r\n                    </Modal.Footer> */}\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Main));","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport { Values } from './values';\r\nimport { Users } from './users';\r\nimport { Auth } from './auth';\r\nimport thunk from 'redux-thunk';\r\nimport logger from \"redux-logger\";\r\n\r\n// const ConfigureStore = () => {\r\n//     return createStore(\r\n//         combineReducers({\r\n//             values: Values,\r\n//             auth: Auth,\r\n//             users: Users\r\n//         }),\r\n//         applyMiddleware(thunk, logger)\r\n//     );\r\n// }\r\n\r\nexport const store = createStore(\r\n    combineReducers({\r\n        values: Values,\r\n        auth: Auth,\r\n        users: Users\r\n    }),\r\n    applyMiddleware(thunk, logger)\r\n);","import * as ActionTypes from './ActionTypes';\r\n\r\nexport const Values = (\r\n    state = { \r\n        isLoading: true, \r\n        errMess: null, \r\n        values: []\r\n    }, \r\n    action) => {\r\n    switch(action.type) {\r\n        case ActionTypes.VALUES_LOADING:\r\n            return {...state, isLoading: true, errMess: null, values: []};\r\n        case ActionTypes.ADD_VALUES:\r\n            return {...state, isLoading: false, errMess: null, values: action.payload};\r\n        case ActionTypes.VALUES_FAILED:\r\n            return {...state, isLoading: false, errMess: action.payload, values: []};\r\n        default:\r\n            return state;\r\n    }\r\n}","import * as ActionTypes from './ActionTypes';\r\nimport JwtDecode from 'jwt-decode';\r\nimport { store } from './store';\r\n\r\nconst initAuthState = ()=>{\r\n    var initAuthState = {\r\n        isRequestingLogin: false,\r\n        errMessLogin: null,\r\n        isAuthenticated: false,\r\n        token: null,\r\n        decodedToken: null,\r\n        user: null,\r\n        isRequestingLogout: false\r\n    };\r\n\r\n    const token = localStorage.getItem('token');\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    if(token != null && user != null){\r\n        const decodedToken = JwtDecode(token);\r\n        if (typeof decodedToken.exp === 'undefined' || decodedToken.exp > Date.now().valueOf() / 1000) {\r\n            initAuthState.token = token;\r\n            initAuthState.decodedToken = decodedToken;\r\n            initAuthState.isAuthenticated = true;\r\n            initAuthState.user = user;\r\n\r\n        }\r\n        else{\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user');\r\n        }\r\n    }\r\n\r\n    return initAuthState;\r\n};\r\n\r\nexport const Auth = (state = initAuthState(), action) => {\r\n    switch(action.type){\r\n        case ActionTypes.LOGIN_REQUEST:\r\n            return {...state,\r\n                isRequestingLogin: true,\r\n                errMessLogin:null,\r\n                isAuthenticated: false,\r\n                token: null,\r\n                decodedToken: null,\r\n                user: null\r\n            };\r\n        case ActionTypes.LOGIN_SUCCESS:\r\n            return {...state,\r\n                isRequestingLogin: false,\r\n                errMessLogin:null,\r\n                isAuthenticated: true,\r\n                token: action.token,\r\n                decodedToken: JwtDecode(action.token),\r\n                user: action.user,\r\n            };\r\n        case ActionTypes.LOGIN_FAILURE:\r\n            return {...state,\r\n                isRequestingLogin: false,\r\n                errMessLogin:action.message,\r\n                isAuthenticated: false,\r\n                token: null,\r\n                decodedToken: null,\r\n                user: null\r\n            };\r\n        case ActionTypes.LOGOUT_REQUEST:\r\n            return {...state,\r\n                isRequestingLogout: true\r\n            };\r\n        case ActionTypes.LOGOUT_SUCCESS:\r\n            return {...state,\r\n                isRequestingLogout: false,\r\n                isAuthenticated: false,\r\n                token: null,\r\n                decodedToken: null\r\n            };\r\n        case ActionTypes.SET_USER_MAIN_PHOTO_URL:\r\n            return {...state,\r\n                user: {...state.user, mainPhotoUrl: action.url}\r\n            };\r\n        case ActionTypes.ADD_AUTH_USER:\r\n            return {...state,\r\n                user: action.user\r\n            };\r\n        // case ActionTypes.SIGNUP_REQUEST:\r\n        //     return {...state,\r\n        //         isLoadingSignup: true\r\n        //     };\r\n        // case ActionTypes.SIGNUP_SUCCESS:\r\n        //     return {...state,\r\n        //         isLoadingSignup: false,\r\n        //         errMess: '',\r\n        //     };\r\n        // case ActionTypes.SIGNUP_FAILURE:\r\n        //     return {...state,\r\n        //         isLoadingSignup: false,\r\n        //         errMess: action.message\r\n        //     };\r\n        default:\r\n            return state;\r\n    }\r\n};","import * as ActionTypes from './ActionTypes';\r\n\r\nexport const Users = (\r\n    state = { \r\n        isLoading: false,\r\n        errMess: null,\r\n        users: [],\r\n        usersDetails: [],\r\n    }, \r\n    action) => {\r\n    switch(action.type) {\r\n        case ActionTypes.USERS_LOADING:\r\n            return {...state, isLoading: true, errMess: null, users: []};\r\n        case ActionTypes.ADD_USERS:\r\n            return {...state, isLoading: false, errMess: null, users: action.payload};\r\n        case ActionTypes.USERS_FAILED:\r\n            return {...state, isLoading: false, errMess: action.payload, users: []};\r\n        case ActionTypes.ADD_USER:{\r\n            var usersDetails = state.usersDetails;\r\n            var userDetailsIndex = usersDetails.findIndex(userDetails=>userDetails.id == action.user.id);\r\n            if(userDetailsIndex==-1){\r\n                usersDetails.push(action.user);\r\n            }\r\n            else{\r\n                usersDetails[userDetailsIndex]=action.user;\r\n            }\r\n            return {...state, usersDetails: usersDetails};\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}","import fetchIntercept from 'fetch-intercept';\r\nimport { store } from '../redux/store';\r\nimport { serverIP, serverPort } from './config';\r\n\r\nexport const jwtWhiteListedDomains = [\r\n    `${serverIP}:${serverPort}`\r\n];\r\nexport const jwtBlackListedDomains = [\r\n    `${serverIP}:${serverPort}/api/auth`\r\n];\r\n\r\nexport const unregisterFetchIntercept = fetchIntercept.register({\r\n    request: function (url, config) {\r\n        // console.log(\"fetchIntercept.request\");\r\n        // console.log(url,config);\r\n        \r\n        const domain = url.replace(/(^\\w+:|^)\\/\\//, '');\r\n\r\n        if (store.getState().auth.isAuthenticated == true){\r\n            var jwtRequired = false;\r\n            for(let jwtWhiteListedDomain of jwtWhiteListedDomains){\r\n                if(domain.indexOf(jwtWhiteListedDomain)!=-1){\r\n                    jwtRequired = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if(jwtRequired){\r\n                for(let jwtBlackListedDomain of jwtBlackListedDomains){\r\n                    if(domain.indexOf(jwtBlackListedDomain)!=-1){\r\n                        jwtRequired = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n       \r\n            if(jwtRequired){\r\n                if(config == null){\r\n                    config = {};\r\n                }\r\n\r\n                if(config.headers == null){\r\n                    config.headers = {};\r\n                }\r\n\r\n                config.headers['Authorization'] = 'bearer ' + store.getState().auth.token;\r\n            }\r\n        }\r\n    \r\n        // Modify the url or config here\r\n        return [url, config];\r\n    },\r\n\r\n    requestError: function (error) {\r\n        // console.log(\"fetchIntercept.error\");\r\n        // console.log(error);\r\n        // Called when an error occured during another 'request' interceptor call\r\n        return Promise.reject(error);\r\n    },\r\n\r\n    response: function (response) {\r\n        // console.log(\"fetchIntercept.response\");\r\n        // console.log(response);\r\n\r\n        // if(!response.ok){\r\n        //     const applicationError = response.headers.get('Application-Error');\r\n        //     if(applicationError){\r\n        //         throw new Error(applicationError);\r\n        //     }\r\n\r\n        //     response.clone().json()\r\n        //     .then(responseBodyJson=>{\r\n        //         console.log(responseBodyJson);\r\n        //     })\r\n        //     .catch(error=>{\r\n        //         console.log(error);\r\n        //         throw error;\r\n                \r\n        //         response.clone().text()\r\n        //         .then(responseBodyText=>{\r\n        //             throw new Error(responseBodyText);\r\n        //         })\r\n        //         .catch(error=>{\r\n        //             throw error;\r\n        //         })\r\n                \r\n        //     });\r\n     \r\n        // }\r\n        // Modify the reponse object\r\n        return response;\r\n    },\r\n\r\n\r\n    responseError: function (error) {\r\n        // console.log(\"fetchIntercept.responseError\");\r\n        // console.log(error);\r\n        // Handle an fetch error\r\n        return Promise.reject(error);\r\n    }\r\n});\r\n\r\n\r\n\r\n// // Call fetch to see your interceptors in action.\r\n// fetch('http://google.com');\r\n\r\n// // Unregister your interceptor\r\n// unregister();","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Main from './components/MainComponent';\nimport { Provider } from 'react-redux';\nimport { store } from './redux/store';\nimport { BrowserRouter } from \"react-router-dom\";\nimport { unregisterFetchIntercept } from './shared/fetchIntercept';\nimport Footer from './components/FooterComponent';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <div className=\"App\">\n          <Main/>\n          <Footer/>\n        </div>\n      </BrowserRouter>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// import 'react-app-polyfill/ie11';\n// import 'react-app-polyfill/stable';\nimport 'react-app-polyfill/ie9'\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// import 'bootswatch/dist/sketchy/bootstrap.min.css';\nimport 'bootswatch/dist/sandstone/bootstrap.min.css';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport 'alertifyjs/build/css/alertify.min.css';\nimport 'alertifyjs/build/css/themes/bootstrap.min.css';\nimport 'react-image-gallery/styles/css/image-gallery.css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgCardSide\":\"PostsComponent_imgCardSide__3afKU\",\"divPost\":\"PostsComponent_divPost__Rn3DB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"MessagesComponent_table__3zW3d\",\"imgCircle\":\"MessagesComponent_imgCircle__1WpO0\",\"td\":\"MessagesComponent_td__1bIQK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imgThumbnail\":\"CreatePostComponent_imgThumbnail__3oHw6\",\"labelInputImage\":\"CreatePostComponent_labelInputImage__10aNz\",\"isInvalid\":\"CreatePostComponent_isInvalid__1bxop\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MemberMessagesComponent_card__1S5uI\",\"chat\":\"MemberMessagesComponent_chat__3E6x2\",\"roundedCircle\":\"MemberMessagesComponent_roundedCircle__12ldk\",\"cardBody\":\"MemberMessagesComponent_cardBody__DkLPn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdownToggle\":\"HeaderComponent_dropdownToggle__1_QCU\",\"dropdownItem\":\"HeaderComponent_dropdownItem__3CnDJ\",\"imgUser\":\"HeaderComponent_imgUser__3Doy_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MemberCardComponent_card__1xBF3\",\"cardImgWrapper\":\"MemberCardComponent_cardImgWrapper__1jQZl\",\"memberIcons\":\"MemberCardComponent_memberIcons__2RG7_\",\"animate\":\"MemberCardComponent_animate__Xfzsi\"};"],"sourceRoot":""}